(()=>{var e={};e.id=547,e.ids=[547],e.modules={2256:(e,r,t)=>{"use strict";t.r(r),t.d(r,{"60fa3c5f66f65ee78333f286699cda2798e6c97d0c":()=>l});var n=t(61025);t(37133);var s=t(95705),o=t(95806);async function l(e,r){let t=r.get("location"),n=r.get("columnsJson"),l=[];try{l=JSON.parse(n)}catch(e){return{success:!1,error:"Invalid column data"}}if(!t)return{success:!1,error:"Location is required"};if(l.some(e=>""===e.name))return{success:!1,error:"All columns must have a name"};if(l.some(e=>""===e.type))return{success:!1,error:"All columns must have a type"};try{let r=await (await (0,s.K)()).POST("/datasets/{dataset_id}/shardsets",{params:{path:{dataset_id:e}},body:{location:t,columns:l}});if(r.error){let e="Unknown error";return"string"==typeof r.error.detail&&(e=r.error.detail),{success:!1,error:e}}return(0,o.revalidatePath)(`/datasets/${e}`),{success:!0,data:r.data}}catch(e){return{success:!1,error:e instanceof Error?e.message:"An unexpected error occurred"}}}(0,t(51221).D)([l]),(0,n.A)(l,"60fa3c5f66f65ee78333f286699cda2798e6c97d0c",null)},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},15029:(e,r,t)=>{"use strict";t.d(r,{AddShardsetDialog:()=>n});let n=(0,t(18445).registerClientReference)(function(){throw Error("Attempted to call AddShardsetDialog() from the server but AddShardsetDialog is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/hanch/fal/lavender-data/packages/lavender-data-ui/src/app/datasets/[dataset_id]/add-shardset-dialog.tsx","AddShardsetDialog")},16159:(e,r,t)=>{e.exports=t(37043).Symbol},17215:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>A});var n=t(76939),s=t(87170),o=t.n(s),l=t(6761),a=t(26616),i=t.n(a),c=t(42067),d=t(62861);t(93294);var u=t(29298);function h({className:e,...r}){return(0,n.jsx)("nav",{role:"navigation","aria-label":"pagination","data-slot":"pagination",className:(0,u.cn)("mx-auto flex w-full justify-center",e),...r})}function p({className:e,...r}){return(0,n.jsx)("ul",{"data-slot":"pagination-content",className:(0,u.cn)("flex flex-row items-center gap-1",e),...r})}function f({...e}){return(0,n.jsx)("li",{"data-slot":"pagination-item",...e})}function x({className:e,isActive:r,size:t="icon",...s}){return(0,n.jsx)(o(),{"aria-current":r?"page":void 0,"data-slot":"pagination-link","data-active":r,className:(0,u.cn)((0,c.r)({variant:r?"outline":"ghost",size:t}),e),...s})}let m=(0,t(9564).A)("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);function v({centerButtonCount:e,totalPages:r,currentPage:t,pageHref:s}){let o=Math.max(0,Math.min(t-Math.floor(e/2),r-e)),l=Math.min(r,o+e),a=Array.from({length:l-o},(e,r)=>o+r);return(0,n.jsx)(h,{children:(0,n.jsxs)(p,{children:[o>0&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(f,{children:(0,n.jsx)(x,{href:s(0),children:"1"})}),(0,n.jsx)(f,{children:(0,n.jsx)(m,{className:"w-4"})})]}),a.map(e=>(0,n.jsx)(f,{children:(0,n.jsx)(x,{href:s(e),isActive:t===e,children:e+1})},e)),r>l&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(f,{children:(0,n.jsx)(m,{className:"w-4"})}),(0,n.jsx)(f,{children:(0,n.jsx)(x,{href:s(r-1),children:r})})]})]})})}var g=t(35848),j=t(15029),w=t(83203),b=t(67519),y=t(82688),S=t(65479),C=t(5654);function N({shardset:e}){return e?(0,n.jsxs)(o(),{href:`/datasets/${e.dataset_id}/shardsets/${e.id}`,children:[(0,n.jsx)("div",{className:"font-mono text-xs",children:e.id}),(0,n.jsx)("div",{className:"text-xs text-muted-foreground",children:e.location}),(0,n.jsxs)("div",{className:"text-xs text-muted-foreground",children:["total ",e.total_samples," samples, ",e.shard_count," shards"]})]}):(0,n.jsx)("div",{children:"-"})}async function T({dataset_id:e,preview_page:r}){let t=(await (await (0,g.K)()).GET("/datasets/{dataset_id}/preview",{params:{path:{dataset_id:e},query:{offset:Number(r)*_,limit:_}}})).data;if(!t)return(0,n.jsxs)("div",{className:"w-full flex flex-col gap-2",children:[(0,n.jsx)("div",{className:"text-lg",children:"Preview"}),(0,n.jsx)(b.ErrorCard,{error:"Preview is not available for this dataset."})]});let s=Math.ceil(t.total/_),o=Number(r);return(0,n.jsxs)("div",{className:"w-full flex flex-col gap-2",children:[(0,n.jsx)("div",{className:"text-lg",children:"Preview"}),(0,n.jsxs)(S.Zp,{className:"w-full",children:[(0,n.jsx)(S.Wu,{children:(0,n.jsxs)(d.XI,{children:[(0,n.jsx)(d.A0,{children:(0,n.jsx)(d.Hj,{children:t.columns.map(e=>(0,n.jsx)(d.nd,{children:e.name},e.id))})}),(0,n.jsx)(d.BF,{children:t.samples.map((e,r)=>(0,n.jsx)(d.Hj,{children:t.columns.map(r=>{let t;let s=e[r.name],o=null;return"object"==typeof s&&null!==s?t=JSON.stringify(s):"number"==typeof s?i()(s)?t=String(s):(t=s.toFixed(8),o=s.toFixed(2)):t=String(s),t.length>50&&(o=t.slice(0,50)+"..."),(0,n.jsx)(d.nA,{children:o?(0,n.jsxs)(y.Tooltip,{children:[(0,n.jsx)(y.TooltipTrigger,{asChild:!0,children:(0,n.jsx)("div",{children:o})}),(0,n.jsx)(y.TooltipContent,{className:"w-auto max-w-[500px] text-wrap break-all",children:t})]}):(0,n.jsx)("div",{children:t})},r.id)})},`preview-sample-${r}`))})]})}),(0,n.jsx)(S.wL,{className:"w-full flex justify-center",children:(0,n.jsx)(v,{centerButtonCount:5,totalPages:s,currentPage:o,pageHref:r=>`/datasets/${e}?preview_page=${r}`})})]})]})}let _=10;async function A({params:e,searchParams:r}){let{dataset_id:t}=await e,{preview_page:s=0}=await r,a=await (0,g.K)(),i=await a.GET("/datasets/{dataset_id}",{params:{path:{dataset_id:t}}}),u=await a.GET("/iterations/",{params:{query:{dataset_id:t}}});if(i.error)return(0,n.jsx)(b.ErrorCard,{error:i.error.detail});if(u.error)return(0,n.jsx)(b.ErrorCard,{error:u.error.detail});let h=i.data,p=u.data,f=h.columns.filter(e=>e.name!==h.uid_column_name).map((e,r)=>({...e,rowSpan:1})).sort((e,r)=>e.shardset_id.localeCompare(r.shardset_id)||e.name.localeCompare(r.name)),x=0;return f.forEach((e,r)=>{e.shardset_id!==f[x].shardset_id?x=r:(f[r].rowSpan=0,f[x].rowSpan++)}),(0,n.jsxs)("main",{className:"container flex w-full flex-1 flex-col items-center justify-center gap-8",children:[(0,n.jsx)(C.Qp,{className:"w-full pt-4",children:(0,n.jsxs)(C.AB,{children:[(0,n.jsx)(C.J5,{children:(0,n.jsx)(C.w1,{href:"/",children:"Home"})}),(0,n.jsx)(C.tH,{}),(0,n.jsx)(C.J5,{children:(0,n.jsx)(C.w1,{href:"/datasets",children:"Datasets"})}),(0,n.jsx)(C.tH,{}),(0,n.jsx)(C.J5,{children:(0,n.jsx)(C.tJ,{children:h.id})})]})}),(0,n.jsxs)("div",{className:"w-full flex flex-col gap-1",children:[(0,n.jsx)("div",{className:"text-lg",children:h.name}),(0,n.jsx)("div",{className:"text-xs text-muted-foreground",children:h.id})]}),(0,n.jsx)(T,{dataset_id:t,preview_page:s}),(0,n.jsxs)("div",{className:"w-full flex flex-col gap-2",children:[(0,n.jsx)("div",{className:"text-lg",children:"Shardsets and Columns"}),(0,n.jsx)(S.Zp,{className:"w-full",children:(0,n.jsx)(S.Wu,{children:(0,n.jsxs)(d.XI,{children:[(0,n.jsx)(d.A0,{children:(0,n.jsxs)(d.Hj,{children:[(0,n.jsx)(d.nd,{children:"Shardset"}),(0,n.jsx)(d.nd,{className:"w-[100px]",children:"Name"}),(0,n.jsx)(d.nd,{children:"Type"}),(0,n.jsx)(d.nd,{children:"Description"})]})}),(0,n.jsxs)(d.BF,{children:[(0,n.jsxs)(d.Hj,{children:[(0,n.jsx)(d.nA,{children:"-"}),(0,n.jsx)(d.nA,{className:"font-mono text-xs",children:h.uid_column_name}),(0,n.jsx)(d.nA,{children:"-"}),(0,n.jsx)(d.nA,{children:"Unique identifier for each sample"})]}),f.map(e=>(0,n.jsxs)(d.Hj,{children:[e.rowSpan>0&&(0,n.jsx)(d.nA,{rowSpan:e.rowSpan,children:(0,n.jsx)(N,{shardset:h.shardsets.find(r=>r.id===e.shardset_id)})}),(0,n.jsx)(d.nA,{className:"font-mono text-xs",children:e.name}),(0,n.jsx)(d.nA,{children:e.type}),(0,n.jsx)(d.nA,{children:e.description})]},e.id))]})]})})}),(0,n.jsx)("div",{className:"w-full flex justify-end",children:(0,n.jsx)(j.AddShardsetDialog,{datasetId:t,children:(0,n.jsxs)(c.$,{variant:"outline",children:[(0,n.jsx)(l.A,{}),"Shardset"]})})})]}),(0,n.jsxs)("div",{className:"w-full flex flex-col gap-2",children:[(0,n.jsx)("div",{className:"text-lg",children:"Iterations"}),(0,n.jsx)(S.Zp,{className:"w-full",children:(0,n.jsx)(S.Wu,{children:(0,n.jsxs)(d.XI,{children:[(0,n.jsx)(d.A0,{children:(0,n.jsxs)(d.Hj,{children:[(0,n.jsx)(d.nd,{children:"ID"}),(0,n.jsx)(d.nd,{children:"Total"}),(0,n.jsx)(d.nd,{children:"Config"}),(0,n.jsx)(d.nd,{children:"Created"})]})}),(0,n.jsx)(d.BF,{children:p.map(e=>(0,n.jsxs)(d.Hj,{children:[(0,n.jsx)(d.nA,{className:"font-mono text-xs",children:(0,n.jsx)(o(),{href:`/iterations/${e.id}`,children:e.id})}),(0,n.jsx)(d.nA,{children:(0,n.jsx)("div",{children:e.total})}),(0,n.jsxs)(d.nA,{className:"text-xs text-muted-foreground",children:[e.shuffle?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{children:["Shuffle seed: ",e.shuffle_seed]}),(0,n.jsxs)("div",{children:["Shuffle block size: ",e.shuffle_block_size]})]}):(0,n.jsx)("div",{children:"No shuffle"}),e.batch_size>0?(0,n.jsxs)("div",{children:["Batch size: ",e.batch_size]}):(0,n.jsx)("div",{children:"No batch"}),e.replication_pg?(0,n.jsx)("div",{children:(0,n.jsxs)("div",{children:[e.replication_pg.length," pgs,"," ",e.replication_pg.reduce((e,r)=>e+r.length,0)," ","ranks"]})}):(0,n.jsx)("div",{children:"No replication"})]}),(0,n.jsx)(d.nA,{children:(0,w.v)(e.created_at)})]},e.id))})]})})})]})]})}},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},20638:(e,r,t)=>{var n=t(67202),s=/^\s+/;e.exports=function(e){return e?e.slice(0,n(e)+1).replace(s,""):e}},21536:e=>{var r=Object.prototype.toString;e.exports=function(e){return r.call(e)}},21683:e=>{e.exports=function(e){var r=typeof e;return null!=e&&("object"==r||"function"==r)}},21932:(e,r,t)=>{var n=t(20638),s=t(21683),o=t(59824),l=0/0,a=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,c=/^0o[0-7]+$/i,d=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(o(e))return l;if(s(e)){var r="function"==typeof e.valueOf?e.valueOf():e;e=s(r)?r+"":r}if("string"!=typeof e)return 0===e?e:+e;e=n(e);var t=i.test(e);return t||c.test(e)?d(e.slice(2),t?2:8):a.test(e)?l:+e}},26616:(e,r,t)=>{var n=t(28231);e.exports=function(e){return"number"==typeof e&&e==n(e)}},28231:(e,r,t)=>{var n=t(96230);e.exports=function(e){var r=n(e),t=r%1;return r==r?t?r-t:r:0}},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},34520:(e,r,t)=>{Promise.resolve().then(t.t.bind(t,9452,23)),Promise.resolve().then(t.bind(t,71190)),Promise.resolve().then(t.bind(t,36493)),Promise.resolve().then(t.bind(t,55386))},37043:(e,r,t)=>{var n=t(58622),s="object"==typeof self&&self&&self.Object===Object&&self;e.exports=n||s||Function("return this")()},58622:e=>{e.exports="object"==typeof global&&global&&global.Object===Object&&global},58997:(e,r,t)=>{var n=t(16159),s=Object.prototype,o=s.hasOwnProperty,l=s.toString,a=n?n.toStringTag:void 0;e.exports=function(e){var r=o.call(e,a),t=e[a];try{e[a]=void 0;var n=!0}catch(e){}var s=l.call(e);return n&&(r?e[a]=t:delete e[a]),s}},59824:(e,r,t)=>{var n=t(96122),s=t(89624);e.exports=function(e){return"symbol"==typeof e||s(e)&&"[object Symbol]"==n(e)}},61641:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>l.a,__next_app__:()=>u,pages:()=>d,routeModule:()=>h,tree:()=>c});var n=t(14125),s=t(29466),o=t(63940),l=t.n(o),a=t(339),i={};for(let e in a)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>a[e]);t.d(r,i);let c={children:["",{children:["datasets",{children:["[dataset_id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,17215)),"/Users/hanch/fal/lavender-data/packages/lavender-data-ui/src/app/datasets/[dataset_id]/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,74723)),"/Users/hanch/fal/lavender-data/packages/lavender-data-ui/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,7376,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,97801,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,31318,23)),"next/dist/client/components/unauthorized-error"]}]}.children,d=["/Users/hanch/fal/lavender-data/packages/lavender-data-ui/src/app/datasets/[dataset_id]/page.tsx"],u={require:t,loadChunk:()=>Promise.resolve()},h=new n.AppPageRouteModule({definition:{kind:s.RouteKind.APP_PAGE,page:"/datasets/[dataset_id]/page",pathname:"/datasets/[dataset_id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},67202:e=>{var r=/\s/;e.exports=function(e){for(var t=e.length;t--&&r.test(e.charAt(t)););return t}},71190:(e,r,t)=>{"use strict";t.d(r,{AddShardsetDialog:()=>eu});var n=t(59777),s=t(98580),o=t(84206);let l=(0,o.A)("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),a=(0,o.A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);var i=t(96114),c=t(87813),d=t(23979),u=t(35378),h=t(3205),p=t(74127),f=t(22532),x=s.createContext(void 0),m=t(16002),v=t(76632),g="ScrollArea",[j,w]=(0,h.A)(g),[b,y]=j(g),S=s.forwardRef((e,r)=>{let{__scopeScrollArea:t,type:o="hover",dir:l,scrollHideDelay:a=600,...i}=e,[c,u]=s.useState(null),[h,f]=s.useState(null),[m,v]=s.useState(null),[g,j]=s.useState(null),[w,y]=s.useState(null),[S,C]=s.useState(0),[N,T]=s.useState(0),[_,A]=s.useState(!1),[E,P]=s.useState(!1),R=(0,p.s)(r,e=>u(e)),k=function(e){let r=s.useContext(x);return e||r||"ltr"}(l);return(0,n.jsx)(b,{scope:t,type:o,dir:k,scrollHideDelay:a,scrollArea:c,viewport:h,onViewportChange:f,content:m,onContentChange:v,scrollbarX:g,onScrollbarXChange:j,scrollbarXEnabled:_,onScrollbarXEnabledChange:A,scrollbarY:w,onScrollbarYChange:y,scrollbarYEnabled:E,onScrollbarYEnabledChange:P,onCornerWidthChange:C,onCornerHeightChange:T,children:(0,n.jsx)(d.sG.div,{dir:k,...i,ref:R,style:{position:"relative","--radix-scroll-area-corner-width":S+"px","--radix-scroll-area-corner-height":N+"px",...e.style}})})});S.displayName=g;var C="ScrollAreaViewport",N=s.forwardRef((e,r)=>{let{__scopeScrollArea:t,children:o,nonce:l,...a}=e,i=y(C,t),c=s.useRef(null),u=(0,p.s)(r,c,i.onViewportChange);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:l}),(0,n.jsx)(d.sG.div,{"data-radix-scroll-area-viewport":"",...a,ref:u,style:{overflowX:i.scrollbarXEnabled?"scroll":"hidden",overflowY:i.scrollbarYEnabled?"scroll":"hidden",...e.style},children:(0,n.jsx)("div",{ref:i.onContentChange,style:{minWidth:"100%",display:"table"},children:o})})]})});N.displayName=C;var T="ScrollAreaScrollbar",_=s.forwardRef((e,r)=>{let{forceMount:t,...o}=e,l=y(T,e.__scopeScrollArea),{onScrollbarXEnabledChange:a,onScrollbarYEnabledChange:i}=l,c="horizontal"===e.orientation;return s.useEffect(()=>(c?a(!0):i(!0),()=>{c?a(!1):i(!1)}),[c,a,i]),"hover"===l.type?(0,n.jsx)(A,{...o,ref:r,forceMount:t}):"scroll"===l.type?(0,n.jsx)(E,{...o,ref:r,forceMount:t}):"auto"===l.type?(0,n.jsx)(P,{...o,ref:r,forceMount:t}):"always"===l.type?(0,n.jsx)(R,{...o,ref:r}):null});_.displayName=T;var A=s.forwardRef((e,r)=>{let{forceMount:t,...o}=e,l=y(T,e.__scopeScrollArea),[a,i]=s.useState(!1);return s.useEffect(()=>{let e=l.scrollArea,r=0;if(e){let t=()=>{window.clearTimeout(r),i(!0)},n=()=>{r=window.setTimeout(()=>i(!1),l.scrollHideDelay)};return e.addEventListener("pointerenter",t),e.addEventListener("pointerleave",n),()=>{window.clearTimeout(r),e.removeEventListener("pointerenter",t),e.removeEventListener("pointerleave",n)}}},[l.scrollArea,l.scrollHideDelay]),(0,n.jsx)(u.C,{present:t||a,children:(0,n.jsx)(P,{"data-state":a?"visible":"hidden",...o,ref:r})})}),E=s.forwardRef((e,r)=>{var t;let{forceMount:o,...l}=e,a=y(T,e.__scopeScrollArea),i="horizontal"===e.orientation,c=Y(()=>h("SCROLL_END"),100),[d,h]=(t={hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}},s.useReducer((e,r)=>t[e][r]??e,"hidden"));return s.useEffect(()=>{if("idle"===d){let e=window.setTimeout(()=>h("HIDE"),a.scrollHideDelay);return()=>window.clearTimeout(e)}},[d,a.scrollHideDelay,h]),s.useEffect(()=>{let e=a.viewport,r=i?"scrollLeft":"scrollTop";if(e){let t=e[r],n=()=>{let n=e[r];t!==n&&(h("SCROLL"),c()),t=n};return e.addEventListener("scroll",n),()=>e.removeEventListener("scroll",n)}},[a.viewport,i,h,c]),(0,n.jsx)(u.C,{present:o||"hidden"!==d,children:(0,n.jsx)(R,{"data-state":"hidden"===d?"hidden":"visible",...l,ref:r,onPointerEnter:(0,v.m)(e.onPointerEnter,()=>h("POINTER_ENTER")),onPointerLeave:(0,v.m)(e.onPointerLeave,()=>h("POINTER_LEAVE"))})})}),P=s.forwardRef((e,r)=>{let t=y(T,e.__scopeScrollArea),{forceMount:o,...l}=e,[a,i]=s.useState(!1),c="horizontal"===e.orientation,d=Y(()=>{if(t.viewport){let e=t.viewport.offsetWidth<t.viewport.scrollWidth,r=t.viewport.offsetHeight<t.viewport.scrollHeight;i(c?e:r)}},10);return V(t.viewport,d),V(t.content,d),(0,n.jsx)(u.C,{present:o||a,children:(0,n.jsx)(R,{"data-state":a?"visible":"hidden",...l,ref:r})})}),R=s.forwardRef((e,r)=>{let{orientation:t="vertical",...o}=e,l=y(T,e.__scopeScrollArea),a=s.useRef(null),i=s.useRef(0),[c,d]=s.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=$(c.viewport,c.content),h={...o,sizes:c,onSizesChange:d,hasThumb:!!(u>0&&u<1),onThumbChange:e=>a.current=e,onThumbPointerUp:()=>i.current=0,onThumbPointerDown:e=>i.current=e};function p(e,r){return function(e,r,t,n="ltr"){let s=X(t),o=r||s/2,l=t.scrollbar.paddingStart+o,a=t.scrollbar.size-t.scrollbar.paddingEnd-(s-o),i=t.content-t.viewport;return J([l,a],"ltr"===n?[0,i]:[-1*i,0])(e)}(e,i.current,c,r)}return"horizontal"===t?(0,n.jsx)(k,{...h,ref:r,onThumbPositionChange:()=>{if(l.viewport&&a.current){let e=G(l.viewport.scrollLeft,c,l.dir);a.current.style.transform=`translate3d(${e}px, 0, 0)`}},onWheelScroll:e=>{l.viewport&&(l.viewport.scrollLeft=e)},onDragScroll:e=>{l.viewport&&(l.viewport.scrollLeft=p(e,l.dir))}}):"vertical"===t?(0,n.jsx)(L,{...h,ref:r,onThumbPositionChange:()=>{if(l.viewport&&a.current){let e=G(l.viewport.scrollTop,c);a.current.style.transform=`translate3d(0, ${e}px, 0)`}},onWheelScroll:e=>{l.viewport&&(l.viewport.scrollTop=e)},onDragScroll:e=>{l.viewport&&(l.viewport.scrollTop=p(e))}}):null}),k=s.forwardRef((e,r)=>{let{sizes:t,onSizesChange:o,...l}=e,a=y(T,e.__scopeScrollArea),[i,c]=s.useState(),d=s.useRef(null),u=(0,p.s)(r,d,a.onScrollbarXChange);return s.useEffect(()=>{d.current&&c(getComputedStyle(d.current))},[d]),(0,n.jsx)(I,{"data-orientation":"horizontal",...l,ref:u,sizes:t,style:{bottom:0,left:"rtl"===a.dir?"var(--radix-scroll-area-corner-width)":0,right:"ltr"===a.dir?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":X(t)+"px",...e.style},onThumbPointerDown:r=>e.onThumbPointerDown(r.x),onDragScroll:r=>e.onDragScroll(r.x),onWheelScroll:(r,t)=>{if(a.viewport){let n=a.viewport.scrollLeft+r.deltaX;e.onWheelScroll(n),function(e,r){return e>0&&e<r}(n,t)&&r.preventDefault()}},onResize:()=>{d.current&&a.viewport&&i&&o({content:a.viewport.scrollWidth,viewport:a.viewport.offsetWidth,scrollbar:{size:d.current.clientWidth,paddingStart:q(i.paddingLeft),paddingEnd:q(i.paddingRight)}})}})}),L=s.forwardRef((e,r)=>{let{sizes:t,onSizesChange:o,...l}=e,a=y(T,e.__scopeScrollArea),[i,c]=s.useState(),d=s.useRef(null),u=(0,p.s)(r,d,a.onScrollbarYChange);return s.useEffect(()=>{d.current&&c(getComputedStyle(d.current))},[d]),(0,n.jsx)(I,{"data-orientation":"vertical",...l,ref:u,sizes:t,style:{top:0,right:"ltr"===a.dir?0:void 0,left:"rtl"===a.dir?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":X(t)+"px",...e.style},onThumbPointerDown:r=>e.onThumbPointerDown(r.y),onDragScroll:r=>e.onDragScroll(r.y),onWheelScroll:(r,t)=>{if(a.viewport){let n=a.viewport.scrollTop+r.deltaY;e.onWheelScroll(n),function(e,r){return e>0&&e<r}(n,t)&&r.preventDefault()}},onResize:()=>{d.current&&a.viewport&&i&&o({content:a.viewport.scrollHeight,viewport:a.viewport.offsetHeight,scrollbar:{size:d.current.clientHeight,paddingStart:q(i.paddingTop),paddingEnd:q(i.paddingBottom)}})}})}),[D,O]=j(T),I=s.forwardRef((e,r)=>{let{__scopeScrollArea:t,sizes:o,hasThumb:l,onThumbChange:a,onThumbPointerUp:i,onThumbPointerDown:c,onThumbPositionChange:u,onDragScroll:h,onWheelScroll:x,onResize:m,...g}=e,j=y(T,t),[w,b]=s.useState(null),S=(0,p.s)(r,e=>b(e)),C=s.useRef(null),N=s.useRef(""),_=j.viewport,A=o.content-o.viewport,E=(0,f.c)(x),P=(0,f.c)(u),R=Y(m,10);function k(e){C.current&&h({x:e.clientX-C.current.left,y:e.clientY-C.current.top})}return s.useEffect(()=>{let e=e=>{let r=e.target;w?.contains(r)&&E(e,A)};return document.addEventListener("wheel",e,{passive:!1}),()=>document.removeEventListener("wheel",e,{passive:!1})},[_,w,A,E]),s.useEffect(P,[o,P]),V(w,R),V(j.content,R),(0,n.jsx)(D,{scope:t,scrollbar:w,hasThumb:l,onThumbChange:(0,f.c)(a),onThumbPointerUp:(0,f.c)(i),onThumbPositionChange:P,onThumbPointerDown:(0,f.c)(c),children:(0,n.jsx)(d.sG.div,{...g,ref:S,style:{position:"absolute",...g.style},onPointerDown:(0,v.m)(e.onPointerDown,e=>{0===e.button&&(e.target.setPointerCapture(e.pointerId),C.current=w.getBoundingClientRect(),N.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",j.viewport&&(j.viewport.style.scrollBehavior="auto"),k(e))}),onPointerMove:(0,v.m)(e.onPointerMove,k),onPointerUp:(0,v.m)(e.onPointerUp,e=>{let r=e.target;r.hasPointerCapture(e.pointerId)&&r.releasePointerCapture(e.pointerId),document.body.style.webkitUserSelect=N.current,j.viewport&&(j.viewport.style.scrollBehavior=""),C.current=null})})})}),z="ScrollAreaThumb",H=s.forwardRef((e,r)=>{let{forceMount:t,...s}=e,o=O(z,e.__scopeScrollArea);return(0,n.jsx)(u.C,{present:t||o.hasThumb,children:(0,n.jsx)(U,{ref:r,...s})})}),U=s.forwardRef((e,r)=>{let{__scopeScrollArea:t,style:o,...l}=e,a=y(z,t),i=O(z,t),{onThumbPositionChange:c}=i,u=(0,p.s)(r,e=>i.onThumbChange(e)),h=s.useRef(void 0),f=Y(()=>{h.current&&(h.current(),h.current=void 0)},100);return s.useEffect(()=>{let e=a.viewport;if(e){let r=()=>{f(),h.current||(h.current=B(e,c),c())};return c(),e.addEventListener("scroll",r),()=>e.removeEventListener("scroll",r)}},[a.viewport,f,c]),(0,n.jsx)(d.sG.div,{"data-state":i.hasThumb?"visible":"hidden",...l,ref:u,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...o},onPointerDownCapture:(0,v.m)(e.onPointerDownCapture,e=>{let r=e.target.getBoundingClientRect(),t=e.clientX-r.left,n=e.clientY-r.top;i.onThumbPointerDown({x:t,y:n})}),onPointerUp:(0,v.m)(e.onPointerUp,i.onThumbPointerUp)})});H.displayName=z;var F="ScrollAreaCorner",M=s.forwardRef((e,r)=>{let t=y(F,e.__scopeScrollArea),s=!!(t.scrollbarX&&t.scrollbarY);return"scroll"!==t.type&&s?(0,n.jsx)(W,{...e,ref:r}):null});M.displayName=F;var W=s.forwardRef((e,r)=>{let{__scopeScrollArea:t,...o}=e,l=y(F,t),[a,i]=s.useState(0),[c,u]=s.useState(0),h=!!(a&&c);return V(l.scrollbarX,()=>{let e=l.scrollbarX?.offsetHeight||0;l.onCornerHeightChange(e),u(e)}),V(l.scrollbarY,()=>{let e=l.scrollbarY?.offsetWidth||0;l.onCornerWidthChange(e),i(e)}),h?(0,n.jsx)(d.sG.div,{...o,ref:r,style:{width:a,height:c,position:"absolute",right:"ltr"===l.dir?0:void 0,left:"rtl"===l.dir?0:void 0,bottom:0,...e.style}}):null});function q(e){return e?parseInt(e,10):0}function $(e,r){let t=e/r;return isNaN(t)?0:t}function X(e){let r=$(e.viewport,e.content),t=e.scrollbar.paddingStart+e.scrollbar.paddingEnd;return Math.max((e.scrollbar.size-t)*r,18)}function G(e,r,t="ltr"){let n=X(r),s=r.scrollbar.paddingStart+r.scrollbar.paddingEnd,o=r.scrollbar.size-s,l=r.content-r.viewport,a=function(e,[r,t]){return Math.min(t,Math.max(r,e))}(e,"ltr"===t?[0,l]:[-1*l,0]);return J([0,l],[0,o-n])(a)}function J(e,r){return t=>{if(e[0]===e[1]||r[0]===r[1])return r[0];let n=(r[1]-r[0])/(e[1]-e[0]);return r[0]+n*(t-e[0])}}var B=(e,r=()=>{})=>{let t={left:e.scrollLeft,top:e.scrollTop},n=0;return function s(){let o={left:e.scrollLeft,top:e.scrollTop},l=t.left!==o.left,a=t.top!==o.top;(l||a)&&r(),t=o,n=window.requestAnimationFrame(s)}(),()=>window.cancelAnimationFrame(n)};function Y(e,r){let t=(0,f.c)(e),n=s.useRef(0);return s.useEffect(()=>()=>window.clearTimeout(n.current),[]),s.useCallback(()=>{window.clearTimeout(n.current),n.current=window.setTimeout(t,r)},[t,r])}function V(e,r){let t=(0,f.c)(r);(0,m.N)(()=>{let r=0;if(e){let n=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(t)});return n.observe(e),()=>{window.cancelAnimationFrame(r),n.unobserve(e)}}},[e,t])}var K=t(53028);function Z({className:e,children:r,...t}){return(0,n.jsxs)(S,{"data-slot":"scroll-area",className:(0,K.cn)("relative",e),...t,children:[(0,n.jsx)(N,{"data-slot":"scroll-area-viewport",className:"ring-ring/10 dark:ring-ring/20 dark:outline-ring/40 outline-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] focus-visible:ring-4 focus-visible:outline-1",children:r}),(0,n.jsx)(Q,{}),(0,n.jsx)(M,{})]})}function Q({className:e,orientation:r="vertical",...t}){return(0,n.jsx)(_,{"data-slot":"scroll-area-scrollbar",orientation:r,className:(0,K.cn)("flex touch-none p-px transition-colors select-none","vertical"===r&&"h-full w-2.5 border-l border-l-transparent","horizontal"===r&&"h-2.5 flex-col border-t border-t-transparent",e),...t,children:(0,n.jsx)(H,{"data-slot":"scroll-area-thumb",className:"bg-border relative flex-1 rounded-full"})})}var ee=t(68390),er=t(32171),et=t(16887),en=t(20459),es=t(70116),eo=t(55386);let el=({icon:e,content:r})=>(0,n.jsxs)(eo.Tooltip,{children:[(0,n.jsx)(eo.TooltipTrigger,{asChild:!0,children:e}),(0,n.jsx)(eo.TooltipContent,{children:r})]});var ea=t(40605);let ei=(0,ea.createServerReference)("60fa3c5f66f65ee78333f286699cda2798e6c97d0c",ea.callServer,void 0,ea.findSourceMapURL,"createShardset");function ec(){let{pending:e}=(0,c.useFormStatus)();return(0,n.jsx)(er.$,{type:"submit",disabled:e,children:e?"Saving...":"Save"})}function ed({index:e,columns:r,setColumns:t}){return(0,n.jsx)("div",{className:"my-4",children:(0,n.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,n.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,n.jsx)(es.J,{htmlFor:"column-name-"+e,children:"Name"}),(0,n.jsx)(en.p,{id:"column-name-"+e,className:"col-span-3",placeholder:"caption",required:!0,value:r[e].name,onChange:n=>t(r.map((r,t)=>t===e?{...r,name:n.target.value}:r))})]}),(0,n.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,n.jsx)(es.J,{htmlFor:"column-type-"+e,children:"Type"}),(0,n.jsx)(en.p,{id:"column-type-"+e,className:"col-span-3",placeholder:"text",required:!0,value:r[e].type,onChange:n=>t(r.map((r,t)=>t===e?{...r,type:n.target.value}:r))})]}),(0,n.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,n.jsxs)(es.J,{className:"flex flex-col items-start gap-0",htmlFor:"column-description-"+e,children:[(0,n.jsx)("div",{children:"Description"}),(0,n.jsx)("div",{className:"text-xs text-muted-foreground",children:"(Optional)"})]}),(0,n.jsx)(en.p,{id:"column-description-"+e,className:"col-span-3",placeholder:"A caption for the image",value:r[e].description??"",onChange:n=>t(r.map((r,t)=>t===e?{...r,description:n.target.value}:r))})]})]})})}function eu({datasetId:e,children:r}){let[t,o]=(0,s.useState)(""),[c,d]=(0,s.useState)([]),[u,h]=(0,s.useState)(!1),p=(0,s.useRef)(null),f=async r=>{r.set("columnsJson",JSON.stringify(c));let t=await ei(e,r);t.success?(i.oR.success("Shardset added successfully"),h(!1),o(""),d([]),p.current?.reset()):i.oR.error(`Failed to add shardset: ${t.error}`)};return(0,n.jsxs)(et.lG,{open:u,onOpenChange:h,children:[(0,n.jsx)(et.zM,{asChild:!0,children:r}),(0,n.jsxs)(et.Cf,{className:"sm:max-w-[425px]",children:[(0,n.jsxs)(et.c7,{children:[(0,n.jsx)(et.L3,{children:"New shardset"}),(0,n.jsx)(et.rr,{children:"Add a new shardset with columns to the dataset."})]}),(0,n.jsxs)("form",{ref:p,action:f,children:[(0,n.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,n.jsx)("div",{className:"text-lg mt-2",children:"Shardset"}),(0,n.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,n.jsx)(es.J,{htmlFor:"location",className:"text-right",children:"Location"}),(0,n.jsx)(en.p,{id:"location",name:"location",className:"col-span-3",placeholder:"s3://bucket/path/to/shardset/",required:!0,value:t,onChange:e=>o(e.target.value)})]}),(0,n.jsxs)("div",{className:"text-lg mt-2 flex gap-2 items-center",children:[(0,n.jsx)("div",{children:"Columns"}),(0,n.jsx)(el,{icon:(0,n.jsx)(l,{className:"w-4 h-4"}),content:(0,n.jsxs)("p",{children:["If you have at least one shard in the location, the columns will be inferred from the shard. ",(0,n.jsx)("br",{}),"Please specify columns if you want to override them or if you don't have any shards yet."]})})]}),(0,n.jsx)(Z,{className:"max-h-[200px]",children:c.map((e,r)=>(0,n.jsxs)("div",{children:[(0,n.jsx)(ed,{index:r,columns:c,setColumns:d}),(0,n.jsx)(ee.w,{className:"my-2"})]},r))}),(0,n.jsxs)(er.$,{type:"button",variant:"outline",onClick:()=>d([...c,{name:"",type:""}]),children:[(0,n.jsx)(a,{}),"Add Column"]})]}),(0,n.jsx)(et.Es,{children:(0,n.jsx)(ec,{})})]})]})]})}},82688:(e,r,t)=>{"use strict";t.d(r,{Tooltip:()=>s,TooltipContent:()=>l,TooltipTrigger:()=>o});var n=t(18445);let s=(0,n.registerClientReference)(function(){throw Error("Attempted to call Tooltip() from the server but Tooltip is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/hanch/fal/lavender-data/packages/lavender-data-ui/src/components/ui/tooltip.tsx","Tooltip"),o=(0,n.registerClientReference)(function(){throw Error("Attempted to call TooltipTrigger() from the server but TooltipTrigger is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/hanch/fal/lavender-data/packages/lavender-data-ui/src/components/ui/tooltip.tsx","TooltipTrigger"),l=(0,n.registerClientReference)(function(){throw Error("Attempted to call TooltipContent() from the server but TooltipContent is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/hanch/fal/lavender-data/packages/lavender-data-ui/src/components/ui/tooltip.tsx","TooltipContent");(0,n.registerClientReference)(function(){throw Error("Attempted to call TooltipProvider() from the server but TooltipProvider is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/hanch/fal/lavender-data/packages/lavender-data-ui/src/components/ui/tooltip.tsx","TooltipProvider")},89624:e=>{e.exports=function(e){return null!=e&&"object"==typeof e}},96122:(e,r,t)=>{var n=t(16159),s=t(58997),o=t(21536),l=n?n.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":l&&l in Object(e)?s(e):o(e)}},96230:(e,r,t)=>{var n=t(21932),s=1/0;e.exports=function(e){return e?(e=n(e))===s||e===-s?(e<0?-1:1)*17976931348623157e292:e==e?e:0:0===e?e:0}},99672:(e,r,t)=>{Promise.resolve().then(t.t.bind(t,87170,23)),Promise.resolve().then(t.bind(t,15029)),Promise.resolve().then(t.bind(t,67519)),Promise.resolve().then(t.bind(t,82688))}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),n=r.X(0,[232,732,745,283,111,806,719,593],()=>t(61641));module.exports=n})();