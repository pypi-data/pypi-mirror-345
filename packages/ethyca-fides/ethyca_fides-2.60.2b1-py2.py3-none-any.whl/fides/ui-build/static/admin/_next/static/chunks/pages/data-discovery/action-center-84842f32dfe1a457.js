(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8443],{74833:function(t,e,n){var i=n(56127),r=/^\s+/;t.exports=function(t){return t?t.slice(0,i(t)+1).replace(r,""):t}},56127:function(t){var e=/\s/;t.exports=function(t){for(var n=t.length;n--&&e.test(t.charAt(n)););return n}},66726:function(t,e,n){var i=n(11611),r=n(82846),s=n(91936),o=Math.max,a=Math.min;t.exports=function(t,e,n){var u,l,c,d,p,g,f=0,m=!1,v=!1,y=!0;if("function"!=typeof t)throw TypeError("Expected a function");function h(e){var n=u,i=l;return u=l=void 0,f=e,d=t.apply(i,n)}function x(t){var n=t-g,i=t-f;return void 0===g||n>=e||n<0||v&&i>=c}function j(){var t,n,i,s=r();if(x(s))return _(s);p=setTimeout(j,(t=s-g,n=s-f,i=e-t,v?a(i,c-n):i))}function _(t){return(p=void 0,y&&u)?h(t):(u=l=void 0,d)}function b(){var t,n=r(),i=x(n);if(u=arguments,l=this,g=n,i){if(void 0===p)return f=t=g,p=setTimeout(j,e),m?h(t):d;if(v)return clearTimeout(p),p=setTimeout(j,e),h(g)}return void 0===p&&(p=setTimeout(j,e)),d}return e=s(e)||0,i(n)&&(m=!!n.leading,c=(v="maxWait"in n)?o(s(n.maxWait)||0,e):c,y="trailing"in n?!!n.trailing:y),b.cancel=function(){void 0!==p&&clearTimeout(p),f=0,u=g=l=p=void 0},b.flush=function(){return void 0===p?d:_(r())},b}},11611:function(t){t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},55193:function(t,e,n){var i=n(99736),r=n(92360);t.exports=function(t){return"symbol"==typeof t||r(t)&&"[object Symbol]"==i(t)}},82846:function(t,e,n){var i=n(77400);t.exports=function(){return i.Date.now()}},91936:function(t,e,n){var i=n(74833),r=n(11611),s=n(55193),o=0/0,a=/^[-+]0x[0-9a-f]+$/i,u=/^0b[01]+$/i,l=/^0o[0-7]+$/i,c=parseInt;t.exports=function(t){if("number"==typeof t)return t;if(s(t))return o;if(r(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=r(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=i(t);var n=u.test(t);return n||l.test(t)?c(t.slice(2),n?2:8):a.test(t)?o:+t}},40741:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/data-discovery/action-center",function(){return n(51500)}])},30952:function(t,e,n){"use strict";n.d(e,{f:function(){return u}});var i=n(24246),r=n(66726),s=n.n(r),o=n(27378),a=n(26917);let u=t=>{let{value:e,onChange:n,placeholder:r,...u}=t,[l,c]=(0,o.useState)(e),d=s()(n,500),p=(0,o.useCallback)(t=>{c(t),d(t)},[]);return(0,i.jsx)(a.Z,{value:l,onChange:p,onClear:()=>{c(""),n("")},placeholder:r,...u})}},77213:function(t,e,n){"use strict";n.d(e,{Z:function(){return p}});var i=n(24246),r=n(91942),s=n(88038),o=n.n(s),a=n(86677);n(27378);var u=n(25980),l=n(90867),c=n(77830),d=()=>{let t=(0,a.useRouter)();return(0,i.jsx)(r.xuv,{bg:"gray.50",border:"1px solid",borderColor:"blue.400",borderRadius:"md",justifyContent:"space-between",p:5,mb:5,mt:5,children:(0,i.jsxs)(r.xuv,{children:[(0,i.jsxs)(r.Kqy,{direction:{base:"column",sm:"row"},justifyContent:"space-between",children:[(0,i.jsx)(r.xvT,{fontWeight:"semibold",children:"Configure your storage and messaging provider"}),(0,i.jsx)(r.wpx,{onClick:()=>{t.push(c.fz)},children:"Configure"})]}),(0,i.jsxs)(r.xvT,{children:["Before Fides can process your privacy requests we need two simple steps to configure your storage and email client."," "]})]})})},p=t=>{let{children:e,title:n,padded:s=!0,mainProps:c}=t,p=(0,u.hz)(),g=(0,a.useRouter)(),f="/privacy-requests"===g.pathname||"/datastore-connection"===g.pathname,m=!(p.flags.privacyRequestsConfiguration&&f),{data:v}=(0,l.JE)(void 0,{skip:m}),{data:y}=(0,l.PW)(void 0,{skip:m}),h=p.flags.privacyRequestsConfiguration&&(!v||!y)&&f;return(0,i.jsxs)(r.kCb,{"data-testid":n,direction:"column",h:"100vh",children:[(0,i.jsxs)(o(),{children:[(0,i.jsxs)("title",{children:["Fides Admin UI - ",n]}),(0,i.jsx)("meta",{name:"description",content:"Privacy Engineering Platform"}),(0,i.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,i.jsxs)(r.kCb,{as:"main",direction:"column",py:s?6:0,px:s?10:0,h:s?"calc(100% - 48px)":"full",flex:1,minWidth:0,overflow:"auto",...c,children:[h?(0,i.jsx)(d,{}):null,e]})]})}},58754:function(t,e,n){"use strict";var i=n(24246),r=n(91942),s=n(70788);e.Z=t=>{let{heading:e,breadcrumbItems:n,isSticky:o=!0,children:a,rightContent:u,style:l,...c}=t;return(0,i.jsxs)("div",{...c,style:o?{position:"sticky",top:"-24px",paddingTop:"24px",paddingBottom:"24px",paddingLeft:"40px",marginLeft:"-40px",paddingRight:"40px",marginRight:"-40px",marginTop:"-24px",left:0,zIndex:20,backgroundColor:"white",...l}:{paddingBottom:"24px",...l},children:[(0,i.jsxs)(r.jqI,{justify:"space-between",children:["string"==typeof e?(0,i.jsx)(r.lQT,{className:n||a?"pb-4":void 0,level:1,"data-testid":"page-heading",children:e}):e,u&&(0,i.jsx)("div",{"data-testid":"page-header-right-content",children:u})]}),!!n&&(0,i.jsx)(s.m,{className:a?"pb-4":void 0,items:n,"data-testid":"page-breadcrumb"}),a]})}},70788:function(t,e,n){"use strict";n.d(e,{m:function(){return l}});var i=n(24246),r=n(91942),s=n(79894),o=n.n(s),a=n(27378);let{Text:u}=r.AntTypography,l=t=>{let{items:e,...n}=t,s=(0,a.useMemo)(()=>null==e?void 0:e.map((t,n)=>{let s=n===e.length-1,a={...t},l=a.onClick&&!a.href;return("string"==typeof a.title&&(a.title=(0,i.jsx)(u,{style:{color:"inherit",maxWidth:s?void 0:400},ellipsis:!s,children:a.title})),l)?a.title=(0,i.jsx)(r.wpx,{type:"text",size:"small",icon:a.icon,onClick:a.onClick,className:"ant-breadcrumb-link -mt-px px-1 text-inherit",children:a.title}):(a.icon&&(a.title=(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("span",{className:"anticon align-text-bottom",children:a.icon}),a.title]})),a.href&&a.title&&(a.title=(0,i.jsx)(o(),{href:a.href,className:"ant-breadcrumb-link",children:a.title}),delete a.href)),a}),[e]);return(0,i.jsx)(r.zrq,{items:s,...n})}},7426:function(t,e,n){"use strict";n.d(e,{D2:function(){return p},L:function(){return a},U7:function(){return l},Yh:function(){return f},ak:function(){return u},iR:function(){return v},km:function(){return o},tB:function(){return s}});var i=n(3228);let r=n(78780).u.injectEndpoints({endpoints:t=>({getConfigurationSettings:t.query({query:t=>{let{api_set:e}=t;return{url:"/config",method:"GET",params:{api_set:e}}},providesTags:["Configuration Settings"]}),putConfigurationSettings:t.mutation({query:t=>({url:"/config",method:"PUT",body:t}),invalidatesTags:["Configuration Settings"]}),patchConfigurationSettings:t.mutation({query:t=>({url:"/config",method:"PATCH",body:t}),invalidatesTags:["Configuration Settings","Privacy Notices"]})})}),{useGetConfigurationSettingsQuery:s,usePutConfigurationSettingsMutation:o,usePatchConfigurationSettingsMutation:a}=r,u=(0,i.P1)([t=>t,r.endpoints.getConfigurationSettings.select({api_set:!0}),r.endpoints.getConfigurationSettings.select({api_set:!1})],(t,e,n)=>{var i,r,s;let{data:o}=e,{data:a}=n;return{configSet:{cors_origins:(null==a?void 0:null===(i=a.security)||void 0===i?void 0:i.cors_origins)||[],cors_origin_regex:null==a?void 0:null===(r=a.security)||void 0===r?void 0:r.cors_origin_regex},apiSet:{cors_origins:(null==o?void 0:null===(s=o.security)||void 0===s?void 0:s.cors_origins)||[]}}}),l=()=>(0,i.P1)([t=>t,r.endpoints.getConfigurationSettings.select({api_set:!0})],(t,e)=>{let{data:n}=e;return n}),c={enabled:!1,cmp_api_required:!1},d=(t,e,n,i)=>{let r=n&&n[t],s=i&&i[t];return r&&s?{...i[t],...n[t]}:s?i[t]:r?{...n[t]}:e},p=(0,i.P1)([t=>t,r.endpoints.getConfigurationSettings.select({api_set:!0}),r.endpoints.getConfigurationSettings.select({api_set:!1})],(t,e,n)=>{let{data:i}=e,{data:r}=n;return d("gpp",c,i,r)}),g={tcf_publisher_country_code:null},f=(0,i.P1)([t=>t,r.endpoints.getConfigurationSettings.select({api_set:!0}),r.endpoints.getConfigurationSettings.select({api_set:!1})],(t,e,n)=>{let{data:i}=e,{data:r}=n;return d("plus_consent_settings",g,i,r)}),m={allow_username_password_login:!1},v=(0,i.P1)([t=>t,r.endpoints.getConfigurationSettings.select({api_set:!0}),r.endpoints.getConfigurationSettings.select({api_set:!1})],(t,e,n)=>{let{data:i}=e,{data:r}=n;return d("plus_security_settings",m,i,r)})},37059:function(t,e,n){"use strict";n.d(e,{Ak:function(){return m},EY:function(){return d},Tj:function(){return g},Ud:function(){return o},Vr:function(){return v},WJ:function(){return u},nP:function(){return c},nS:function(){return p},rs:function(){return l},sX:function(){return f},wi:function(){return a}});var i=n(78780),r=n(16394),s=n(16643);let{useGetAggregateMonitorResultsQuery:o,useGetDiscoveredSystemAggregateQuery:a,useGetDiscoveredAssetsQuery:u,useAddMonitorResultSystemsMutation:l,useIgnoreMonitorResultSystemsMutation:c,useAddMonitorResultAssetsMutation:d,useIgnoreMonitorResultAssetsMutation:p,useRestoreMonitorResultAssetsMutation:g,useUpdateAssetsSystemMutation:f,useUpdateAssetsDataUseMutation:m,useUpdateAssetsMutation:v}=i.u.injectEndpoints({endpoints:t=>({getAggregateMonitorResults:t.query({query:t=>{let{page:e=1,size:n=20,search:i}=t;return{url:"/plus/discovery-monitor/aggregate-results",params:{page:e,size:n,search:i,diff_status:"addition"}}},providesTags:["Discovery Monitor Results"]}),getDiscoveredSystemAggregate:t.query({query:t=>{let{key:e,page:n=1,size:i=20,search:r,diff_status:s}=t;return{url:"/plus/discovery-monitor/system-aggregate-results",params:{monitor_config_id:e,page:n,size:i,search:r,diff_status:s}}},providesTags:["Discovery Monitor Results"]}),getDiscoveredAssets:t.query({query:t=>{let{key:e,system:n,page:i=1,size:r=20,search:s,diff_status:o}=t;return{url:"/plus/discovery-monitor/".concat(e,"/results"),params:{resolved_system_id:n,page:i,size:r,search:s,diff_status:o,sort_by:"urn"}}},providesTags:()=>["Discovery Monitor Results"]}),addMonitorResultSystems:t.mutation({query:t=>{let{monitor_config_key:e,resolved_system_ids:n}=t,i=(0,r.du)(n,"resolved_system_ids");return{method:"POST",url:"/plus/discovery-monitor/".concat(e,"/promote?").concat(i)}},invalidatesTags:["Discovery Monitor Results"]}),ignoreMonitorResultSystems:t.mutation({query:t=>{let{monitor_config_key:e,resolved_system_ids:n}=t,i=(0,r.du)(n,"resolved_system_ids");return{method:"POST",url:"/plus/discovery-monitor/".concat(e,"/mute?").concat(i)}},invalidatesTags:["Discovery Monitor Results"]}),addMonitorResultAssets:t.mutation({query:t=>{var e;let n=new URLSearchParams;return null===(e=t.urnList)||void 0===e||e.forEach(t=>n.append("staged_resource_urns",t)),{method:"POST",url:"/plus/discovery-monitor/promote?".concat(n)}},invalidatesTags:["Discovery Monitor Results"]}),ignoreMonitorResultAssets:t.mutation({query:t=>{var e;let n=new URLSearchParams;return null===(e=t.urnList)||void 0===e||e.forEach(t=>n.append("staged_resource_urns",t)),{method:"POST",url:"/plus/discovery-monitor/mute?".concat(n)}},invalidatesTags:["Discovery Monitor Results"]}),restoreMonitorResultAssets:t.mutation({query:t=>{var e;let n=new URLSearchParams({status_to_set:s.LL.ADDITION});return null===(e=t.urnList)||void 0===e||e.forEach(t=>n.append("staged_resource_urns",t)),{method:"POST",url:"/plus/discovery-monitor/un-mute?".concat(n)}},invalidatesTags:["Discovery Monitor Results"]}),updateAssetsSystem:t.mutation({query:t=>({method:"PATCH",url:"/plus/discovery-monitor/".concat(t.monitorId,"/results"),body:t.urnList.map(e=>({urn:e,user_assigned_system_key:t.systemKey}))}),invalidatesTags:["Discovery Monitor Results","System Assets"]}),updateAssetsDataUse:t.mutation({query:t=>({method:"PATCH",url:"/plus/discovery-monitor/".concat(t.monitorId,"/results"),body:t.urnList.map(e=>({urn:e,user_assigned_data_uses:t.dataUses}))}),invalidatesTags:["Discovery Monitor Results"]}),updateAssets:t.mutation({query:t=>({method:"PATCH",url:"/plus/discovery-monitor/".concat(t.monitorId,"/results"),body:t.assets}),invalidatesTags:["Discovery Monitor Results"]})})})},51500:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return _}});var i=n(24246),r=n(91942),s=n(79894),o=n.n(s),a=n(27378),u=n(30952),l=n(77213),c=n(77830),d=n(58754),p=n(14481),g=n(7426),f=n(37059);let m=t=>{let{isConfigLoading:e}=t;return(0,i.jsx)(l.Z,{title:"Action center",mainProps:{className:"h-full"},children:(0,i.jsx)(r.jqI,{justify:"center",align:"center",className:"h-full",children:e?(0,i.jsx)(r.$jN,{color:"primary.900"}):(0,i.jsx)(r.DUx,{message:"Coming soon...",description:"Action center is currently disabled.",type:"info",showIcon:!0})})})},v=()=>(0,i.jsx)(r.oj8,{image:r.oj8.PRESENTED_IMAGE_SIMPLE,description:"All caught up! Set up an integration monitor to track your infrastructure in greater detail.",children:(0,i.jsx)(o(),{href:c.KH,passHref:!0,legacyBehavior:!0,children:(0,i.jsx)(r.wpx,{type:"primary",children:"Visit integrations"})})});var y=n(7195),h=n(16394);let{Text:x}=r.AntTypography,j=t=>{let{monitorSummary:e,showSkeleton:n,...s}=t,[u,l]=(0,a.useState)(void 0),{name:d,property:p,total_updates:g,updates:f,last_monitored:m,warning:v,secrets:j,key:_}=e,b=Object.entries(f).map(t=>"".concat(t[1]," ").concat(t[0],"s")).join(", "),C=m?(0,h.p6)(new Date(m)):void 0,S=m?(0,y.B)(new Date(m),new Date,{addSuffix:!0}):void 0;return(0,a.useEffect)(()=>{p&&l((0,h.tl)(p,60)),(null==j?void 0:j.url)&&l((0,h.tl)((0,h.ge)(j.url),60))},[p,null==j?void 0:j.url]),(0,i.jsx)(r.krs.Item,{"data-testid":"monitor-result-".concat(_),...s,children:(0,i.jsx)(r.N_L,{avatar:!0,title:!1,loading:n,active:!0,children:(0,i.jsxs)(r.bue,{gutter:12,className:"w-full",children:[(0,i.jsx)(r.JGx,{span:18,className:"align-middle",children:(0,i.jsx)(r.krs.Item.Meta,{avatar:(0,i.jsx)(r.t3Z,{src:u,size:30,icon:(0,i.jsx)(r.PJP.huD,{}),style:{backgroundColor:"transparent",color:"var(--ant-color-text)"}}),title:(0,i.jsxs)(o(),{href:"".concat(c.vi,"/").concat(_),className:"whitespace-nowrap",children:["".concat(g," assets detected").concat(p?" on ".concat(p):""),!!v&&(0,i.jsx)(r.esZ,{title:"string"==typeof v?v:void 0,children:(0,i.jsx)(r.PJP.OdJ,{className:"ml-1 inline-block align-middle",style:{color:"var(--fidesui-error)"}})})]}),description:"".concat(b," detected.")})}),(0,i.jsx)(r.JGx,{span:4,className:"flex items-center justify-end",children:(0,i.jsx)(x,{ellipsis:{tooltip:d},children:d})}),(0,i.jsx)(r.JGx,{span:2,className:"flex items-center justify-end",children:!!S&&(0,i.jsx)(r.esZ,{title:C,children:(0,i.jsx)(x,{"data-testid":"monitor-date",ellipsis:{tooltip:C},children:S})})})]})})})};var _=()=>{var t;let e=(0,r.pmc)(),{PAGE_SIZES:n,pageSize:s,setPageSize:y,onPreviousPageClick:h,isPreviousPageDisabled:x,onNextPageClick:_,isNextPageDisabled:b,startRange:C,endRange:S,pageIndex:T,setTotalPages:w,resetPageIndexToDefault:P}=(0,p.oi)(),[k,R]=(0,a.useState)(""),{data:q,isLoading:A}=(0,g.tB)({api_set:!1}),N=!!(null==q?void 0:null===(t=q.detection_discovery)||void 0===t?void 0:t.website_monitor_enabled);(0,a.useEffect)(()=>{P()},[k,P]);let{data:D,isError:E,isLoading:M,isFetching:I}=(0,f.Ud)({page:T,size:s,search:k},{skip:A||!N});(0,a.useEffect)(()=>{E&&e&&N&&e({title:"Error fetching data",description:"Please try again later",status:"error"})},[E,e,N]),(0,a.useEffect)(()=>{D&&w(D.total||1)},[D,w]);let L=(null==D?void 0:D.items)||[],O=I?Array.from({length:s},(t,e)=>({key:e.toString(),updates:[],last_monitored:null})):[],U=(0,a.useCallback)(t=>[(0,i.jsx)(o(),{href:"".concat(c.vi,"/").concat(t),passHref:!0,legacyBehavior:!0,children:(0,i.jsx)(r.wpx,{type:"link",className:"p-0","data-testid":"review-button-".concat(t),children:"Review"})},"review")],[]);return N?(0,i.jsxs)(l.Z,{title:"Action center",children:[(0,i.jsx)(d.Z,{heading:"Action center",breadcrumbItems:[{title:"All activity"}]}),(0,i.jsx)(r.jqI,{className:"justify-between py-6",children:(0,i.jsx)(u.f,{value:k,onChange:R})}),(0,i.jsx)(r.krs,{loading:M,dataSource:L||O,locale:{emptyText:(0,i.jsx)(v,{})},renderItem:t=>!!t&&(0,i.jsx)(j,{showSkeleton:I,monitorSummary:t,actions:U(t.key)},t.key)}),!!L&&!!(null==D?void 0:D.total)&&D.total>s&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r.htM,{className:"mb-6 mt-0"}),(0,i.jsx)(p.s8,{totalRows:(null==D?void 0:D.total)||0,pageSizes:n,setPageSize:y,onPreviousPageClick:h,isPreviousPageDisabled:x||I,onNextPageClick:_,isNextPageDisabled:b||I,startRange:C,endRange:S})]})]}):(0,i.jsx)(m,{isConfigLoading:A})}}},function(t){t.O(0,[8033,6060,4481,2888,9774,179],function(){return t(t.s=40741)}),_N_E=t.O()}]);