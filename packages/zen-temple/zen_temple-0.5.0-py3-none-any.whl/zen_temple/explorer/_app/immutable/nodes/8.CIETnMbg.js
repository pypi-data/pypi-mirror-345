import"../chunks/CWj6FrbW.js";import{p as Qe,a as s,b as j,s as n,f as J,c as Ue,d as c,e as t,g as e,u as fe,t as We,r as i,h as K}from"../chunks/DJ4-OfXg.js";import{s as oe}from"../chunks/DpcWkFIJ.js";import{i as T}from"../chunks/DU3kBxd7.js";import{e as me,i as ye}from"../chunks/BRleubSi.js";import{t as h,a as p}from"../chunks/BBucZf18.js";import{d as Xe}from"../chunks/Bcqz6BHu.js";import{S as Ze,d as $e,c as be}from"../chunks/B-MMtEge.js";import{A as xe}from"../chunks/DAA3Jn6-.js";import{R as we}from"../chunks/Ddm_v7Wo.js";import{f as et,B as tt}from"../chunks/C26AYWvg.js";async function at(le,M,Q,x,E,re,N,O){t(M,null),t(Q,[],!0),await x(),E(),re(),N(),O()}function ot(le,M,Q,x,E){M(),Q(),x(),E()}var lt=h("<option> </option>"),rt=h("<option> </option>"),st=h('<h3>Technology Type</h3> <select class="form-select"></select> <!>',1),it=h("<option> </option>"),nt=h('<h3>Carrier</h3> <select class="form-select"><!> </select>',1),ct=h("<h3>Technology</h3> <!>",1),dt=h("<h3>Node</h3> <!>",1),vt=h('<div class="accordion-item"><h2 class="accordion-header"><button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">Data Selection</button></h2> <div id="collapseThree" class="accordion-collapse collapse show"><div class="accordion-body"><div class="row"><div class="col-6"><h3>Aggregation</h3> <!></div> <div class="col-6"><h3>Normalisation</h3> <!></div></div> <!> <h3>Year</h3> <!></div></div></div>'),_t=h('<div class="accordion-item variable-selection"><h2 class="accordion-header"><button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">Variable Selection</button></h2> <div id="collapseTwo" class="accordion-collapse collapse show"><div class="accordion-body"><h3>Variable</h3> <select class="form-select"></select> <!> <!></div></div></div> <!>',1),ut=h('<div class="text-center"><div class="spinner-border center" role="status"><span class="visually-hidden">Loading...</span></div></div>'),gt=h('<div class="text-center">No technologies with this selection.</div>'),pt=h('<div class="text-center">No carriers with this selection.</div>'),ht=h('<div class="text-center">No solution selected.</div>'),ft=h('<div class="text-center">No data with this selection.</div>'),mt=h('<div class="text-center">No locations with this selection.</div>'),yt=h('<div class="text-center">No data with this selection.</div>'),bt=h('<h2>Capacity</h2> <div class="z-1 position-relative"><div class="filters"><div class="accordion" id="accordionExample"><div class="accordion-item solution-selection"><h2 class="accordion-header"><button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">Solution Selection</button></h2> <div id="collapseOne" class="accordion-collapse collapse show"><div class="accordion-body"><!></div></div></div> <!></div></div></div> <div class="mt-4"><!></div>',1);function jt(le,M){Qe(M,!0);let Q=["conversion","storage","transport"],x=s(null),E=s(null),re=["capacity","capacity_addition"],N=s(j([])),O=s(j([])),U=s(j([])),A=s(j([])),u=s(null),De=j(["technology","node"]);const Fe=["not_normalized","normalized"],Te=["energy","power"];let Ne=s(j({})),D=s("capacity"),G=s(null),se=s("energy"),H=s("technology"),C=s("conversion"),F=s(j([])),I=s(j([])),L=s(j([])),Z=s("not_normalized"),B=s(!1),R=s(!1),Se=s(""),ie=s(j([])),ze=s(j([])),Le=fe(()=>({type:"bar",data:{datasets:e(ie),labels:e(ze)},options:{responsive:!0,scales:{x:{stacked:!0,title:{display:!0,text:"Year"}},y:{stacked:!0,title:{display:!0,text:`${e(D)} [${e(A).length>0?e(Ne)[e(A)[0]]:""}]`}}}}}));function $(){t(Z,"not_normalized"),t(L,e(O),!0),t(F,e(A),!0),t(I,e(U),!0),t(H,"node")}async function ke(){var l;if(t(R,!0),t(x,null),await We(),e(D)===null){t(R,!1);return}const a=await $e(e(u).solution_name,e(D),e(u).scenario_name,e(u).detail.system.reference_year,e(u).detail.system.interval_between_years);t(x,a.data,!0),(l=a.unit)!=null&&l.data&&t(Ne,Object.fromEntries(a.unit.data.map(d=>[d.technology,d[0]||d.units])),!0),t(R,!1)}async function Pe(){t(x,null),t(G,null),t(E,null),await ke(),Oe(),te(),ee(),$(),Y()}function Ee(){Oe(),te(),ee(),$(),Y()}function Oe(){if(t(N,[],!0),e(x)===null||e(C)===null)return;let a=Ae();e(x).data.forEach(l=>{let d=l.technology,S=e(u).detail.reference_carrier[d];!e(N).includes(S)&&a.includes(l.technology)&&e(N).push(S)}),e(N).length>0&&t(G,e(N)[0],!0)}function ee(){t(O,[],!0),e(x).data.forEach(a=>{let l=a.technology,d=e(u).detail.reference_carrier[l];e(A).includes(a.technology)&&!e(O).includes(a.location)&&e(O).push(a.location),!e(N).includes(d)&&e(A).includes(a.technology)&&e(N).push(d)}),t(L,e(O),!0)}function Ae(){if(!e(u)||!e(C))return[];switch(e(C)){case"conversion":return e(u).detail.system.set_conversion_technologies;case"storage":return e(u).detail.system.set_storage_technologies;case"transport":return e(u).detail.system.set_transport_technologies}return[]}function te(){if(e(C)===null)return;let a=Ae();t(A,a.filter(l=>{var d;return((d=e(u))==null?void 0:d.detail.reference_carrier[l])==e(G)}),!0),t(F,e(A),!0)}function Y(){var z;if(e(H)=="technology"?t(L,e(O),!0):t(F,e(A),!0),e(D)==null||e(L).length==0||e(I).length==0||e(F).length==0||e(x)===null){t(E,null);return}let a={},l={};e(H)=="technology"?(a.location=e(L),l.technology=e(F)):(a.technology=e(F),l.location=e(L)),e(C)=="storage"?l.capacity_type=[e(se)]:l.capacity_type=Te;let d=e(U).filter(m=>!e(I).includes(m));t(E,et(e(x).data,a,l,d,e(Z)=="normalized"),!0),t(ie,e(E),!0),t(ze,e(I).map(m=>m.toString()),!0);let S=e(u).solution_name.split(".");t(Se,[S[(S==null?void 0:S.length)-1],(z=e(u))==null?void 0:z.scenario_name,e(D),e(C),e(G)].join("_"),!0)}var Ce=bt(),ne=n(J(Ce),2),je=c(ne),Be=c(je),ce=c(Be),Re=n(c(ce),2),Ve=c(Re),qe=c(Ve);const Ge=fe(()=>!e(R)&&!e(B));Ze(qe,{solution_selected:Pe,get enabled(){return e(Ge)},get years(){return e(U)},set years(a){t(U,a,!0)},get selected_solution(){return e(u)},set selected_solution(a){t(u,a,!0)},get loading(){return e(B)},set loading(a){t(B,a,!0)}}),i(Ve),i(Re),i(ce);var He=n(ce,2);{var Ie=a=>{var l=_t(),d=J(l),S=n(c(d),2),z=c(S),m=n(c(z),2);m.__change=[at,E,ie,ke,te,ee,$,Y],me(m,21,()=>re,ye,(r,g)=>{var o=lt(),k={},f=c(o,!0);i(o),K(()=>{k!==(k=e(g))&&(o.value=(o.__value=e(g))??""),oe(f,e(g))}),p(r,o)}),i(m);var ae=n(m,2);{var de=r=>{var g=st(),o=n(J(g),2);o.__change=Ee,me(o,21,()=>Q,ye,(v,w)=>{var _=rt(),y={},V=c(_,!0);i(_),K(()=>{y!==(y=e(w))&&(_.value=(_.__value=e(w))??""),oe(V,e(w))}),p(v,_)}),i(o);var k=n(o,2);{var f=v=>{const w=fe(()=>!e(R)&&!e(B));we(v,{options:Te,selection_changed:Ee,get enabled(){return e(w)},get selected_option(){return e(se)},set selected_option(_){t(se,_,!0)}})};T(k,v=>{e(C)=="storage"&&v(f)})}K(()=>o.disabled=e(R)||e(B)),be(o,()=>e(C),v=>t(C,v)),p(r,g)};T(ae,r=>{e(D)!=null&&r(de)})}var P=n(ae,2);{var W=r=>{var g=nt(),o=n(J(g),2);o.__change=[ot,te,ee,$,Y];var k=c(o);me(k,17,()=>e(N),ye,(v,w)=>{var _=it(),y={},V=c(_,!0);i(_),K(()=>{y!==(y=e(w))&&(_.value=(_.__value=e(w))??""),oe(V,e(w))}),p(v,_)});var f=n(k);i(o),K(()=>{o.disabled=e(R)||e(B),oe(f,` disabled=${(e(R)||e(B))??""}`)}),be(o,()=>e(G),v=>t(G,v)),p(r,g)};T(P,r=>{e(C)!=null&&e(N).length>0&&r(W)})}i(z),i(S),i(d);var ve=n(d,2);{var _e=r=>{var g=vt(),o=n(c(g),2),k=c(o),f=c(k),v=c(f),w=n(c(v),2);we(w,{get options(){return De},selection_changed:Y,get selected_option(){return e(H)},set selected_option(b){t(H,b,!0)}}),i(v);var _=n(v,2),y=n(c(_),2);we(y,{options:Fe,selection_changed:Y,get selected_option(){return e(Z)},set selected_option(b){t(Z,b,!0)}}),i(_),i(f);var V=n(f,2);{var ue=b=>{var X=ct(),pe=n(J(X),2);xe(pe,{get elements(){return e(A)},selection_changed:Y,get selected_elements(){return e(F)},set selected_elements(he){t(F,he,!0)}}),p(b,X)},ge=b=>{var X=dt(),pe=n(J(X),2);xe(pe,{get elements(){return e(O)},selection_changed:Y,get selected_elements(){return e(L)},set selected_elements(he){t(L,he,!0)}}),p(b,X)};T(V,b=>{e(H)=="technology"?b(ue):b(ge,!1)})}var q=n(V,4);xe(q,{get elements(){return e(U)},selection_changed:Y,get selected_elements(){return e(I)},set selected_elements(b){t(I,b,!0)}}),i(k),i(o),i(g),p(r,g)};T(ve,r=>{e(x)&&e(C)&&e(G)&&e(A).length>0&&e(O).length>0&&r(_e)})}K(()=>m.disabled=e(R)||e(B)),be(m,()=>e(D),r=>t(D,r)),p(a,l)};T(He,a=>{!e(B)&&e(u)&&a(Ie)})}i(Be),i(je),i(ne);var Ye=n(ne,2),Je=c(Ye);{var Ke=a=>{var l=ut();p(a,l)},Me=(a,l)=>{{var d=z=>{var m=gt();p(z,m)},S=(z,m)=>{{var ae=P=>{var W=pt();p(P,W)},de=(P,W)=>{{var ve=r=>{var g=ht();p(r,g)},_e=(r,g)=>{{var o=f=>{var v=ft();p(f,v)},k=(f,v)=>{{var w=y=>{var V=mt();p(y,V)},_=(y,V)=>{{var ue=q=>{var b=yt();p(q,b)},ge=q=>{tt(q,{get config(){return e(Le)},get plot_name(){return e(Se)}})};T(y,q=>{e(E).length==0?q(ue):q(ge,!1)},V)}};T(f,y=>{e(O).length==0?y(w):y(_,!1)},v)}};T(r,f=>{e(E)==null?f(o):f(k,!1)},g)}};T(P,r=>{e(u)==null?r(ve):r(_e,!1)},W)}};T(z,P=>{e(N).length==0?P(ae):P(de,!1)},m)}};T(a,z=>{e(A).length==0?z(d):z(S,!1)},l)}};T(Je,a=>{e(B)||e(R)?a(Ke):a(Me,!1)})}i(Ye),p(le,Ce),Ue()}Xe(["change"]);export{jt as component};
