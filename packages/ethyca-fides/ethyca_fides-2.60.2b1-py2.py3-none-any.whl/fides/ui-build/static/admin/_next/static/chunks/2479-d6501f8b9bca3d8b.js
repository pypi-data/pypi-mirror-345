(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2479],{11611:function(e){e.exports=function(e){var i=typeof e;return null!=e&&("object"==i||"function"==i)}},55193:function(e,i,t){var r=t(99736),a=t(92360);e.exports=function(e){return"symbol"==typeof e||a(e)&&"[object Symbol]"==r(e)}},1039:function(e,i,t){"use strict";t.d(i,{Z:function(){return C}});var r=t(24246),a=t(59003),s=t(92222),n=t(91942),o=t(86677),l=t(27378),c=t(14481),d=t(45896),u=t(70675),g=t(72625),h=t(54409),m=t(79947),L=t(87667),x=t(50169),v=t(28278),f=t(16643),p=t(74241),j=e=>{let{resourceType:i,changeTypeOverride:t}=e,a=(0,s.Cl)(),n=[];return i?i===f.D$.SCHEMA?{columns:[a.accessor(e=>e.name,{id:"name",cell:e=>(0,r.jsx)(L.Z,{changeTypeOverride:t,result:e.row.original}),header:e=>(0,r.jsx)(c.Rr,{value:"Name",...e}),size:300}),a.accessor(e=>e.urn,{id:"project",cell:e=>(0,r.jsx)(c.G3,{value:(0,p.Z)(e.getValue())}),header:e=>(0,r.jsx)(c.Rr,{value:"Project",...e})}),a.display({id:"status",cell:e=>(0,r.jsx)(x.Z,{changeTypeOverride:t,result:e.row.original}),header:e=>(0,r.jsx)(c.Rr,{value:"Status",...e})}),a.accessor(e=>e.system,{id:"system",cell:e=>(0,r.jsx)(c.G3,{value:e.getValue()}),header:e=>(0,r.jsx)(c.Rr,{value:"System",...e})}),a.accessor(e=>e.monitor_config_id,{id:"monitor",cell:e=>(0,r.jsx)(c.G3,{value:e.getValue()}),header:e=>(0,r.jsx)(c.Rr,{value:"Detected by",...e})}),a.accessor(e=>e.updated_at,{id:"time",cell:e=>(0,r.jsx)(g.Cy,{time:e.getValue()}),header:e=>(0,r.jsx)(c.Rr,{value:"When",...e})}),a.display({id:"actions",cell:e=>(0,r.jsx)(h.Z,{ignoreChildActions:t===v.E.MONITORED||t===v.E.MUTED,resource:e.row.original}),header:"Actions",size:200,meta:{disableRowClick:!0}})]}:i===f.D$.TABLE?{columns:[a.accessor(e=>e.name,{id:"name",cell:e=>(0,r.jsx)(L.Z,{changeTypeOverride:t,result:e.row.original}),header:e=>(0,r.jsx)(c.Rr,{value:"Table name",...e}),size:300}),a.accessor(e=>e.description,{id:"description",cell:e=>(0,r.jsx)(c.G3,{value:e.getValue(),cellProps:e}),header:e=>(0,r.jsx)(c.Rr,{value:"Description",...e}),meta:{showHeaderMenu:!0}}),a.display({id:"status",cell:e=>(0,r.jsx)(x.Z,{changeTypeOverride:t,result:e.row.original}),header:e=>(0,r.jsx)(c.Rr,{value:"Status",...e})}),a.accessor(e=>e.monitor_config_id,{id:"monitor",cell:e=>(0,r.jsx)(c.G3,{value:e.getValue()}),header:e=>(0,r.jsx)(c.Rr,{value:"Detected by",...e})}),a.accessor(e=>e.updated_at,{id:"time",cell:e=>(0,r.jsx)(g.Cy,{time:e.getValue()}),header:e=>(0,r.jsx)(c.Rr,{value:"When",...e})}),a.display({id:"actions",cell:e=>(0,r.jsx)(h.Z,{resource:e.row.original}),header:"Actions",size:200,meta:{disableRowClick:!0}})]}:i===f.D$.FIELD?{columns:[a.accessor(e=>e.name,{id:"name",cell:e=>(0,r.jsx)(L.Z,{changeTypeOverride:t,result:e.row.original}),header:e=>(0,r.jsx)(c.Rr,{value:"Field name",...e}),size:300}),a.accessor(e=>e.source_data_type,{id:"data-type",cell:e=>(0,r.jsx)(m.Z,{type:e.getValue()}),header:e=>(0,r.jsx)(c.Rr,{value:"Data type",...e})}),a.accessor(e=>e.description,{id:"description",cell:e=>(0,r.jsx)(c.G3,{value:e.getValue(),cellProps:e}),header:e=>(0,r.jsx)(c.Rr,{value:"Description",...e}),meta:{showHeaderMenu:!0}}),a.display({id:"status",cell:e=>(0,r.jsx)(x.Z,{changeTypeOverride:t,result:e.row.original}),header:e=>(0,r.jsx)(c.Rr,{value:"Status",...e})}),a.accessor(e=>e.monitor_config_id,{id:"monitor",cell:e=>(0,r.jsx)(c.G3,{value:e.getValue()}),header:e=>(0,r.jsx)(c.Rr,{value:"Detected by",...e})}),a.accessor(e=>e.updated_at,{id:"time",cell:e=>(0,r.jsx)(g.Cy,{time:e.getValue()}),header:e=>(0,r.jsx)(c.Rr,{value:"When",...e})}),a.display({id:"actions",cell:e=>(0,r.jsx)(h.Z,{resource:e.row.original}),header:"Actions",size:200,meta:{disableRowClick:!0}})]}:{columns:n}:{columns:n}},_=e=>{let{initialFilterTabIndex:i=0}=e,[t,r]=(0,l.useState)(i),a=(0,l.useMemo)(()=>[{label:"Action Required",filters:[f.LL.ADDITION,f.LL.REMOVAL],childFilters:[f.LL.ADDITION,f.LL.REMOVAL]},{label:"Monitored",filters:[f.LL.MONITORED],childFilters:[],changeTypeOverride:v.E.MONITORED},{label:"Unmonitored",filters:[f.LL.MUTED],childFilters:[],changeTypeOverride:v.E.MUTED}],[]);return{filterTabs:a,filterTabIndex:t,setFilterTabIndex:r,activeDiffFilters:a[t].filters,activeChildDiffFilters:a[t].childFilters,activeChangeTypeOverride:a[t].changeTypeOverride}},y=t(47182),D=t(38347),b=t(7940),T=t(80285),w=t(36168),R=t(30952);let H={items:[],total:0,page:1,size:50,pages:1},M=()=>(0,r.jsx)(n.gCW,{mt:6,p:10,spacing:4,borderRadius:"base",maxW:"70%","data-testid":"empty-state",alignSelf:"center",margin:"auto",children:(0,r.jsxs)(n.gCW,{children:[(0,r.jsx)(n.xvT,{fontSize:"md",fontWeight:"600",children:"No activity found"}),(0,r.jsx)(n.xvT,{fontSize:"sm",children:"You're up to date!"})]})});var C=e=>{var i,t;let{resourceUrn:g}=e,h=(0,o.useRouter)(),[m,L]=(0,l.useState)(""),{filterTabs:x,setFilterTabIndex:v,filterTabIndex:p,activeDiffFilters:C,activeChildDiffFilters:Z,activeChangeTypeOverride:E}=_({initialFilterTabIndex:(null===(i=h.query)||void 0===i?void 0:i.filterTabIndex)?Number(null===(t=h.query)||void 0===t?void 0:t.filterTabIndex):void 0}),{PAGE_SIZES:I,pageSize:O,setPageSize:F,onPreviousPageClick:k,isPreviousPageDisabled:A,onNextPageClick:V,isNextPageDisabled:N,startRange:S,endRange:$,pageIndex:z,setTotalPages:G,resetPageIndexToDefault:P}=(0,c.oi)();(0,l.useEffect)(()=>{P()},[g,m,P,C,Z]);let{isFetching:U,isLoading:B,data:W}=(0,u.z8)({staged_resource_urn:g,page:z,size:O,child_diff_status:Z,diff_status:C,search:m}),q=(0,b.G)(null==W?void 0:W.items[0]),{columns:Q}=j({resourceType:q,changeTypeOverride:E}),{items:K,total:Y,pages:J}=(0,l.useMemo)(()=>null!=W?W:H,[W]);(0,l.useEffect)(()=>{G(J)},[J,G]);let X=(0,l.useMemo)(()=>Q,[Q]),{navigateToDetectionResults:ee}=(0,y.Z)(),ei=(0,a.b7)({getCoreRowModel:(0,s.sC)(),getGroupedRowModel:(0,s.qe)(),getExpandedRowModel:(0,s.rV)(),getRowId:T.Z,columns:X,manualPagination:!0,data:K,columnResizeMode:"onChange"});return B?(0,r.jsx)(c.I4,{rowHeight:36,numRows:36}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(d.Z,{filterTabs:x,filterTabIndex:p,onChange:v}),(0,r.jsx)(c.Q$,{children:(0,r.jsx)(n.kCb,{direction:"row",alignItems:"center",justifyContent:"space-between",width:"full",children:(0,r.jsxs)(n.kCb,{gap:6,align:"center",children:[(0,r.jsx)(n.xuv,{flexShrink:0,children:(0,r.jsx)(R.f,{value:m,onChange:L})}),(0,r.jsx)(D.Z,{})]})})}),(0,r.jsx)(c.ZK,{tableInstance:ei,onRowClick:e=>ee({resourceUrn:e.urn,filterTabIndex:p}),getRowIsClickable:e=>q!==f.D$.FIELD||(0,w.Z)(e),emptyTableNotice:(0,r.jsx)(M,{})}),(0,r.jsx)(c.s8,{totalRows:Y||0,pageSizes:I,setPageSize:F,onPreviousPageClick:k,isPreviousPageDisabled:A||U,onNextPageClick:V,isNextPageDisabled:N||U,startRange:S,endRange:$})]})}},54409:function(e,i,t){"use strict";t.d(i,{Z:function(){return m}});var r=t(24246),a=t(91942),s=t(812),n=t(14047),o=t(16643),l=t(31883);let c=(0,a.IUT)({displayName:"MonitorOffIcon",viewBox:"0 0 12 12",path:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M5.47125 1H5.85H6.15H6.51188L6.58875 1.36914L7.52062 5.83268L6.42408 4.98635L6.03375 3.11719L5.8038 4.50761L4.99323 3.882L5.40562 1.38867L5.47125 1ZM4.80795 5.0022L4.67675 5.79545L5.48735 6.42109L5.61854 5.62783L4.80795 5.0022ZM6.73856 6.49227L6.96125 7.55866L8.42407 8.6877L8.69498 8.00228L7.94864 7.42624L7.88625 7.58398L7.83501 7.33853L6.73856 6.49227ZM8.33138 6.45844L9.07755 7.03434L9.30188 6.4668H11.55H12V5.5293H11.55H9H8.69812L8.58375 5.82031L8.33138 6.45844ZM7.27551 9.06443L7.35399 9.125H7.28813L7.27551 9.06443ZM4.49147 6.91566L5.30209 7.54131L4.79437 10.6113L4.72875 11H4.35H4.05H3.69563L3.61313 10.6406L2.64563 6.46875H0.45H0V5.53125H0.45H2.69777L3.49646 6.1477L4.15125 8.97266L4.49147 6.91566Z",fill:"currentColor"}),(0,r.jsx)("g",{"clip-path":"url(#clip0_341_3102)",children:(0,r.jsx)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M10.6755 10.4168L0.164222 2.304L0.775218 1.51237L11.2865 9.62517L10.6755 10.4168Z",fill:"currentColor"})}),(0,r.jsx)("defs",{children:(0,r.jsx)("clipPath",{id:"clip0_341_3102",children:(0,r.jsx)("rect",{width:"11.5",height:"9",fill:"white",transform:"translate(0 1.5)"})})})]})}),d=(0,a.IUT)({displayName:"MonitorOnIcon",viewBox:"0 0 12 10",path:(0,r.jsx)("path",{d:"M5.47125 0H5.85H6.15H6.51188L6.58875 0.369141L7.88625 6.58398L8.58375 4.82031L8.69812 4.5293H9H11.55H12V5.4668H11.55H9.30188L8.36625 7.83398L8.25188 8.125H7.95H7.65H7.28813L7.21125 7.75586L6.03375 2.11719L4.79437 9.61133L4.72875 10H4.35H4.05H3.69563L3.61313 9.64062L2.64563 5.46875H0.45H0V4.53125H0.45H3H3.35438L3.43688 4.89062L4.15125 7.97266L5.40562 0.388672L5.47125 0Z",fill:"currentColor"})});var u=t(79494),g=t(70675),h=t(7940),m=e=>{let{resource:i,ignoreChildActions:t=!1}=e,m=(0,h.G)(i),[L,{isLoading:x}]=(0,g.v8)(),[v,{isLoading:f}]=(0,g.vi)(),[p,{isLoading:j}]=(0,g.Tl)(),{successAlert:_,errorAlert:y}=(0,n.V)(),D=async()=>{let e=await L({staged_resource_urn:i.urn,monitor_config_id:i.monitor_config_id});(0,l.D4)(e)?y((0,s.e$)(e.error,"Failed to confirm resource")):_("Data discovery has started. The results may take some time to appear in the “Data discovery“ tab.","".concat(i.name||"The resource"," is now being monitored."))},b=async()=>{let e=await p({staged_resource_urn:i.urn});(0,l.D4)(e)?y((0,s.e$)(e.error),"Failed to un-mute resource"):_("".concat(i.name||"The resource"," has been un-muted and is now being monitored."))},T=async()=>{let e=await L({staged_resource_urn:i.urn,monitor_config_id:i.monitor_config_id,unmute_children:!0,classify_monitored_resources:!0});(0,l.D4)(e)?y((0,s.e$)(e.error),"Failed to un-mute resource"):_("Data discovery has started. The results may take some time to appear in the “Data discovery“ tab.","".concat(i.name||"The resource"," is now being monitored."))},w=async()=>{let e=await L({staged_resource_urn:i.urn,monitor_config_id:i.monitor_config_id});(0,l.D4)(e)?y((0,s.e$)(e.error),"Failed to confirm resource"):_('These changes have been added to a Fides dataset. To view, navigate to "Manage datasets".',"Table changes confirmed")},R=async()=>{let e=await v({staged_resource_urn:i.urn});(0,l.D4)(e)?y((0,s.e$)(e.error),"Failed to mute resource"):_("Ignored data will not be monitored for changes or added to Fides datasets.","".concat(i.name||"Resource"," ignored"))},H=x||f||j,{diff_status:M,child_diff_statuses:C}=i,Z=m===o.D$.SCHEMA,E=m===o.D$.FIELD,I=Z&&void 0===M||!E&&M===o.LL.ADDITION,O=M!==o.LL.MUTED,F=M===o.LL.MUTED&&!E,k=M===o.LL.MUTED&&E,A=C&&(C[o.LL.ADDITION]||C[o.LL.REMOVAL]),V=M===o.LL.MONITORED&&!t&&A;return(0,r.jsxs)(a.Ugi,{children:[I&&(0,r.jsx)(u.Z,{title:"Monitor",icon:(0,r.jsx)(d,{}),onClick:D,disabled:H,loading:x}),k&&(0,r.jsx)(u.Z,{title:"Un-Mute",icon:(0,r.jsx)(d,{}),onClick:b,disabled:H,loading:x}),F&&(0,r.jsx)(u.Z,{title:"Monitor",icon:(0,r.jsx)(d,{}),onClick:T,disabled:H,loading:x}),V&&(0,r.jsx)(u.Z,{title:"Confirm",icon:(0,r.jsx)(a.nQG,{}),onClick:w,disabled:H,loading:x}),O&&(0,r.jsx)(u.Z,{title:"Ignore",icon:(0,r.jsx)(c,{}),onClick:R,disabled:H,loading:f})]})}},7940:function(e,i,t){"use strict";t.d(i,{G:function(){return a}});var r=t(16643);let a=e=>{var i,t,a;return e?e.resource_type?e.resource_type:(null===(i=e.schemas)||void 0===i?void 0:i.length)?r.D$.DATABASE:(null===(t=e.tables)||void 0===t?void 0:t.length)?r.D$.SCHEMA:(null===(a=e.fields)||void 0===a?void 0:a.length)?r.D$.TABLE:r.D$.FIELD:void 0}},98559:function(e,i){"use strict";i.Z=e=>{let{name:i,urn:t,monitor_config_id:r,database_name:a,schema_name:s,table_name:n,top_level_field_name:o,top_level_field_urn:l}=e;if(!o)return i;let c=t.split(".");return l?t.replace("".concat(l).concat("."),""):([r,a,s,n,o].forEach(e=>{if(e){let i=c.indexOf(e);i>-1&&c.splice(i,1)}}),c.join("."))}},36168:function(e,i){"use strict";i.Z=e=>{var i;return!!e.parent_table_urn&&null!==(i=e.sub_field_urns)&&void 0!==i&&!!i.length&&!e.top_level_field_name}},80356:function(e,i,t){"use strict";var r=t(7940),a=t(36168),s=t(16643);i.Z=e=>(0,r.G)(e)!==s.D$.FIELD||(0,a.Z)(e)},31883:function(e,i,t){"use strict";t.d(i,{Bw:function(){return r.Bw},D4:function(){return r.D4}});var r=t(19043)}}]);