Metadata-Version: 2.4
Name: clea-api
Version: 0.1.2
Summary: ClÃ©a-API: A framework for document load and hybrid search engine combining vector and metadata-based search. CRUD operations are performed using FastAPI.
Author-email: William <pikachu0442@gmail.com>
License-Expression: MIT
Project-URL: Homepage, https://willisback.github.io/clea-api/
Project-URL: Repository, https://github.com/WillIsback/clea-api
Project-URL: Documentation, https://willisback.github.io/clea-api/
Keywords: vector search,FastAPI,pgvector,hybrid search,CRUD,document load
Classifier: Development Status :: 4 - Beta
Classifier: Intended Audience :: Developers
Classifier: Topic :: Software Development :: Libraries
Classifier: Programming Language :: Python :: 3
Classifier: Programming Language :: Python :: 3.11
Requires-Python: >=3.11
Description-Content-Type: text/markdown
License-File: LICENSE
Requires-Dist: fastapi==0.115.12
Requires-Dist: uvicorn==0.34.2
Requires-Dist: sqlalchemy==2.0.40
Requires-Dist: pgvector==0.4.1
Requires-Dist: pydantic==2.11.3
Requires-Dist: pytest==8.3.5
Requires-Dist: scikit-learn==1.6.1
Requires-Dist: sentence-transformers==4.1.0
Requires-Dist: transformers==4.51.3
Requires-Dist: torch==2.7.0
Requires-Dist: python-dotenv==1.1.0
Requires-Dist: requests==2.32.3
Requires-Dist: typer==0.15.3
Requires-Dist: watchfiles==1.0.5
Requires-Dist: ruff>=0.11.7
Dynamic: license-file

# ClÃ©a-API ğŸš€  

*Hybrid document-search framework for PostgreSQL + pgvector*

[![Licence MIT](https://img.shields.io/badge/license-MIT-blue.svg)](LICENSE)
[![Docs](https://img.shields.io/badge/docs-ReadTheDocs-green.svg)](https://<your-gh-user>.github.io/clea-api)

ClÃ©a-API charge des documents multi-formats, les segmente, les vectorise et
fournit une **recherche hybride (vectorielle + filtres SQL)** prÃªte Ã  lâ€™emploi.
Il sâ€™utilise :

* via **endpoints REST** (FastAPI) ;
* en **librairie Python** (extraction, pipeline, recherche) ;
* avec une **base PostgreSQL + pgvector** auto-indexÃ©e par corpus.

---

## Sommaire rapide

| Sujet | Lien |
|-------|------|
| Docs HTML (MkDocs) | <https://WillIsback.github.io/clea-api> |
| Structure & concepts | [`docs/index.md`](docs/index.md) |
| Guide dâ€™extraction | [`docs/doc_loader.md`](docs/doc_loader.md) |
| Base de donnÃ©es & index | [`docs/database.md`](docs/database.md) |
| Recherche hybride | [`docs/search.md`](docs/search.md) |
| Pipeline end-to-end | [`docs/pipeline.md`](docs/pipeline.md) |

> **Important :** le prÃ©sent README nâ€™est pas compilÃ© par MkDocs ;  
> il contient donc seulement les informations de dÃ©marrage.
> La documentation complÃ¨te vit dans le dossier `docs/`.

---

## CaractÃ©ristiques clÃ©s

- ğŸ”„ **Chargement multi-formats** : PDF, DOCX, HTML, JSON, TXT, â€¦  
- ğŸ§© **Segmentation hiÃ©rarchique** : Section â–¶ Paragraphe â–¶ Chunk.  
- ğŸ” **Recherche hybride** : *ivfflat* ou *HNSW* + Cross-Encoder rerank.  
- âš¡ **Pipeline â€œone-linerâ€** :  

  ```python
  from pipeline import process_and_store
  process_and_store("rapport.pdf", theme="R&D")
  ```

- ğŸ“¦ **Architecture modulaire** : ajoutez un extracteur ou un moteur en quelques lignes.  
- ğŸ³ **Docker-ready** & **CI-friendly** (tests PyTest, docs MkDocs).

---

## Arborescence du dÃ©pÃ´t

```text
.
â”œâ”€â”€ doc_loader/   # Extraction & chargement
â”œâ”€â”€ vectordb/     # ModÃ¨les SQLAlchemy + recherche
â”œâ”€â”€ pipeline/     # Orchestrateur end-to-end
â”œâ”€â”€ docs/              # Documentation MkDocs
â”œâ”€â”€ demo/              # Fichiers dâ€™exemple
â”œâ”€â”€ start.sh           # Script de dÃ©marrage API
â”œâ”€â”€ Dockerfile         # Build image
â””â”€â”€ ...
```

---

## Installation

### PrÃ©requis

* Python â‰¥ 3.11  
* PostgreSQL â‰¥ 14 avec lâ€™extension **pgvector**  
* (Optionnel) WSL 2 + openSUSE Tumbleweed

### Ã‰tapes

```bash
# 1. Cloner
git clone https://github.com/<your-gh-user>/clea-api.git
cd clea-api

# 2. DÃ©pendances
uv pip install -r requirements.txt   # â†³ gestionnaire 'uv'

# 3. Variables dâ€™environnement
cp .env.sample .env   # puis Ã©ditez au besoin

# 4. Initialisation DB
uv python -m clea_vectordb.init_db

# 5. Lancer lâ€™API
./start.sh            # âœ http://localhost:8080
```

---

## Utilisation express

### Chargement simple

```bash
curl -X POST http://localhost:8080/doc_loader/upload-file \
     -F "file=@demo/devis.pdf" -F "theme=Achat"
```

### Pipeline complet (upload â†’ segment â†’ index)

```bash
curl -X POST http://localhost:8080/pipeline/process-and-store \
     -F "file=@demo/devis.pdf" -F "theme=Achat" -F "max_length=800"
```

### Recherche hybride

```bash
curl -X POST http://localhost:8080/search/hybrid_search \
     -H "Content-Type: application/json" \
     -d '{"query":"analyse risques", "top_k":8}'
```

---

## Tests

```bash
uv run pytest           # tous les tests unitaires
```

---

## DÃ©ploiement Docker

```bash
docker build -t clea-api .
docker run -p 8080:8080 clea-api
```

---

## Contribuer ğŸ¤

1. **Fork** â†’ branche (`feat/ma-feature`)  
2. `uv run pytest && mkdocs build` doivent passer  
3. Ouvrez une **Pull Request** claire et concise

---

## Licence

DistribuÃ© sous licence **MIT** â€“ voir [`LICENSE`](LICENSE).
