Metadata-Version: 2.3
Name: onnx-checker
Version: 0.1.3
Summary: CLI utility to verify operator support before converting ONNX models to Kneron NEF format
License: MIT
Author: Mason Huang
Author-email: masonhuang0320@gmail.com
Requires-Python: >=3.10
Classifier: License :: OSI Approved :: MIT License
Classifier: Programming Language :: Python :: 3
Classifier: Programming Language :: Python :: 3.10
Classifier: Programming Language :: Python :: 3.11
Classifier: Programming Language :: Python :: 3.12
Classifier: Programming Language :: Python :: 3.13
Requires-Dist: onnx (>=1.17.0,<2.0.0)
Description-Content-Type: text/markdown

# ONNX Checker

[![PyPI version]][pypi-url] [![Build status]][ci-url] [![License]][license-url]

`onnx-check` is a lightweight CLI that **inspects ONNX models *before* you convert or deploy them**. It tells you exactly which operators the graph uses and whether they are supported on your target hardware.

> "Catch unsupported operators early – before they derail your tool‑chain."
> — *Mason Huang*

---

## ✨ Features (v0.1)

| Feature               | Description                                                                                                                           |
| --------------------- | ------------------------------------------------------------------------------------------------------------------------------------- |
| **Operator scan**     | Fast, dependency‑free static analysis of `.onnx` files                                                                                |
| **Hardware profiles** | Built‑in JSON compatibility tables for common NPUs (Currently Kneron KL series …) with an easy override mechanism |
| **Clear report**      | CLI table plus optional JSON / Markdown export; highlights unsupported ops and optional‑feature gaps                                  |
| **Actionable hints**  | Suggestions and links to official docs for each unsupported operator                                                                  |

<details>
<summary>Roadmap</summary>

| Milestone | Planned                                  | Notes                                                    |
| --------- | ---------------------------------------- | -------------------------------------------------------- |
| **0.2**   | Markdown/JSON report templates           | Nice for CI bots                                         |
| **0.3**   | Model slimming (`--prune`, `--quantize`) | Reduce model size before flashing                        |
| **0.4**   | Automatic op replacement (`--replace`)   | Swap unsupported ops for functionally‑equivalent kernels |
| **0.5**   | Interactive web viewer (`onnx-op-view`)  | Drag‑and‑drop visualiser                                 |

</details>

---

## 🚀 Quick start

```bash
# 1. Install from PyPI
pip install onnx-check

# 2. Run against an ONNX file and Check for the specify dongle series
onnx-check my_model.onnx -h 720

# 3. Check all dongle series
onnx-check my_model.onnx
```


### Sample output

```
Model summary – my_model.onnx
IR version : 6    Opset : 11
Inputs  : input  float32  [1, 3, 112, 112]
Outputs : output  float32  [1, 512]
Dynamic axes : None detected ✓

my_model.onnx · IR 6 · KL520
╭──────────────────────────────────────────────────────────────╮
│  Status  Operator   Count   Notes                            │
├──────────────────────────────────────────────────────────────┤
│   ✓      Conv        27                                      │
│   ✓      Relu        27                                      │
│   ✗      Elu          5     Not supported on KL720           │
│   ✓      MaxPool      5                                      │
│   ✗      Resize       2     Only linear/nearest modes OK     │
╰──────────────────────────────────────────────────────────────╯
⚠  2 unsupported operator(s) detected.
```

---

## 🧑‍💻 API usage

```python
from onnx_op_check import Checker, load_profile

checker = Checker("my_model.onnx", profile=load_profile("kl720"))
report = checker.run()
print(report.to_markdown())
```


## 📖 Hardware profiles

Profiles live under `onnx_op_check/profiles/*.json`.
Each profile declares the operators, attributes, and constraints supported by a particular accelerator.
See [`docs/PROFILE_SCHEMA.md`](docs/PROFILE_SCHEMA.md) for the JSON schema.

Contributions for new hardware are very welcome!

## 🤝 Contributing

We love pull requests! Please read `CONTRIBUTING.md` and open an issue before you start a large refactor so we can align on design.

Coding conventions follow **PEP 8** with the Black formatter.

## 📜 License

Released under the **MIT License** © 2025 Mason & contributors.

### A note on language

The primary language of this README is **English** for wider community reach.  A Traditional Chinese translation will be added soon in `docs/README_zh-TW.md`.

---

[PyPI version]: https://img.shields.io/pypi/v/onnx-checker
[pypi-url]: https://pypi.org/project/onnx-checker
[Build status]: https://img.shields.io/github/actions/workflow/status/HuangMason320/onnx-checker/ci.yml?branch=main
[ci-url]: https://github.com/HuangMason320/onnx-checker/actions
[License]: https://img.shields.io/github/license/HuangMason320/onnx-checker
[license-url]: https://github.com/HuangMason320/onnx-checker/blob/main/LICENSE

