"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4121],{7617:function(e,s,t){t.d(s,{q:function(){return a}});var n=t(24246),i=t(91942);let a=e=>{let{label:s,isDisabled:t,...a}=e;return(0,n.jsx)(i.OK9,{"data-testid":"tab-".concat(s),_selected:{fontWeight:"600",color:"complimentary.500",borderColor:"complimentary.500"},fontSize:a.fontSize,fontWeight:"500",color:"gray.500",isDisabled:t||!1,children:s})};s.Z=e=>{let{data:s,border:t="partial",...l}=e;return(0,n.jsxs)(i.mQc,{colorScheme:"complimentary",...l,children:[(0,n.jsx)(i.tdY,{width:"partial"===t?"max-content":void 0,children:s.map(e=>(0,n.jsx)(a,{label:e.label,isDisabled:e.isDisabled,fontSize:l.fontSize},e.label))}),(0,n.jsx)(i.nPR,{children:s.map(e=>(0,n.jsx)(i.x45,{px:0,"data-testid":"tab-panel-".concat(e.label),children:e.content},e.label))})]})}},58452:function(e,s,t){var n=t(24246),i=t(91942);s.Z=e=>{let{isOpen:s,onClose:t,onConfirm:a,onCancel:l,title:r,message:d,cancelButtonText:o,continueButtonText:c,isLoading:u,returnFocusOnClose:p,isCentered:m,testId:h="confirmation-modal",icon:x}=e;return(0,n.jsxs)(i.u_l,{isOpen:s,onClose:t,size:"lg",returnFocusOnClose:null==p||p,isCentered:m,children:[(0,n.jsx)(i.ZAr,{}),(0,n.jsxs)(i.hzk,{textAlign:"center",p:6,"data-testid":h,children:[x?(0,n.jsx)(i.M5Y,{mb:2,children:x}):null,r?(0,n.jsx)(i.xBx,{fontWeight:"medium",pb:0,children:r}):null,d?(0,n.jsx)(i.fef,{children:d}):null,(0,n.jsx)(i.mzw,{children:(0,n.jsxs)(i.MIq,{columns:2,width:"100%",children:[(0,n.jsx)(i.wpx,{onClick:()=>{l&&l(),t()},size:"large",className:"mr-3","data-testid":"cancel-btn",disabled:u,children:o||"Cancel"}),(0,n.jsx)(i.wpx,{type:"primary",size:"large",onClick:a,"data-testid":"continue-btn",loading:u,children:c||"Continue"})]})})]})]})}},7426:function(e,s,t){t.d(s,{D2:function(){return p},L:function(){return r},U7:function(){return o},Yh:function(){return h},ak:function(){return d},iR:function(){return g},km:function(){return l},tB:function(){return a}});var n=t(3228);let i=t(78780).u.injectEndpoints({endpoints:e=>({getConfigurationSettings:e.query({query:e=>{let{api_set:s}=e;return{url:"/config",method:"GET",params:{api_set:s}}},providesTags:["Configuration Settings"]}),putConfigurationSettings:e.mutation({query:e=>({url:"/config",method:"PUT",body:e}),invalidatesTags:["Configuration Settings"]}),patchConfigurationSettings:e.mutation({query:e=>({url:"/config",method:"PATCH",body:e}),invalidatesTags:["Configuration Settings","Privacy Notices"]})})}),{useGetConfigurationSettingsQuery:a,usePutConfigurationSettingsMutation:l,usePatchConfigurationSettingsMutation:r}=i,d=(0,n.P1)([e=>e,i.endpoints.getConfigurationSettings.select({api_set:!0}),i.endpoints.getConfigurationSettings.select({api_set:!1})],(e,s,t)=>{var n,i,a;let{data:l}=s,{data:r}=t;return{configSet:{cors_origins:(null==r?void 0:null===(n=r.security)||void 0===n?void 0:n.cors_origins)||[],cors_origin_regex:null==r?void 0:null===(i=r.security)||void 0===i?void 0:i.cors_origin_regex},apiSet:{cors_origins:(null==l?void 0:null===(a=l.security)||void 0===a?void 0:a.cors_origins)||[]}}}),o=()=>(0,n.P1)([e=>e,i.endpoints.getConfigurationSettings.select({api_set:!0})],(e,s)=>{let{data:t}=s;return t}),c={enabled:!1,cmp_api_required:!1},u=(e,s,t,n)=>{let i=t&&t[e],a=n&&n[e];return i&&a?{...n[e],...t[e]}:a?n[e]:i?{...t[e]}:s},p=(0,n.P1)([e=>e,i.endpoints.getConfigurationSettings.select({api_set:!0}),i.endpoints.getConfigurationSettings.select({api_set:!1})],(e,s,t)=>{let{data:n}=s,{data:i}=t;return u("gpp",c,n,i)}),m={tcf_publisher_country_code:null},h=(0,n.P1)([e=>e,i.endpoints.getConfigurationSettings.select({api_set:!0}),i.endpoints.getConfigurationSettings.select({api_set:!1})],(e,s,t)=>{let{data:n}=s,{data:i}=t;return u("plus_consent_settings",m,n,i)}),x={allow_username_password_login:!1},g=(0,n.P1)([e=>e,i.endpoints.getConfigurationSettings.select({api_set:!0}),i.endpoints.getConfigurationSettings.select({api_set:!1})],(e,s,t)=>{let{data:n}=s,{data:i}=t;return u("plus_security_settings",x,n,i)})},44121:function(e,s,t){t.d(s,{Z:function(){return ee}});var n=t(24246),i=t(91942),a=t(91437),l=()=>(0,n.jsxs)(i.xuv,{children:[(0,n.jsx)(i.xuv,{pb:4,fontSize:"18px",fontWeight:"semibold",children:"Role Description"}),(0,n.jsx)(i.gCW,{spacing:4,children:a.K.map(e=>(0,n.jsxs)(i.xuv,{width:"100%",padding:4,borderRadius:"md",backgroundColor:"gray.75",fontSize:"14px",children:[(0,n.jsx)(i.xuv,{fontWeight:"semibold",children:e.label}),(0,n.jsx)(i.xuv,{color:"gray.700",children:e.description})]},e.roleKey))})]}),r=t(16134),d=t(7617),o=t(16643),c=t(19904),u=t(34090),p=t(86677),m=t(27378),h=t(812),x=t(46238),g=t(58452),j=t(77830),f=t(46628),w=t(26917),b=t(1315),y=t(95492),_=t(65497);let v=e=>{let{assignedSystems:s,onAssignedSystemChange:t}=e,a=(0,r.C)(_.Ux);if((0,_.d6)(a,{skip:!a}),0===s.length)return null;let l=e=>{t(s.filter(s=>s.fides_key!==e.fides_key))};return(0,n.jsxs)(i.iA_,{size:"sm","data-testid":"assign-systems-delete-table",children:[(0,n.jsx)(i.hrZ,{children:(0,n.jsxs)(i.Tr,{children:[(0,n.jsx)(i.Th,{children:"System"}),(0,n.jsx)(i.Th,{})]})}),(0,n.jsx)(i.p3B,{children:s.map(e=>(0,n.jsxs)(i.Tr,{_hover:{bg:"gray.50"},"data-testid":"row-".concat(e.fides_key),children:[(0,n.jsx)(i.Td,{children:e.name}),(0,n.jsx)(i.Td,{textAlign:"end",children:(0,n.jsx)(i.wpx,{"aria-label":"Unassign system from user",icon:(0,n.jsx)(y.l,{}),onClick:()=>l(e),"data-testid":"unassign-btn"})})]},e.fides_key))})]})};var C=e=>{let{allSystems:s,assignedSystems:t,onChange:a}=e,l=e=>{t.find(s=>s.fides_key===e.fides_key)?a(t.filter(s=>s.fides_key!==e.fides_key)):a([...t,e])};return(0,n.jsx)(i.xuv,{overflowY:"auto",maxHeight:"300px",children:(0,n.jsxs)(i.iA_,{size:"sm","data-testid":"assign-systems-table",maxHeight:"50vh",overflowY:"scroll",children:[(0,n.jsx)(i.hrZ,{position:"sticky",top:0,background:"white",zIndex:1,children:(0,n.jsxs)(i.Tr,{children:[(0,n.jsx)(i.Th,{children:"System"}),(0,n.jsx)(i.Th,{children:"Assign"})]})}),(0,n.jsx)(i.p3B,{children:s.map(e=>{let s=!!t.find(s=>s.fides_key===e.fides_key);return(0,n.jsxs)(i.Tr,{_hover:{bg:"gray.50"},"data-testid":"row-".concat(e.fides_key),children:[(0,n.jsx)(i.Td,{children:e.name}),(0,n.jsx)(i.Td,{children:(0,n.jsx)(i.rAg,{checked:s,onChange:()=>l(e),"data-testid":"assign-switch"})})]},e.fides_key)})})]})})};let S=(e,s)=>{var t,n;return(null===(t=e.name)||void 0===t?void 0:t.toLocaleLowerCase().includes(s.toLocaleLowerCase()))||(null===(n=e.description)||void 0===n?void 0:n.toLocaleLowerCase().includes(s.toLocaleLowerCase()))};var k=e=>{let{isOpen:s,onClose:t,assignedSystems:a,onAssignedSystemChange:l}=e,{data:r}=(0,b.K3)(),[d,o]=(0,m.useState)(""),[c,u]=(0,m.useState)(a),p=async()=>{l(c),t()},h=!r||0===r.length,x=(0,m.useMemo)(()=>r?r.filter(e=>S(e,d)):[],[r,d]),g=(0,m.useMemo)(()=>{let e=new Set(c.map(e=>e.fides_key));return x.every(s=>e.has(s.fides_key))},[x,c]);return(0,n.jsxs)(i.u_l,{isOpen:s,onClose:t,size:"2xl",children:[(0,n.jsx)(i.ZAr,{}),(0,n.jsxs)(i.hzk,{p:8,"data-testid":"confirmation-modal",children:[(0,n.jsxs)(i.xBx,{fontWeight:"medium",display:"flex",justifyContent:"space-between",alignItems:"center",children:[(0,n.jsx)(i.xvT,{children:"Assign systems"}),(0,n.jsxs)(i.j8w,{color:"success",children:["Assigned to ",a.length," systems"]})]}),(0,n.jsx)(i.fef,{"data-testid":"assign-systems-modal-body",children:h?(0,n.jsx)(i.xvT,{children:"No systems found"}):(0,n.jsxs)(i.Kqy,{spacing:4,children:[(0,n.jsxs)(i.kCb,{justifyContent:"space-between",children:[(0,n.jsx)(i.xvT,{fontSize:"sm",flexGrow:1,fontWeight:"medium",children:"Assign systems in your organization to this user"}),(0,n.jsx)(i.xuv,{children:(0,n.jsxs)(i.NIc,{display:"flex",alignItems:"center",children:[(0,n.jsx)(i.lXp,{fontSize:"sm",htmlFor:"assign-all-systems",mb:"0",children:"Assign all systems"}),(0,n.jsx)(i.rAg,{size:"small",id:"assign-all-systems",checked:g,onChange:e=>{e&&r?u(x):u(r?r.filter(e=>!x.includes(e)):[])},"data-testid":"assign-all-systems-toggle"})]})})]}),(0,n.jsx)(w.Z,{value:d,onChange:o,placeholder:"Search for systems","data-testid":"system-search",withIcon:!0}),(0,n.jsx)(C,{allSystems:x,assignedSystems:c,onChange:u})]})}),(0,n.jsx)(i.mzw,{justifyContent:"flex-start",children:(0,n.jsxs)("div",{children:[(0,n.jsx)(i.wpx,{onClick:t,className:"mr-2","data-testid":"cancel-btn",children:"Cancel"}),h?null:(0,n.jsx)(i.wpx,{type:"primary",onClick:p,"data-testid":"confirm-btn",children:"Confirm"})]})})]})]})},P=e=>{let{label:s,roleKey:t,isSelected:a,isDisabled:l,assignedSystems:r,onAssignedSystemChange:d}=e,{setFieldValue:c}=(0,u.u6)(),p=(0,i.qY0)(),m=l?"You do not have sufficient permissions to assign this role.":void 0;return a?(0,n.jsxs)(i.Kqy,{borderRadius:"md",border:"1px solid",borderColor:"gray.200",p:4,backgroundColor:"gray.50","aria-selected":"true",spacing:4,"data-testid":"selected",children:[(0,n.jsxs)(i.kCb,{alignItems:"center",justifyContent:"space-between",children:[(0,n.jsx)(i.xvT,{fontSize:"md",fontWeight:"semibold",children:s}),(0,n.jsx)(i.StI,{})]}),t!==o.A7.APPROVER?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(i.kCb,{alignItems:"center",children:[(0,n.jsx)(i.xvT,{fontSize:"sm",fontWeight:"semibold",mr:1,children:"Assigned systems"}),(0,n.jsx)(x.b,{label:"Assigned systems refer to those systems that have been specifically allocated to a user for management purposes. Users assigned to a system possess full edit permissions and are listed as the Data Steward for the respective system."})]}),(0,n.jsx)(i.wpx,{disabled:l,title:m,type:"primary",size:"small",onClick:p.onOpen,"data-testid":"assign-systems-btn",children:"Assign systems +"}),(0,n.jsx)(v,{assignedSystems:r,onAssignedSystemChange:d}),p.isOpen?(0,n.jsx)(k,{isOpen:p.isOpen,onClose:p.onClose,assignedSystems:r,onAssignedSystemChange:d}):null]}):null]}):(0,n.jsx)(i.wpx,{onClick:()=>{c("roles",[t])},"data-testid":"role-option-".concat(s),title:m,disabled:l,children:s})};let T={roles:[]};var A=()=>{var e;let s=(0,i.pmc)(),t=(0,p.useRouter)(),l=(0,r.C)(_.Ux);(0,_.d6)(l,{skip:!l});let{isOpen:d,onOpen:w,onClose:b}=(0,i.qY0)(),y=(0,r.C)(_.R$),[v,C]=(0,m.useState)(y),[S]=(0,_.G$)();(0,m.useEffect)(()=>{C(y)},[y]);let{data:k,isLoading:A}=(0,_.gU)(null!=l?l:"",{skip:!l}),[R]=(0,_.lD)(),z=async e=>{if(d&&b(),!l)return;let t=e.roles.includes(o.A7.APPROVER),n=await R({user_id:l,payload:{roles:e.roles}});if((0,h.D4)(n)){s((0,f.Vo)((0,h.e$)(n.error)));return}if(!t){let e=v.map(e=>e.fides_key),t=await S({userId:l,fidesKeys:e});if((0,h.D4)(t)){s((0,f.Vo)((0,h.e$)(t.error)));return}}s((0,f.t5)("Permissions updated"))},q=async e=>{l&&(v.length>0&&e.roles.includes(o.A7.APPROVER)?w():await z(e))},E=(0,c.Tg)([o.Sh.USER_PERMISSION_ASSIGN_OWNERS]);if(!l)return null;if(A)return(0,n.jsx)(i.$jN,{});if(!E&&(null==k?void 0:null===(e=k.roles)||void 0===e?void 0:e.includes(o.A7.OWNER)))return(0,n.jsx)(i.xvT,{"data-testid":"insufficient-access",children:"You do not have sufficient access to change this user's permissions."});let I=(null==k?void 0:k.roles)?{roles:k.roles}:T;return(0,n.jsx)(u.J9,{onSubmit:q,initialValues:I,enableReinitialize:!0,children:e=>{let{values:s,isSubmitting:l,dirty:r}=e;return(0,n.jsxs)(u.l0,{children:[(0,n.jsxs)(i.Kqy,{spacing:7,children:[(0,n.jsxs)(i.Kqy,{spacing:3,"data-testid":"role-options",children:[(0,n.jsxs)(i.kCb,{alignItems:"center",children:[(0,n.jsx)(i.xvT,{fontSize:"sm",fontWeight:"semibold",mr:1,children:"User role"}),(0,n.jsx)(x.b,{label:"A user's role in the organization determines what parts of the UI they can access and which functions are available to them."})]}),a.K.map(e=>{let t=s.roles.indexOf(e.roleKey)>=0;return(0,n.jsx)(P,{isSelected:t,isDisabled:e.roleKey===o.A7.OWNER&&!E,assignedSystems:v,onAssignedSystemChange:C,...e},e.roleKey)})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)(i.wpx,{onClick:()=>t.push(j.e3),children:"Cancel"}),(0,n.jsx)(i.wpx,{type:"primary",htmlType:"submit",loading:l,disabled:!r&&v===y,"data-testid":"save-btn",children:"Save"})]})]}),(0,n.jsx)(g.Z,{isOpen:d,onClose:b,onConfirm:()=>z(s),title:"Change role to Approver",testId:"downgrade-to-approver-confirmation-modal",continueButtonText:"Yes",message:(0,n.jsx)(i.xvT,{children:"Switching to an approver role will remove all assigned systems. Do you wish to proceed?"})})]})}})},R=t(61038),z=t(55484),q=t(25980),E=t(40324),I=t(96006),O=t(7426);let{useGetEmailInviteStatusQuery:N}=t(78780).u.injectEndpoints({endpoints:e=>({getEmailInviteStatus:e.query({query:()=>({url:"/messaging/email-invite/status"}),providesTags:()=>["Email Invite Status"]})})});var U=t(76174),Z=t(91317),W=t(31883);let D=z.Ry().shape({password:I.a.label("Password"),passwordConfirmation:z.Z_().required().oneOf([z.iH("password")],"Passwords must match").label("Password confirmation")}),K={password:"",passwordConfirmation:""},B=e=>{let s=(0,i.qY0)(),t=(0,i.pmc)(),[n]=(0,_.ls)(),a=async i=>{let a=await n({id:e,new_password:i.password});(0,W.D4)(a)?t((0,f.Vo)((0,h.e$)(a.error))):(t((0,f.t5)("Successfully reset user's password. Please inform the user of their new password.")),s.onClose())};return{...s,handleResetPassword:a}};var Y=e=>{let{id:s}=e,{handleResetPassword:t,isOpen:a,onClose:l,onOpen:r}=B(s);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.wpx,{onClick:r,"data-testid":"reset-password-btn",children:"Reset password"}),(0,n.jsxs)(i.u_l,{isCentered:!0,isOpen:a,onClose:l,children:[(0,n.jsx)(i.ZAr,{}),(0,n.jsx)(i.hzk,{children:(0,n.jsx)(u.J9,{initialValues:K,validationSchema:D,onSubmit:t,children:e=>{let{isSubmitting:s,dirty:t,isValid:a}=e;return(0,n.jsxs)(u.l0,{children:[(0,n.jsx)(i.xBx,{children:"Reset Password"}),(0,n.jsx)(i.olH,{}),(0,n.jsx)(i.fef,{children:(0,n.jsxs)(i.Kqy,{direction:"column",spacing:4,children:[(0,n.jsx)(i.xvT,{mb:2,children:"Choose a new password for this user."}),(0,n.jsx)(E.j0,{name:"password",label:"Password",placeholder:"********",type:"password",tooltip:"Password must contain at least 8 characters, 1 number, 1 capital letter, 1 lowercase letter, and at least 1 symbol.",autoComplete:"new-password"}),(0,n.jsx)(E.j0,{name:"passwordConfirmation",label:"Confirm Password",placeholder:"********",type:"password",tooltip:"Must match above password.",autoComplete:"confirm-password"})]})}),(0,n.jsx)(i.mzw,{children:(0,n.jsxs)("div",{className:"w-full gap-2",children:[(0,n.jsx)(i.wpx,{onClick:l,className:"w-1/2",children:"Cancel"}),(0,n.jsx)(i.wpx,{type:"primary",disabled:!t||!a,loading:s,htmlType:"submit",className:"w-1/2","data-testid":"submit-btn",children:"Change Password"})]})})]})}})})]})]})};let L=e=>{let s=(0,i.qY0)(),t=(0,i.pmc)(),[n,a]=(0,m.useState)(""),[l,r]=(0,m.useState)(""),[d,{isLoading:o}]=(0,_.ev)(),c=!!(e&&l&&n),u=async()=>{c&&d({id:e,old_password:n,new_password:l}).unwrap().then(()=>{t((0,f.t5)("Password updated")),s.onClose()})};return{...s,changePasswordValidation:c,handleChange:e=>{"oldPassword"===e.target.name?a(e.target.value):r(e.target.value)},handleChangePassword:u,isLoading:o,newPasswordValue:l,oldPasswordValue:n}};var V=e=>{let{id:s}=e,{changePasswordValidation:t,handleChange:a,handleChangePassword:l,isLoading:r,isOpen:d,newPasswordValue:o,oldPasswordValue:c,onClose:u,onOpen:p}=L(s);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.wpx,{onClick:p,"data-testid":"update-password-btn",children:"Update password"}),(0,n.jsxs)(i.u_l,{isCentered:!0,isOpen:d,onClose:u,children:[(0,n.jsx)(i.ZAr,{}),(0,n.jsxs)(i.hzk,{children:[(0,n.jsx)(i.xBx,{children:"Update Password"}),(0,n.jsx)(i.olH,{}),(0,n.jsx)(i.fef,{pb:6,children:(0,n.jsxs)(i.Kqy,{direction:"column",spacing:"15px",children:[(0,n.jsx)(i.NIc,{children:(0,n.jsx)(i.IIB,{isRequired:!0,name:"oldPassword",onChange:a,placeholder:"Old Password",type:"password",value:c,"data-testid":"input-oldPassword"})}),(0,n.jsx)(i.NIc,{children:(0,n.jsx)(i.IIB,{isRequired:!0,name:"newPassword",onChange:a,placeholder:"New Password",type:"password",value:o,"data-testid":"input-newPassword"})})]})}),(0,n.jsxs)(i.mzw,{children:[(0,n.jsx)(i.wpx,{onClick:u,className:"mr-2 w-1/2",children:"Cancel"}),(0,n.jsx)(i.wpx,{type:"primary",disabled:!t,loading:r,onClick:l,htmlType:"submit",className:"mr-3 w-1/2","data-testid":"submit-btn",children:"Change Password"})]})]})]})]})},F=()=>{let e=(0,r.C)(_.Ux),s=(0,r.C)(Z.dy),t=!!s&&s.id===e;return(0,n.jsx)(i.xuv,{children:e?(0,n.jsxs)(i.Ugi,{children:[t?(0,n.jsx)(V,{id:e}):null,(0,n.jsx)(c.ZP,{scopes:[o.Sh.USER_PASSWORD_RESET],children:(0,n.jsx)(Y,{id:e})})]}):null})};let M=(e,s,t,n)=>!e||e&&!s||e&&s&&!0===t&&!!n,$=(e,s,t)=>!!(e&&s&&t),H=(e,s,t,n,i,a)=>!!e&&!s&&M(t,n,i,a),G=(e,s,t,n)=>M(e,s,t,n),J={username:"",first_name:"",email_address:"",last_name:"",password:"",password_login_enabled:!1},Q=(e,s,t,n,i)=>z.Ry().shape({username:z.Z_().required().label("Username"),email_address:z.Z_().email().required().label("Email address"),first_name:z.Z_().label("First name"),last_name:z.Z_().label("Last name"),password:z.Z_().when(["password_login_enabled"],{is:a=>H(e,s,t,n,i,a),then:()=>I.a.label("Password"),otherwise:()=>z.Z_().optional().label("Password")}),password_login_enabled:z.O7().label("Allow password login")});var X=e=>{let{onSubmit:s,initialValues:t,canEditNames:a}=e,l=(0,p.useRouter)(),d=(0,i.pmc)(),o=(0,r.T)(),c=(0,i.qY0)(),{data:m}=N(),{data:x}=(0,U.qv)();(0,O.tB)({api_set:!1});let g=(0,r.C)(_.ZC),w=(0,r.C)(O.iR),{plus:b}=(0,q.hz)(),v=(null==m?void 0:m.enabled)||!1,C=(null==w?void 0:w.allow_username_password_login)||!1,S=!g,k=!S&&!a,P=x&&x.length>0||!1,T=$(b,P,C),A=null!=t?t:J;g&&"password_login_enabled"in g&&(A={...A,password_login_enabled:!!g.password_login_enabled});let z=Q(S,v,b,P,C),I=async e=>{let t=H(S,v,b,P,C,e.password_login_enabled),n={username:e.username,email_address:e.email_address,first_name:e.first_name,last_name:e.last_name};T&&(n.password_login_enabled=e.password_login_enabled),t&&e.password&&(n.password=e.password);let i=await s(n);if((0,h.D4)(i)){d((0,f.Vo)((0,h.e$)(i.error)));return}d((0,f.t5)("".concat(S?"User created. By default, new users are set to the Viewer role. To change the role, please go to the Permissions tab.":"User updated."))),(null==i?void 0:i.data)&&o((0,_.Vv)(i.data.id))};return(0,n.jsx)(u.J9,{onSubmit:I,initialValues:A,validationSchema:z,"data-testid":"user-form",children:e=>{let{dirty:s,isSubmitting:t,isValid:a,values:r}=e;return(0,n.jsx)(u.l0,{children:(0,n.jsxs)(i.Kqy,{maxW:["xs","xs","100%"],width:"100%",spacing:7,children:[(0,n.jsxs)(i.Kqy,{spacing:6,maxWidth:"55%",children:[(0,n.jsxs)(i.kCb,{children:[(0,n.jsxs)(i.xvT,{display:"flex",alignItems:"center",fontSize:"sm",fontWeight:"semibold",children:["Profile"," ",(null==g?void 0:g.disabled)&&(0,n.jsx)(i.j8w,{color:"success",className:"ml-2","data-testid":"invite-sent-badge",children:"Invite sent"})]}),(0,n.jsx)(i.xuv,{marginLeft:"auto",children:(0,n.jsxs)(i.Ugi,{children:[G(b,P,C||!1,r.password_login_enabled)&&(0,n.jsx)(F,{"data-testid":"password-management"}),S?null:(0,n.jsxs)(i.xuv,{children:[(0,n.jsx)(i.wpx,{"aria-label":"delete",icon:(0,n.jsx)(y.l,{}),onClick:c.onOpen,"data-testid":"delete-user-btn"}),(0,n.jsx)(R.Z,{user:g,...c})]})]})})]}),(0,n.jsx)(E.j0,{name:"username",label:"Username",variant:"block",placeholder:"Enter new username",disabled:!S,isRequired:!0,"data-testid":"input-username"}),(0,n.jsx)(E.j0,{name:"email_address",label:"Email address",variant:"block",placeholder:"Enter email of user",isRequired:!0,"data-testid":"input-email-address"}),(0,n.jsx)(E.j0,{name:"first_name",label:"First name",variant:"block",placeholder:"Enter first name of user",disabled:k,"data-testid":"input-first-name"}),(0,n.jsx)(E.j0,{name:"last_name",label:"Last name",variant:"block",placeholder:"Enter last name of user",disabled:k,"data-testid":"input-last-name"}),T&&(0,n.jsx)(E.w8,{name:"password_login_enabled",label:"Allow password login",tooltip:"When enabled, user can log in with username and password. When disabled, user must use SSO.",variant:"stacked",isDisabled:!S,"data-testid":"toggle-allow-password-login",size:"default"}),H(S,v,b,P,C,r.password_login_enabled)&&(0,n.jsx)(E.j0,{name:"password",label:"Password",variant:"block",placeholder:"********",type:"password",tooltip:"Password must contain at least 8 characters, 1 number, 1 capital letter, 1 lowercase letter, and at least 1 symbol.",isRequired:!0,"data-testid":"input-password"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)(i.wpx,{onClick:()=>l.push(j.e3),className:"mr-3","data-testid":"cancel-btn",children:"Cancel"}),(0,n.jsx)(i.wpx,{htmlType:"submit",type:"primary",disabled:!s||!a,loading:t,"data-testid":"save-user-btn",children:"Save"})]})]})})}})},ee=e=>{let{onSubmit:s,initialValues:t,...a}=e,u=(0,r.C)(_.Ux);(0,_.Fk)(u,{skip:!u});let p=(0,c.Tg)([o.Sh.USER_PERMISSION_UPDATE]),m=[{label:"Profile",content:(0,n.jsx)(X,{onSubmit:s,initialValues:t,...a})},{label:"Permissions",content:(0,n.jsxs)(i.kCb,{gap:"97px",children:[(0,n.jsx)(i.xuv,{w:{base:"100%",md:"50%",xl:"50%"},children:(0,n.jsx)(A,{})}),(0,n.jsx)(i.xuv,{position:"absolute",top:"96px",right:6,height:"calc(100% + 100px)",overflowY:"scroll",padding:6,w:"35%",borderLeftWidth:"1px",children:(0,n.jsx)(l,{})})]}),isDisabled:!u||!p}];return(0,n.jsx)(d.Z,{data:m})}},31883:function(e,s,t){t.d(s,{Bw:function(){return n.Bw},D4:function(){return n.D4}});var n=t(19043)}}]);