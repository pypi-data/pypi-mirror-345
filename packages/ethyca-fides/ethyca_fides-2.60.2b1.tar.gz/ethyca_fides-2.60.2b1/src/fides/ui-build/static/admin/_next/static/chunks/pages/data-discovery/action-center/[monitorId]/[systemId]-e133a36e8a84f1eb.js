(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4154],{58095:function(e,t,s){var n=s(8817);e.exports=function(e,t){return!!(null==e?0:e.length)&&n(e,t,0)>-1}},21796:function(e){e.exports=function(e,t,s){for(var n=-1,a=null==e?0:e.length;++n<a;)if(s(t,e[n]))return!0;return!1}},8817:function(e,t,s){var n=s(95372),a=s(1129),r=s(58263);e.exports=function(e,t,s){return t==t?r(e,t,s):n(e,a,s)}},1129:function(e){e.exports=function(e){return e!=e}},92198:function(e,t,s){var n=s(52485),a=s(58095),r=s(21796),i=s(65581),o=s(47111),l=s(43735);e.exports=function(e,t,s){var d=-1,c=a,u=e.length,m=!0,g=[],h=g;if(s)m=!1,c=r;else if(u>=200){var y=t?null:o(e);if(y)return l(y);m=!1,c=i,h=new n}else h=t?[]:g;e:for(;++d<u;){var v=e[d],f=t?t(v):v;if(v=s||0!==v?v:0,m&&f==f){for(var p=h.length;p--;)if(h[p]===f)continue e;t&&h.push(f),g.push(v)}else c(h,f,s)||(h!==g&&h.push(f),g.push(v))}return g}},47111:function(e,t,s){var n=s(46151),a=s(50344),r=s(43735),i=n&&1/r(new n([,-0]))[1]==1/0?function(e){return new n(e)}:a;e.exports=i},58263:function(e){e.exports=function(e,t,s){for(var n=s-1,a=e.length;++n<a;)if(e[n]===t)return n;return -1}},50344:function(e){e.exports=function(){}},83766:function(e,t,s){var n=s(92198);e.exports=function(e){return e&&e.length?n(e):[]}},25654:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/data-discovery/action-center/[monitorId]/[systemId]",function(){return s(52641)}])},35287:function(e,t,s){"use strict";var n=s(24246),a=s(91942),r=s(88038),i=s.n(r);s(27378),t.Z=e=>{let{children:t,title:s,mainProps:r}=e;return(0,n.jsxs)(a.kCb,{"data-testid":s,direction:"column",height:"calc(100vh - 48px)",width:"calc(100vw - 240px)",children:[(0,n.jsxs)(i(),{children:[(0,n.jsxs)("title",{children:["Fides Admin UI - ",s]}),(0,n.jsx)("meta",{name:"description",content:"Privacy Engineering Platform"}),(0,n.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,n.jsx)(a.kCb,{px:10,py:6,as:"main",overflow:"auto",direction:"column",flex:1,minWidth:0,...r,children:t})]})}},45938:function(e,t,s){"use strict";s.d(t,{Gt:function(){return m},eB:function(){return g},oI:function(){return u}});var n=s(24246),a=s(34090),r=s(27378),i=s(16134),o=s(38602),l=s(58452);let d=(0,r.createRef)(),c=(0,r.createRef)(),u=()=>{let e=(0,i.T)(),t=(0,i.C)(o.DB),s=(0,r.useCallback)(()=>{c.current=void 0,d.current=void 0},[]),n=(0,r.useCallback)(()=>{e((0,o.Mr)()),c.current&&(c.current(!0),s())},[e,s]),a=(0,r.useCallback)(()=>{e((0,o.Mr)()),c.current&&(c.current(!1),s())},[e,s]);return{attemptAction:(0,r.useCallback)(()=>t?(e((0,o.h7)()),d.current||(d.current=new Promise(e=>{c.current=e})),d.current):Promise.resolve(!0),[t,e]),onConfirm:n,onClose:a}},m=e=>{let{id:t,name:s}=e,{dirty:n}=(0,a.u6)(),l=(0,i.T)();return(0,r.useEffect)(()=>(l((0,o.Zu)({id:t,name:s})),()=>{l((0,o.dz)({id:t}))}),[l,t,s]),(0,r.useEffect)(()=>{l((0,o.$p)({id:t,isDirty:n}))},[n,l,t]),null},g=()=>{let{onConfirm:e,onClose:t}=u(),s=(0,i.C)(o.uv);return(0,n.jsx)(l.Z,{isOpen:s,onClose:t,onConfirm:e,isCentered:!0,title:"Unsaved Changes",message:"You have unsaved changes"})}},37059:function(e,t,s){"use strict";s.d(t,{Ak:function(){return y},EY:function(){return u},Tj:function(){return g},Ud:function(){return i},Vr:function(){return v},WJ:function(){return l},nP:function(){return c},nS:function(){return m},rs:function(){return d},sX:function(){return h},wi:function(){return o}});var n=s(78780),a=s(16394),r=s(16643);let{useGetAggregateMonitorResultsQuery:i,useGetDiscoveredSystemAggregateQuery:o,useGetDiscoveredAssetsQuery:l,useAddMonitorResultSystemsMutation:d,useIgnoreMonitorResultSystemsMutation:c,useAddMonitorResultAssetsMutation:u,useIgnoreMonitorResultAssetsMutation:m,useRestoreMonitorResultAssetsMutation:g,useUpdateAssetsSystemMutation:h,useUpdateAssetsDataUseMutation:y,useUpdateAssetsMutation:v}=n.u.injectEndpoints({endpoints:e=>({getAggregateMonitorResults:e.query({query:e=>{let{page:t=1,size:s=20,search:n}=e;return{url:"/plus/discovery-monitor/aggregate-results",params:{page:t,size:s,search:n,diff_status:"addition"}}},providesTags:["Discovery Monitor Results"]}),getDiscoveredSystemAggregate:e.query({query:e=>{let{key:t,page:s=1,size:n=20,search:a,diff_status:r}=e;return{url:"/plus/discovery-monitor/system-aggregate-results",params:{monitor_config_id:t,page:s,size:n,search:a,diff_status:r}}},providesTags:["Discovery Monitor Results"]}),getDiscoveredAssets:e.query({query:e=>{let{key:t,system:s,page:n=1,size:a=20,search:r,diff_status:i}=e;return{url:"/plus/discovery-monitor/".concat(t,"/results"),params:{resolved_system_id:s,page:n,size:a,search:r,diff_status:i,sort_by:"urn"}}},providesTags:()=>["Discovery Monitor Results"]}),addMonitorResultSystems:e.mutation({query:e=>{let{monitor_config_key:t,resolved_system_ids:s}=e,n=(0,a.du)(s,"resolved_system_ids");return{method:"POST",url:"/plus/discovery-monitor/".concat(t,"/promote?").concat(n)}},invalidatesTags:["Discovery Monitor Results"]}),ignoreMonitorResultSystems:e.mutation({query:e=>{let{monitor_config_key:t,resolved_system_ids:s}=e,n=(0,a.du)(s,"resolved_system_ids");return{method:"POST",url:"/plus/discovery-monitor/".concat(t,"/mute?").concat(n)}},invalidatesTags:["Discovery Monitor Results"]}),addMonitorResultAssets:e.mutation({query:e=>{var t;let s=new URLSearchParams;return null===(t=e.urnList)||void 0===t||t.forEach(e=>s.append("staged_resource_urns",e)),{method:"POST",url:"/plus/discovery-monitor/promote?".concat(s)}},invalidatesTags:["Discovery Monitor Results"]}),ignoreMonitorResultAssets:e.mutation({query:e=>{var t;let s=new URLSearchParams;return null===(t=e.urnList)||void 0===t||t.forEach(e=>s.append("staged_resource_urns",e)),{method:"POST",url:"/plus/discovery-monitor/mute?".concat(s)}},invalidatesTags:["Discovery Monitor Results"]}),restoreMonitorResultAssets:e.mutation({query:e=>{var t;let s=new URLSearchParams({status_to_set:r.LL.ADDITION});return null===(t=e.urnList)||void 0===t||t.forEach(e=>s.append("staged_resource_urns",e)),{method:"POST",url:"/plus/discovery-monitor/un-mute?".concat(s)}},invalidatesTags:["Discovery Monitor Results"]}),updateAssetsSystem:e.mutation({query:e=>({method:"PATCH",url:"/plus/discovery-monitor/".concat(e.monitorId,"/results"),body:e.urnList.map(t=>({urn:t,user_assigned_system_key:e.systemKey}))}),invalidatesTags:["Discovery Monitor Results","System Assets"]}),updateAssetsDataUse:e.mutation({query:e=>({method:"PATCH",url:"/plus/discovery-monitor/".concat(e.monitorId,"/results"),body:e.urnList.map(t=>({urn:t,user_assigned_data_uses:e.dataUses}))}),invalidatesTags:["Discovery Monitor Results"]}),updateAssets:e.mutation({query:e=>({method:"PATCH",url:"/plus/discovery-monitor/".concat(e.monitorId,"/results"),body:e.assets}),invalidatesTags:["Discovery Monitor Results"]})})})},90057:function(e,t,s){"use strict";var n=s(86677),a=s(27378),r=s(16643);let i={ATTENTION_REQUIRED:{index:0,hash:"#attention-required"},RECENT_ACTIVITY:{index:1,hash:"#recent-activity"},IGNORED:{index:2,hash:"#ignored"}},o=e=>{let t=e.startsWith("#")?e:"#".concat(e);return Object.values(i).find(e=>e.hash===t)},l=e=>Object.values(i).find(t=>t.index===e);t.Z=e=>{var t;let{systemId:s,initialHash:d}=e,c=(0,n.useRouter)(),[u,m]=(0,a.useState)(d?null===(t=o(d))||void 0===t?void 0:t.index:i.ATTENTION_REQUIRED.index),g=(0,a.useCallback)(async e=>{if(m(e),c.isReady){let t=l(e);if(t){let e={...c.query};await c.replace({pathname:c.pathname,query:e,hash:t.hash},void 0,{shallow:!0})}}},[c]),h=[{label:"Attention required",params:{diff_status:[r.LL.ADDITION],system:s}},{label:"Recent activity",params:{diff_status:[r.LL.MONITORED]}},{label:"Ignored",params:{diff_status:[r.LL.MUTED],system:s}}],{diff_status:y,system:v}=h[u].params,f=y.includes(r.LL.MONITORED);return{filterTabs:h,filterTabIndex:u,onTabChange:g,activeParams:s?{diff_status:y,system:v}:{diff_status:y},actionsDisabled:f}}},78238:function(e,t,s){"use strict";s.d(t,{g:function(){return n}});let n=["essential","functional.service.improve","personalize","analytics","marketing.advertising.first_party.targeted","marketing.advertising.third_party.targeted"];t.Z=e=>n.includes(e)},52641:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return H}});var n=s(24246),a=s(86677),r=s(27378),i=s(35287),o=s(77830),l=s(58754),d=s(59003),c=s(92222),u=s(91942),m=s(83766),g=s.n(m),h=s(66379),y=s(812),v=s(14047),f=s(14481),p=s(37059),x=s(8133),j=s(79283),b=s(34929),_=s(78238),w=e=>{let{selectedTaxonomies:t,...s}=e,{getDataUseDisplayNameProps:a,getDataUses:r}=(0,b.Z)(),i=r().filter(e=>e.active&&_.g.includes(e.fides_key)).map(e=>{let{name:t,primaryName:s}=a(e.fides_key);return{value:e.fides_key,name:t,primaryName:s,description:e.description||""}});return(0,n.jsx)(j.l,{options:i,...s})};let{Text:C}=u.AntTypography;var S=e=>{let{onSave:t,isSaving:s,onClose:a,...i}=e,[o,l]=(0,r.useState)([]),d=()=>{l([]),a()};return(0,n.jsxs)(x.Z,{title:"Add consent category",...i,onClose:d,children:[(0,n.jsxs)(u.jqI,{vertical:!0,gap:20,className:"pb-6 pt-4",children:[(0,n.jsx)(C,{children:"Assign consent categories to selected assets. This configures the system for consent management. Consent categories apply to both individual assets and the system."}),(0,n.jsx)(w,{mode:"tags",selectedTaxonomies:o,onSelect:(e,t)=>l([...o,t.value]),variant:"outlined"})]}),(0,n.jsxs)(u.jqI,{justify:"space-between",children:[(0,n.jsx)(u.wpx,{htmlType:"reset",onClick:d,"data-testid":"cancel-btn",children:"Cancel"}),(0,n.jsx)(u.wpx,{htmlType:"submit",type:"primary",disabled:!o.length,loading:s,onClick:()=>{t(o),d()},"data-testid":"save-btn",children:"Save"})]})]})},R=s(90057),T=s(16643),k=s(30952),D=s(29850),I=s(77685);let{Text:A}=u.AntTypography,L=e=>{let{onSave:t,isSaving:s,...a}=e,[i,o]=(0,r.useState)(),[l,d]=(0,r.useState)(!1),c=(0,r.useCallback)(e=>{e.preventDefault(),d(!0)},[]),m=()=>{d(!1)},g=()=>{o(void 0),a.onClose()};return(0,n.jsxs)(x.Z,{title:"Assign system",...a,onClose:g,children:[(0,n.jsxs)(u.jqI,{vertical:!0,gap:20,className:"pb-6 pt-4",children:[(0,n.jsx)(A,{children:"Assign a system to the selected assets. If no system exists, select 'Add new system' to create one."}),(0,n.jsx)(D.R,{placeholder:"Search or select...",onSelect:(e,t)=>{o(t)},onAddSystem:c,value:i})]})," ",(0,n.jsxs)(u.jqI,{justify:"space-between",children:[(0,n.jsx)(u.wpx,{htmlType:"reset",onClick:g,"data-testid":"cancel-btn",children:"Cancel"}),(0,n.jsx)(u.wpx,{htmlType:"submit",type:"primary",disabled:!i,loading:s,onClick:()=>{t(i)},"data-testid":"save-btn",children:"Save"})]}),l&&(0,n.jsx)(I.i,{isOpen:!0,onClose:m,onSuccessfulSubmit:(e,t)=>{m(),o({label:t,value:e})},toastOnSuccess:!0})]})};var P=s(8411),E=s(72625);let M=e=>{let{asset:t}=e,[s,{isLoading:a}]=(0,p.EY)(),[r,{isLoading:i}]=(0,p.nS)(),[o,{isLoading:l}]=(0,p.Tj)(),{successAlert:d,errorAlert:c}=(0,v.V)(),m=a||i||l,{urn:g,name:h,resource_type:f,diff_status:x}=t,j=async()=>{let e=await s({urnList:[g]});(0,y.D4)(e)?c((0,y.e$)(e.error)):d("".concat(f,' "').concat(h,'" has been added to the system inventory.'),"Confirmed")},b=async()=>{let e=await r({urnList:[g]});(0,y.D4)(e)?c((0,y.e$)(e.error)):d("".concat(f,' "').concat(h,'" has been ignored and will not appear in future scans.'),"Ignored")},_=async()=>{let e=await o({urnList:[g]});(0,y.D4)(e)?c((0,y.e$)(e.error)):d("".concat(f,' "').concat(h,'" is no longer ignored and will appear in future scans.'),"Restored")};return(0,n.jsxs)(u.vyj,{children:[x!==T.LL.MUTED&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(u.esZ,{title:t.system?void 0:"This asset requires a system before you can add it to the inventory.",children:(0,n.jsx)(u.wpx,{"data-testid":"add-btn",size:"small",onClick:j,disabled:!t.system||m,loading:a,children:"Add"})}),(0,n.jsx)(u.wpx,{"data-testid":"ignore-btn",size:"small",onClick:b,disabled:m,loading:i,children:"Ignore"})]}),x===T.LL.MUTED&&(0,n.jsx)(u.wpx,{"data-testid":"restore-btn",size:"small",onClick:_,disabled:m,loading:l,children:"Restore"})]})};var N=s(26183),q=s(31883),z=e=>{var t;let{asset:s,readonly:a}=e,[i,o]=(0,r.useState)(!1),[l]=(0,p.Ak)(),{successAlert:d,errorAlert:c}=(0,v.V)(),{getDataUseDisplayName:m}=(0,b.Z)(),g=s.user_assigned_data_uses||s.data_uses||[],h=async e=>{let t=await l({monitorId:s.monitor_config_id,urnList:[s.urn],dataUses:[...g,e]});(0,q.D4)(t)?c((0,y.e$)(t.error)):d("Consent category added to ".concat(s.resource_type,' "').concat(s.name,'" .'),"Confirmed"),o(!1)},f=async e=>{let t=await l({monitorId:s.monitor_config_id,urnList:[s.urn],dataUses:g.filter(t=>t!==e)});(0,q.D4)(t)?c((0,y.e$)(t.error)):d("Consent category removed from ".concat(s.resource_type,' "').concat(s.name,'".'),"Confirmed")},x=(null===(t=s.user_assigned_data_uses)||void 0===t?void 0:t.length)?s.user_assigned_data_uses:s.data_uses,j=null==x?void 0:x.filter(e=>(0,_.Z)(e));return a?(0,n.jsx)(N.Z,{children:null==j?void 0:j.map(e=>(0,n.jsx)(u.j8w,{color:"white",children:m(e)},e))}):(0,n.jsxs)(N.Z,{children:[!i&&(0,n.jsxs)(n.Fragment,{children:[null==j?void 0:j.map(e=>(0,n.jsx)(u.j8w,{"data-testid":"data-use-".concat(e),color:"white",closable:!0,onClose:()=>f(e),closeButtonLabel:"Remove data use",children:m(e)},e)),(0,n.jsx)(u.j8w,{onClick:()=>o(!0),"data-testid":"taxonomy-add-btn",addable:!0,"aria-label":"Add data use"})]}),i&&(0,n.jsx)(u.xuv,{className:"select-wrapper",position:"absolute",zIndex:10,top:"0",left:"0",width:"100%",height:"max",bgColor:"#fff",children:(0,n.jsx)(w,{selectedTaxonomies:j||[],onSelect:h,onBlur:()=>o(!1),open:!0})})]})},O=s(43862),U=s(70675);let Z=e=>{let{aggregateSystem:t,monitorConfigId:s,readonly:a}=e,{resource_type:i,name:o,urn:l,system:d,user_assigned_system_key:c,system_key:m}=t,[g,h]=(0,r.useState)(!1),[f,p]=(0,r.useState)(!1),[x,{isLoading:j}]=(0,U.NA)(),{successAlert:b,errorAlert:_}=(0,v.V)(),w=(0,r.useCallback)(e=>{e.preventDefault(),p(!0)},[]),C=async(e,t,n)=>{let a=await x({staged_resource_urn:l,monitor_config_id:s,user_assigned_system_key:e});(0,y.D4)(a)?_((0,y.e$)(a.error)):b(n?"".concat(t," has been added to your system inventory and the ").concat(i,' "').concat(o,'" has been assigned to that system.'):"".concat(i,' "').concat(o,'" has been assigned to ').concat(t,"."),"Confirmed"),h(!1)};return a?(0,n.jsx)("div",{style:(0,O.J9)(),children:(0,n.jsx)(u.j8w,{"data-testid":"system-badge",color:"white",children:d})}):(0,n.jsxs)(n.Fragment,{children:[!g&&(0,n.jsx)("div",{style:(0,O.J9)(),children:d?(0,n.jsxs)(u.j8w,{onClick:()=>h(!0),"data-testid":"system-badge",children:[d,(0,n.jsx)(u.PJP.I8b,{})]}):(0,n.jsx)(u.j8w,{onClick:()=>h(!0),"data-testid":"add-system-btn",addable:!0})}),!!g&&(0,n.jsx)(D.R,{variant:"borderless",className:"w-full",autoFocus:!0,defaultOpen:!0,defaultValue:c||m,onBlur:e=>{var t;(null===(t=e.relatedTarget)||void 0===t?void 0:t.getAttribute("id"))!=="add-new-system"&&h(!1)},onAddSystem:w,onSelect:(e,t)=>C(e,t.label),loading:j}),f&&(0,n.jsx)(I.i,{isOpen:!0,onClose:()=>{p(!1)},onSuccessfulSubmit:(e,t)=>C(e,t,!0)})]})},$=e=>{let{readonly:t}=e,s=(0,c.Cl)(),a=[s.accessor(e=>e.name,{id:"name",cell:e=>(0,n.jsx)(f.G3,{value:e.getValue()}),header:"Asset",size:300,meta:{headerProps:{paddingLeft:"0px"},cellProps:{padding:"0 !important"}}}),s.accessor(e=>e.resource_type,{id:"resource_type",cell:e=>(0,n.jsx)(f.G3,{value:e.getValue()}),header:"Type"}),s.accessor(e=>e.system,{id:"system",cell:e=>!!e.row.original.monitor_config_id&&(0,n.jsx)(Z,{aggregateSystem:e.row.original,monitorConfigId:e.row.original.monitor_config_id,readonly:t}),header:"System",size:200,meta:{noPadding:!0}}),s.display({id:"data_use",cell:e=>(0,n.jsx)(z,{asset:e.row.original,readonly:t}),header:"Categories of consent",size:400,meta:{disableRowClick:!0}}),s.accessor(e=>e.locations,{id:"locations",cell:e=>(0,n.jsx)(E.mb,{values:e.getValue().map(e=>{var t;return{label:null!==(t=P.Z8[e])&&void 0!==t?t:e,key:e}}),cellProps:e}),header:"Locations",size:300,meta:{showHeaderMenu:!0,disableRowClick:!0}}),s.accessor(e=>e.domain,{id:"domain",cell:e=>(0,n.jsx)(f.G3,{value:e.getValue()}),header:"Domain"}),s.accessor(e=>e.page,{id:"page",cell:e=>(0,n.jsx)(E.tc,{values:e.getValue(),valueSuffix:"pages",cellProps:e}),header:e=>(0,n.jsx)(E.Rr,{value:"Detected on",...e}),meta:{showHeaderMenu:!0,disableRowClick:!0}})];return t?{columns:a}:{columns:[s.display({id:"select",cell:e=>{let{row:t}=e;return(0,n.jsx)(f.k,{isChecked:t.getIsSelected(),onChange:t.getToggleSelectedHandler(),dataTestId:"select-".concat(t.original.name||t.id)})},header:e=>{let{table:t}=e;return(0,n.jsx)(f.k,{isChecked:t.getIsAllPageRowsSelected(),isIndeterminate:t.getIsSomeRowsSelected(),onChange:t.getToggleAllRowsSelectedHandler(),dataTestId:"select-all-rows"})},maxSize:40,meta:{cellProps:{borderRight:"none"}}}),...a,s.display({id:"actions",cell:e=>(0,n.jsx)(M,{asset:e.row.original}),header:"Actions",meta:{disableRowClick:!0}})]}},V=e=>{let{monitorId:t,systemId:s,onSystemName:i}=e,l=(0,a.useRouter)(),m=l.asPath.split("#")[1],[x,j]=(0,r.useState)(s),[b,_]=(0,r.useState)({}),[w,C]=(0,r.useState)(!1),[D,I]=(0,r.useState)(!1),[A,{isLoading:P}]=(0,p.EY)(),[E,{isLoading:M}]=(0,p.nS)(),[N,{isLoading:q}]=(0,p.rs)(),[z,{isLoading:O}]=(0,p.sX)(),[U,{isLoading:Z}]=(0,p.Vr)(),[V,{isLoading:H}]=(0,p.Tj)(),B=P||M||q||O||H,F=B||s===o.Kl,{PAGE_SIZES:J,pageSize:K,setPageSize:W,onPreviousPageClick:G,isPreviousPageDisabled:Y,onNextPageClick:X,isNextPageDisabled:Q,startRange:ee,endRange:et,pageIndex:es,setTotalPages:en,resetPageIndexToDefault:ea}=(0,f.oi)(),[er,ei]=(0,r.useState)(""),{successAlert:eo,errorAlert:el}=(0,v.V)();(0,r.useEffect)(()=>{ea()},[t,er,ea]);let{filterTabs:ed,filterTabIndex:ec,onTabChange:eu,activeParams:em,actionsDisabled:eg}=(0,R.Z)({systemId:s,initialHash:m}),{data:eh,isLoading:ey,isFetching:ev}=(0,p.WJ)({key:t,page:es,size:K,search:er,...em});(0,r.useEffect)(()=>{if(eh){var e;let t=(null===(e=eh.items[0])||void 0===e?void 0:e.system)||x||s||"";en(eh.pages||1),j(t),null==i||i(t)}},[eh,s,i,en,x]);let{columns:ef}=$({readonly:eg}),ep=(0,d.b7)({getCoreRowModel:(0,c.sC)(),columns:ef,manualPagination:!0,data:(null==eh?void 0:eh.items)||[],columnResizeMode:"onChange",onRowSelectionChange:_,state:{rowSelection:b}}),ex=ep.getSelectedRowModel().rows.map(e=>e.original.urn),ej=async()=>{let e=await A({urnList:ex});(0,y.D4)(e)?el((0,y.e$)(e.error)):(ep.resetRowSelection(),eo("".concat(ex.length," assets from ").concat(x," have been added to the system inventory."),"Confirmed"))},eb=async e=>{if("string"==typeof(null==e?void 0:e.value)){let s=await z({monitorId:t,urnList:ex,systemKey:e.value});(0,y.D4)(s)?el((0,y.e$)(s.error)):(ep.resetRowSelection(),eo("".concat(ex.length," assets have been assigned to ").concat(e.label,"."),"Confirmed"))}C(!1)},e_=async e=>{let s=null==eh?void 0:eh.items.filter(e=>ex.includes(e.urn));if(!s)return;let n=s.map(t=>{let s=g()([...t.user_assigned_data_uses||t.data_uses||[],...e]);return{urn:t.urn,user_assigned_data_uses:s}}),a=await U({monitorId:t,assets:n});(0,y.D4)(a)?el((0,y.e$)(a.error)):(ep.resetRowSelection(),eo("Consent categories added to ".concat(ex.length," assets").concat(x?" from ".concat(x):"","."),"Confirmed")),I(!1)},ew=async()=>{let e=await E({urnList:ex});(0,y.D4)(e)?el((0,y.e$)(e.error)):(ep.resetRowSelection(),eo(x===o.Kl?"".concat(ex.length," uncategorized assets have been ignored and will not appear in future scans."):"".concat(ex.length," assets from ").concat(x," have been ignored and will not appear in future scans."),"Confirmed"))},eC=async()=>{let e=await V({urnList:ex});(0,y.D4)(e)?el((0,y.e$)(e.error)):(ep.resetRowSelection(),eo("".concat(ex.length," assets have been restored and will appear in future scans."),"Confirmed"))},eS=async()=>{let e=(null==eh?void 0:eh.items.length)||0,n=await N({monitor_config_key:t,resolved_system_ids:[s]});(0,y.D4)(n)?el((0,y.e$)(n.error)):(l.push("".concat(o.vi,"/").concat(t)),eo("".concat(e," assets from ").concat(x," have been added to the system inventory."),"Confirmed"))};return t&&s?ey?(0,n.jsx)(f.I4,{rowHeight:36,numRows:36}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(h.Z,{data:ed,"data-testid":"filter-tabs",index:ec,isLazy:!0,isManual:!0,onChange:e=>{eu(e),_({})}}),(0,n.jsxs)(f.Q$,{children:[(0,n.jsx)(k.f,{value:er,onChange:ei,placeholder:"Search by asset name..."}),(0,n.jsxs)(u.kCb,{alignItems:"center",children:[!!ex.length&&(0,n.jsx)(u.xvT,{fontSize:"xs",fontWeight:"semibold",minW:16,mr:6,"data-testid":"selected-count",children:"".concat(ex.length," selected")}),(0,n.jsxs)(u.Ugi,{children:[(0,n.jsxs)(u.v2r,{children:[(0,n.jsx)(u.j2t,{as:u.wpx,icon:(0,n.jsx)(u.PJP._ME,{}),iconPosition:"end",loading:B,"data-testid":"bulk-actions-menu",disabled:!ex.length||B||eg,type:"primary",children:"Actions"}),(0,n.jsxs)(u.qyq,{children:[(0,n.jsx)(u.sNh,{fontSize:"small",onClick:ej,"data-testid":"bulk-add",children:"Add"}),(0,n.jsx)(u.sNh,{fontSize:"small",onClick:()=>I(!0),"data-testid":"bulk-add-data-use",children:"Add consent category"}),(0,n.jsx)(u.sNh,{fontSize:"small",onClick:()=>{C(!0)},"data-testid":"bulk-assign-system",children:"Assign system"}),!em.diff_status.includes(T.LL.MUTED)&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(u.RaW,{}),(0,n.jsx)(u.sNh,{fontSize:"small",onClick:ew,"data-testid":"bulk-ignore",children:"Ignore"})]}),em.diff_status.includes(T.LL.MUTED)&&(0,n.jsx)(u.sNh,{fontSize:"small",onClick:eC,"data-testid":"bulk-restore",children:"Restore"})]})]}),(0,n.jsx)(u.esZ,{title:F?"These assets require a system before you can add them to the inventory.":void 0,children:(0,n.jsx)(u.wpx,{onClick:eS,disabled:F,loading:q,type:"primary",icon:(0,n.jsx)(u.PJP.MCw,{}),iconPosition:"end","data-testid":"add-all",children:"Add all"})})]})]})]}),(0,n.jsx)(f.ZK,{tableInstance:ep,emptyTableNotice:(0,n.jsx)(u.oj8,{image:u.oj8.PRESENTED_IMAGE_SIMPLE,description:"All caught up!"})}),(0,n.jsx)(f.s8,{totalRows:(null==eh?void 0:eh.total)||0,pageSizes:J,setPageSize:W,onPreviousPageClick:G,isPreviousPageDisabled:Y||ev,onNextPageClick:X,isNextPageDisabled:Q||ev,startRange:ee,endRange:et}),(0,n.jsx)(L,{isOpen:w,onClose:()=>{C(!1)},onSave:eb,isSaving:O}),(0,n.jsx)(S,{isOpen:D,onClose:()=>{I(!1)},onSave:e_,isSaving:Z})]}):null};var H=()=>{let e=(0,a.useRouter)(),t=decodeURIComponent(e.query.monitorId),s=decodeURIComponent(e.query.systemId),[d,c]=(0,r.useState)(s===o.Kl?"Uncategorized assets":s);return(0,n.jsxs)(i.Z,{title:"Action center - Discovered assets",children:[(0,n.jsx)(l.Z,{heading:"Action center",breadcrumbItems:[{title:"All activity",href:o.vi},{title:t,href:"".concat(o.vi,"/").concat(t)},{title:s===o.Kl?"Uncategorized assets":d}]}),(0,n.jsx)(V,{monitorId:t,systemId:s,onSystemName:c})]})}},31883:function(e,t,s){"use strict";s.d(t,{Bw:function(){return n.Bw},D4:function(){return n.D4}});var n=s(19043)}},function(e){e.O(0,[8033,6060,2858,2866,9278,4481,9719,401,3503,2888,9774,179],function(){return e(e.s=25654)}),_N_E=e.O()}]);