import{_ as se}from"./nuxt-link.p-22Vb__.js";import{n as oe,u as D,r as c,v as P,q as y,A as ae,w as i,B as le,o as m,d as p,a as s,b as n,y as o,C as N,D as j,t as A,c as w,s as F,F as J,x as Q,z as ie}from"./entry.DZxwSL9U.js";import{r as k,h as x}from"./http-error-handling.BbcmLHJS.js";import{i as ne,a as re,b as de,c as ue,d as ce}from"./artifact-validation.Df82e6rq.js";const pe=s("title",null,"Artifact Store",-1),me={style:{display:"flex"}},he={class:"model-version-div"},_e=s("br",null,null,-1),ve={class:"model-version-div"},be=s("br",null,null,-1),fe=s("div",null,null,-1),ye={class:"scrollable-table-div"},we=s("p",null," A negotiation card is a document with a series of discussion points to be documented during a negotiation between all project stakeholders at the project's outset. It is then used as a reference throughout development and is updated at prescribed negotiation points. ",-1),ge={class:"table usa-table usa-table--borderless"},Ee=s("thead",null,[s("tr",null,[s("th",{"data-sortable":"",scope:"col",role:"columnheader"},"ID"),s("th",{"data-sortable":"",scope:"col",role:"columnheader"},"Timestamp"),s("th",{scope:"col"},"Actions")])],-1),Ve={scope:"row"},Re={key:0,style:{float:"left",color:"red"}},Te={class:"scrollable-table-div"},Ae=s("p",null," A report is a human and machine-readable summary of all knowledge gained about a model during the MLTE process. ",-1),ke={class:"table usa-table usa-table--borderless"},xe=s("thead",null,[s("tr",null,[s("th",{"data-sortable":"",scope:"col",role:"columnheader"},"ID"),s("th",{"data-sortable":"",scope:"col",role:"columnheader"},"Timestamp"),s("th",{scope:"col"},"Actions")])],-1),Ue={scope:"row"},Ie={key:0,style:{float:"left",color:"red"}},Se={class:"scrollable-table-div"},qe=s("p",null," A test suite defines the model requirements that must be satisfied to ensure successful integration with the target system. ",-1),Ce={class:"scrollable-table-div"},Me=s("p",null," Test Results are produced by combining a specification with its corresponding results; this artifact communicates how well a model performed against all of its requirements. ",-1),Le={class:"scrollable-table-div"},Be=s("p",null," Evidences are the atomic unit of model evaluation in MLTE. A value is any artifact produced by a MLTE measurement for the purposes of model evaluation. ",-1),Oe=oe({__name:"index",async setup($e){let h,_;const g=ie(),E=D("token"),v=c(""),b=c(""),V=c([]),f=c([]),I=c([]),r=D("selectedModel",{decode:!1});r.value=r.value||"";const u=D("selectedVersion",{decode:!1});u.value=u.value||"";const W=c([{id:"id",label:"ID",sortable:!0},{id:"timestamp",label:"Timestamp",sortable:!0}]),X=c([{id:"id",label:"ID",sortable:!0},{id:"specid",label:"SpecID",sortable:!0},{id:"timestamp",label:"Timestamp",sortable:!0}]),Y=c([{id:"id",label:"ID",sortable:!0},{id:"measurement",label:"Measurement",sortable:!0},{id:"type",label:"Type",sortable:!0},{id:"timestamp",label:"Timestamp",sortable:!0}]),S=c([]),q=c([]),C=c([]),M=c([]),L=c([]);[h,_]=P(()=>z()),await h,_(),V.value!==null&&(V.value.map(e=>e.value).includes(r.value)||(r.value="",u.value=""),r.value!==""&&([h,_]=P(()=>B(r.value,!1)),await h,_(),f.value.map(d=>d.value).includes(u.value)||(u.value=""),u.value!==""&&([h,_]=P(()=>H(u.value)),await h,_())));async function z(){await $fetch(g.public.apiPath+"/user/me/models/",{retry:0,method:"GET",headers:{Authorization:"Bearer "+E.value},onRequestError(){k()},onResponse({response:a}){a.ok&&(I.value=a._data)},onResponseError({response:a}){x(a.status,a._data.error_description)}}),V.value=[],I.value&&I.value.forEach(a=>{V.value.push({value:a,text:a})})}async function B(a,e){if(r.value=a,e&&(u.value=""),a===""){f.value=[],U();return}await $fetch(g.public.apiPath+"/model/"+a+"/version",{retry:0,method:"GET",headers:{Authorization:"Bearer "+E.value},onRequestError(){k()},onResponse({response:d}){d.ok&&d._data&&(U(),r.value=a,f.value=[],d._data.forEach(t=>{f.value.push({value:t,text:t})}))},onResponseError({response:d}){x(d.status,d._data.error_description)}}),f.value.sort(function(d,t){return d.value<t.value?-1:d.value>t.value?1:0})}async function H(a){if(u.value=a,a===""){U();return}await $fetch(g.public.apiPath+"/model/"+r.value+"/version/"+a+"/artifact",{retry:0,method:"GET",headers:{Authorization:"Bearer "+E.value},onRequestError(){k()},onResponse({response:e}){e.ok&&e._data&&(u.value=a,Z(r.value,u.value,e._data))},onResponseError({response:e}){x(e.status,e._data.error_description)}})}function Z(a,e,d){U(),d.forEach(t=>{t.header.timestamp=new Date(t.header.timestamp*1e3).toLocaleString("en-US"),t.header.type==="negotiation_card"?ne(t)&&S.value.push({id:t.header.identifier,timestamp:t.header.timestamp,model:a,version:e}):t.header.type==="report"?re(t)&&C.value.push({id:t.header.identifier,timestamp:t.header.timestamp,model:a,version:e}):t.header.type==="test_suite"?de(t)&&q.value.push({id:t.header.identifier,timestamp:t.header.timestamp,model:a,version:e}):t.header.type==="test_results"&&ue(t)&&M.value.push({id:t.header.identifier,specid:t.body.spec_identifier,timestamp:t.header.timestamp,model:a,version:e}),t.header.type==="value"&&ce(t)&&L.value.push({id:t.header.identifier.slice(0,-6),measurement:t.body.metadata.measurement_type,type:t.body.value.value_type,timestamp:t.header.timestamp,model:a,version:e})})}function U(){S.value=[],C.value=[],q.value=[],M.value=[],L.value=[]}async function O(a){try{await $fetch(g.public.apiPath+"/model/",{retry:0,method:"POST",headers:{Authorization:"Bearer "+E.value},body:{identifier:a},onRequestError(){k()},onResponse({response:e}){e.ok&&(z(),alert(`Model, ${a} has been created.`),v.value="")},onResponseError({response:e}){x(e.status,e._data.error_description)}})}catch{}}async function G(a,e){try{await $fetch(g.public.apiPath+"/model/"+a+"/version",{retry:0,method:"POST",headers:{Authorization:"Bearer "+E.value},body:{identifier:e},onRequestError(){k()},onResponse({response:d}){d.ok&&(B(a,!1),alert(`Version, ${e} for model, ${a} has been created`),b.value="")},onResponseError({response:d}){x(d.status,d._data.error_description)}})}catch{}}return(a,e)=>{const d=y("UsaTextInput"),t=y("UsaButton"),K=y("UsaSelect"),R=se,T=y("UsaAccordionItem"),$=y("UsaTable"),ee=y("UsaAccordion"),te=le;return m(),ae(te,{name:"base-layout"},{"page-title":i(()=>[p("Artifact Store")]),"right-sidebar":i(()=>[s("div",null,[n(d,{modelValue:o(v),"onUpdate:modelValue":e[0]||(e[0]=l=>N(v)?v.value=l:null),onKeyup:e[1]||(e[1]=j(l=>O(o(v)),["enter"]))},{label:i(()=>[p(" New Model ")]),_:1},8,["modelValue"]),n(t,{class:"secondary-button margin-button",style:{"margin-left":"0px"},onClick:e[2]||(e[2]=l=>O(o(v)))},{default:i(()=>[p(" Create Model ")]),_:1}),n(d,{modelValue:o(b),"onUpdate:modelValue":e[3]||(e[3]=l=>N(b)?b.value=l:null),disabled:o(r)==="",onKeyup:e[4]||(e[4]=j(l=>G(o(r),o(b)),["enter"]))},{label:i(()=>[p(" New Version for: "+A(o(r)),1)]),_:1},8,["modelValue","disabled"]),n(t,{class:"secondary-button margin-button",style:{"margin-left":"0px"},onClick:e[5]||(e[5]=l=>G(o(r),o(b)))},{default:i(()=>[p(" Create Version ")]),_:1})])]),default:i(()=>[pe,s("div",me,[s("div",he,[n(K,{options:o(V),"model-value":o(r),"onUpdate:modelValue":e[6]||(e[6]=l=>B(l,!0))},{label:i(()=>[p("Model")]),_:1},8,["options","model-value"]),_e]),s("div",ve,[n(K,{options:o(f),"model-value":o(u),"onUpdate:modelValue":e[7]||(e[7]=l=>H(l))},{label:i(()=>[p("Version")]),_:1},8,["options","model-value"]),be]),fe]),n(ee,{multiselectable:"",bordered:""},{default:i(()=>[n(T,{label:"Negotiation Cards"},{default:i(()=>[s("div",ye,[we,s("table",ge,[Ee,s("tbody",null,[(m(!0),w(J,null,F(o(S),l=>(m(),w("tr",{key:l.id},[s("th",Ve,A(l.id),1),s("td",null,A(l.timestamp),1),s("td",null,[n(R,{to:{path:"/negotiation-card",query:{model:l.model,version:l.version,artifactId:l.id}}},{default:i(()=>[n(t,{class:"primary-button"},{default:i(()=>[p(" Edit ")]),_:1})]),_:2},1032,["to"])])]))),128))])]),n(R,{to:{path:"/negotiation-card",query:{model:o(r),version:o(u)}}},{default:i(()=>[n(t,{disabled:o(r)===""||o(u)==="",class:"primary-button",style:{float:"left"}},{default:i(()=>[p(" New ")]),_:1},8,["disabled"])]),_:1},8,["to"]),o(r)===""||o(u)===""?(m(),w("p",Re," Select a model and version to start a new negotiation card here. ")):Q("",!0)])]),_:1}),n(T,{label:"Reports"},{default:i(()=>[s("div",Te,[Ae,s("table",ke,[xe,s("tbody",null,[(m(!0),w(J,null,F(o(C),l=>(m(),w("tr",{key:l.id},[s("th",Ue,A(l.id),1),s("td",null,A(l.timestamp),1),s("td",null,[n(R,{to:{path:"/report-form",query:{model:l.model,version:l.version,artifactId:l.id}}},{default:i(()=>[n(t,{class:"primary-button"},{default:i(()=>[p(" Edit ")]),_:1})]),_:2},1032,["to"]),n(R,{target:"_blank",to:{path:"/report-export",query:{model:l.model,version:l.version,artifactId:l.id}}},{default:i(()=>[n(t,{class:"primary-button"},{default:i(()=>[p(" Export ")]),_:1})]),_:2},1032,["to"])])]))),128))])]),n(R,{to:{path:"/report-form",query:{model:o(r),version:o(u)}}},{default:i(()=>[n(t,{disabled:o(r)===""||o(u)==="",class:"primary-button",style:{float:"left"}},{default:i(()=>[p(" New ")]),_:1},8,["disabled"])]),_:1},8,["to"]),o(r)===""||o(u)===""?(m(),w("p",Ie," Select a model and version to start a new report. ")):Q("",!0)])]),_:1}),n(T,{label:"Test Suites"},{default:i(()=>[s("div",Se,[qe,n($,{headers:o(W),rows:o(q),borderless:"",class:"table"},null,8,["headers","rows"])])]),_:1}),n(T,{label:"Test Results"},{default:i(()=>[s("div",Ce,[Me,n($,{headers:o(X),rows:o(M),borderless:"",class:"table"},null,8,["headers","rows"])])]),_:1}),n(T,{label:"Evidences"},{default:i(()=>[s("div",Le,[Be,n($,{headers:o(Y),rows:o(L),borderless:"",class:"table"},null,8,["headers","rows"])])]),_:1})]),_:1})]),_:1})}}});export{Oe as default};
