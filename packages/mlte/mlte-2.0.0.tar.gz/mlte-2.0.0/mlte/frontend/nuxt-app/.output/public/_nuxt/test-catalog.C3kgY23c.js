import{n as M,q as x,o as h,c as b,F as G,s as H,a as u,t as w,x as z,b as n,w as t,d as l,_ as le,A as Z,u as X,r as v,v as L,y,z as Y,B as oe,C as F,D as W}from"./entry.DZxwSL9U.js";import{_ as ne}from"./info-icon.B7PzMJGc.js";import{u as Q}from"./fetch.DQpSruNE.js";import{r as se}from"./util.B0gNYUhE.js";import{i as re}from"./form-methods.CkGHM49X.js";import{r as A,h as k}from"./http-error-handling.BbcmLHJS.js";const ue={class:"table usa-table usa-table--borderless"},ie=u("thead",null,[u("tr",null,[u("th",{"data-sortable":"",scope:"col",role:"columnheader"},"Identifier"),u("th",{"data-sortable":"",scope:"col",role:"columnheader"},"Catalog"),u("th",{"data-sortable":"",scope:"col",role:"columnheader"},"Tags"),u("th",{"data-sortable":"",scope:"col",role:"columnheader"}," Quality Attribute Category "),u("th",{"data-sortable":"",scope:"col",role:"columnheader"},"Code Type"),u("th",{"data-sortable":"",scope:"col",role:"columnheader"},"Actions")])],-1),de={key:0},ce=M({__name:"entry-list",props:{modelValue:{type:Array,required:!0,default:[]}},emits:["addEntry","editEntry","deleteEntry"],setup(i,{emit:E}){return(c,g)=>{const d=x("UsaButton");return h(),b("table",ue,[ie,(h(!0),b(G,null,H(i.modelValue,(p,V)=>(h(),b("tr",{key:V},[u("td",null,w(p.header.identifier),1),u("td",null,w(p.header.catalog_id),1),u("td",null,[(h(!0),b(G,null,H(p.tags,(_,f)=>(h(),b("span",{key:f},[u("span",null,w(_),1),f+1<p.tags.length?(h(),b("span",de,", ")):z("",!0)]))),128))]),u("td",null,w(p.qa_category),1),u("td",null,w(p.code_type),1),u("td",null,[n(d,{class:"secondary-button",onClick:_=>c.$emit("editEntry",p)},{default:t(()=>[l(" Edit ")]),_:2},1032,["onClick"]),n(d,{class:"usa-button usa-button--secondary",onClick:_=>c.$emit("deleteEntry",p.header.catalog_id,p.header.identifier)},{default:t(()=>[l(" Delete ")]),_:2},1032,["onClick"])])]))),128))])}}}),me="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M16%201H4c-1.1%200-2%20.9-2%202v14h2V3h12V1zm3%204H8c-1.1%200-2%20.9-2%202v14c0%201.1.9%202%202%202h11c1.1%200%202-.9%202-2V7c0-1.1-.9-2-2-2zm0%2016H8V7h11v14z'/%3e%3c/svg%3e",pe={},fe=u("img",{src:me,class:"inline-icon usa-icon"},null,-1);function ye(i,E){const c=x("UsaButton");return h(),Z(c,{variant:"unstyled",class:"inline-icon"},{default:t(()=>[fe]),_:1})}const he=le(pe,[["render",ye]]),ge={key:0},_e={class:"section-header"},ve=u("h3",{style:{display:"inline"}},"Created by:",-1),Ve={key:1},be={class:"multi-line-checkbox-div"},Ee={class:"usa-label"},Ce={class:"submit-footer"},xe=M({__name:"entry-edit",props:{modelValue:{type:Object,required:!0,default:{header:{identifier:"",creator:"",created:-1,updated:-1,catalog_id:""},tags:[],qa_category:"",quality_attribute:"",code_type:"",code:"",description:"",inputs:"",output:""}},newEntryFlag:{type:Boolean,required:!0,default:!1}},emits:["cancel","submit","updateEntry"],async setup(i,{emit:E}){let c,g;const d=i,p=Y(),V=X("token"),_=v("");_.value=new Date(d.modelValue.header.created*1e3).toLocaleString("en-US");const f=v({catalog:!1,identifier:!1,code_type:!1}),$=v([]),{data:U}=([c,g]=L(()=>Q(p.public.apiPath+"/catalogs",{method:"GET",headers:{Authorization:"Bearer "+V.value}},"$73CHxE7yZg")),c=await c,g(),c);U.value&&U.value.forEach(o=>{o.read_only||$.value.push({value:o.id,text:o.id+" ("+o.type.replaceAll("_"," ")+")"})});const q=v([]),{data:P}=([c,g]=L(()=>Q(p.public.apiPath+"/custom_list/qa_categories/",{method:"GET",headers:{Authorization:"Bearer "+V.value}},"$1LWd9x4JSe")),c=await c,g(),c);P.value&&P.value.forEach(o=>{q.value.push({value:o.name,text:o.name,description:o.description,parent:o.parent})});const B=v([]),O=v([]),{data:N}=([c,g]=L(()=>Q(p.public.apiPath+"/custom_list/quality_attributes/",{method:"GET",headers:{Authorization:"Bearer "+V.value}},"$1Go5msJzwB")),c=await c,g(),c);N.value&&N.value.forEach(o=>{O.value.push({value:o.name,text:o.name,description:o.description,parent:o.parent})});const D=v([{name:"Audio Analysis",selected:!1},{name:"Classification",selected:!1},{name:"Computer Vision",selected:!1},{name:"Decoder",selected:!1},{name:"Encoder",selected:!1},{name:"General",selected:!1},{name:"Generative Model",selected:!1},{name:"Infrared",selected:!1},{name:"NLP",selected:!1},{name:"Object Detection",selected:!1},{name:"Sentiment Analysis",selected:!1},{name:"Regression",selected:!1},{name:"Segmentation",selected:!1},{name:"Tabular",selected:!1},{name:"Time Series",selected:!1}]),a=v([{value:"measurement",text:"Measurement"},{value:"validation",text:"Validation "}]);D.value.forEach(o=>{d.modelValue.tags.find(e=>e===o.name)&&(o.selected=!0)}),R(d.modelValue.qa_category,d.modelValue.quality_attribute);async function s(){f.value=se(f.value);let o=!1;if(d.modelValue.header.catalog_id===""&&(f.value.catalog=!0,o=!0),d.modelValue.header.identifier===""&&(f.value.identifier=!0,o=!0),d.modelValue.code_type===""&&(f.value.code_type=!0,o=!0),o){re();return}emit("submit",d.modelValue)}function C(o,e){if(o)d.modelValue.tags.push(e),d.modelValue.tags.sort();else{const m=d.modelValue.tags.find(S=>S.name===e.name),T=d.modelValue.tags.indexOf(m);d.modelValue.tags.splice(T,1)}}function R(o,e){B.value=[],O.value.forEach(m=>{m.parent==o&&B.value.push(m)}),typeof e>"u"?d.modelValue.quality_attribute="":d.modelValue.quality_attribute=e}function I(){navigator.clipboard.writeText(d.modelValue.code)}return(o,e)=>{const m=ne,T=x("UsaSelect"),S=x("UsaTextInput"),ee=x("UsaCheckbox"),te=he,j=x("UsaTextarea"),K=x("UsaButton");return h(),b("div",null,[i.newEntryFlag?z("",!0):(h(),b("div",ge,[u("h1",_e,w(i.modelValue.header.identifier),1),ve,l(" "+w(i.modelValue.header.creator)+" - "+w(y(_)),1)])),i.newEntryFlag?(h(),b("div",Ve,[n(T,{modelValue:i.modelValue.header.catalog_id,"onUpdate:modelValue":e[0]||(e[0]=r=>i.modelValue.header.catalog_id=r),options:y($),error:y(f).catalog,onChange:e[1]||(e[1]=r=>y(f).catalog=!1)},{label:t(()=>[l(" Catalog "),n(m,null,{default:t(()=>[l(" Catalog where test example will be stored. ")]),_:1})]),"error-message":t(()=>[l("A catalog must be selected")]),_:1},8,["modelValue","options","error"]),n(S,{modelValue:d.modelValue.header.identifier,"onUpdate:modelValue":e[2]||(e[2]=r=>d.modelValue.header.identifier=r),error:y(f).identifier},{label:t(()=>[l(" Identifier "),n(m,null,{default:t(()=>[l(" User-defined identifier for the test example. ")]),_:1})]),"error-message":t(()=>[l("Identifier is required.")]),_:1},8,["modelValue","error"])])):z("",!0),u("div",be,[u("label",Ee,[l(" Tags "),n(m,null,{default:t(()=>[l(" System-defined tags that are used in catalog search. Select as many as are relevant to the test example. ")]),_:1})]),(h(!0),b(G,null,H(y(D),(r,ae)=>(h(),b("span",{key:ae,class:"multiple-per-line-checkbox"},[n(ee,{modelValue:r.selected,"onUpdate:modelValue":[J=>r.selected=J,J=>C(r.selected,r.name)]},{default:t(()=>[l(w(r.name),1)]),_:2},1032,["modelValue","onUpdate:modelValue"])]))),128))]),n(T,{modelValue:i.modelValue.qa_category,"onUpdate:modelValue":e[3]||(e[3]=r=>i.modelValue.qa_category=r),options:y(q),onChange:e[4]||(e[4]=r=>R(i.modelValue.qa_category))},{label:t(()=>[l(" Quality Attribute Category "),n(m,null,{default:t(()=>[l(" High-level quality attribute category that the test example is validating, e.g., functional correctness, performance, robustness. ")]),_:1})]),"error-message":t(()=>[l("Not defined")]),_:1},8,["modelValue","options"]),n(T,{modelValue:i.modelValue.quality_attribute,"onUpdate:modelValue":e[5]||(e[5]=r=>i.modelValue.quality_attribute=r),options:y(B)},{label:t(()=>[l(" Quality Attribute "),n(m,null,{default:t(()=>[l(" More specific quality attribute that the test example is validating, e.g., accuracy, inference time, robustness to image blur. ")]),_:1})]),"error-message":t(()=>[l("Not defined")]),_:1},8,["modelValue","options"]),n(T,{modelValue:i.modelValue.code_type,"onUpdate:modelValue":e[6]||(e[6]=r=>i.modelValue.code_type=r),error:y(f).code_type,options:y(a),onChange:e[7]||(e[7]=r=>y(f).code_type=!1)},{label:t(()=>[l("Code Type")]),"error-message":t(()=>[l("Code Type must be selected")]),_:1},8,["modelValue","error","options"]),n(j,{modelValue:i.modelValue.code,"onUpdate:modelValue":e[9]||(e[9]=r=>i.modelValue.code=r),style:{resize:"both",width:"30rem","max-width":"100%"}},{label:t(()=>[l(" Code "),n(m,null,{default:t(()=>[l(" Code for the test example. ")]),_:1}),n(te,{onClick:e[8]||(e[8]=r=>I())})]),"error-message":t(()=>[l("Not defined")]),_:1},8,["modelValue"]),n(j,{modelValue:i.modelValue.description,"onUpdate:modelValue":e[10]||(e[10]=r=>i.modelValue.description=r),style:{resize:"both",width:"30rem","max-width":"100%"}},{label:t(()=>[l(" Description "),n(m,null,{default:t(()=>[l(" Description of the test example. ")]),_:1})]),"error-message":t(()=>[l("Not defined")]),_:1},8,["modelValue"]),n(S,{modelValue:i.modelValue.inputs,"onUpdate:modelValue":e[11]||(e[11]=r=>i.modelValue.inputs=r)},{label:t(()=>[l(" Inputs "),n(m,null,{default:t(()=>[l(" Inputs that are required to run the test example, e.g., data sets, parameters. ")]),_:1})]),"error-message":t(()=>[l("Not defined")]),_:1},8,["modelValue"]),n(S,{modelValue:i.modelValue.output,"onUpdate:modelValue":e[12]||(e[12]=r=>i.modelValue.output=r)},{label:t(()=>[l(" Output "),n(m,null,{default:t(()=>[l(" Output of the test example, e.g., value, log entry, database entry, alert. ")]),_:1})]),"error-message":t(()=>[l("Not defined")]),_:1},8,["modelValue"]),u("div",Ce,[n(K,{class:"primary-button",onClick:e[13]||(e[13]=r=>o.$emit("cancel"))},{default:t(()=>[l(" Cancel ")]),_:1}),n(K,{class:"primary-button",onClick:s},{default:t(()=>[l(" Save ")]),_:1})])])}}}),we="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M15.5%2014h-.79l-.28-.27A6.471%206.471%200%200%200%2016%209.5%206.5%206.5%200%201%200%209.5%2016c1.61%200%203.09-.59%204.23-1.57l.27.28v.79l5%204.99L20.49%2019l-4.99-5zm-6%200C7.01%2014%205%2011.99%205%209.5S7.01%205%209.5%205%2014%207.01%2014%209.5%2011.99%2014%209.5%2014z'/%3e%3c/svg%3e",$e=u("title",null,"Test Catalog",-1),Ae={key:0},ke={class:"inline-input-left"},Ue=u("label",{class:"usa-label",style:{"margin-top":"0px"}}," Search by Tag ",-1),qe={class:"inline-input-right"},Te=u("label",{class:"usa-label",style:{"margin-top":"0px"}}," Search by Quality Attribute Category ",-1),Be={class:"inline-button"},Re=u("img",{src:we,class:"usa-icon"},null,-1),Se={key:1},Ie=M({__name:"test-catalog",setup(i){const E=Y(),c=X("token"),g=v(!1),d=v(!1),p=v(""),V=v(""),_=v([]),f=v({});$();async function $(){await $fetch(E.public.apiPath+"/catalogs/entry/search",{retry:0,method:"POST",headers:{Authorization:"Bearer "+c.value},body:{filter:{type:"all"}},onRequestError(){A()},onResponse({response:a}){a.ok&&(_.value=a._data)},onResponseError({response:a}){k(a.status,a._data.error_description)}})}async function U(){p.value===""&&V.value===""?$():V.value===""?await $fetch(E.public.apiPath+"/catalogs/entry/search",{retry:0,method:"POST",headers:{Authorization:"Bearer "+c.value},body:{filter:{type:"tag",name:"tags",value:p.value}},onRequestError(){A()},onResponse({response:a}){a.ok&&(_.value=a._data)},onResponseError({response:a}){k(a.status,a._data.error_description)}}):p.value===""?await $fetch(E.public.apiPath+"/catalogs/entry/search",{retry:0,method:"POST",headers:{Authorization:"Bearer "+c.value},body:{filter:{type:"property",name:"qa_category",value:V.value}},onRequestError(){A()},onResponse({response:a}){a.ok&&(_.value=a._data)},onResponseError({response:a}){k(a.status,a._data.error_description)}}):await $fetch(E.public.apiPath+"/catalogs/entry/search",{retry:0,method:"POST",headers:{Authorization:"Bearer "+c.value},body:{filter:{type:"and",filters:[{type:"tag",name:"tags",value:p.value},{type:"property",name:"qa_category",value:V.value}]}},onRequestError(){A()},onResponse({response:a}){a.ok&&(_.value=a._data)},onResponseError({response:a}){k(a.status,a._data.error_description)}})}function q(){f.value={header:{identifier:"",creator:"",created:-1,updated:-1,catalog_id:""},tags:[],qa_category:"",quality_attribute:"",code_type:"",code:"",description:"",inputs:"",output:""}}function P(){q(),g.value=!0,d.value=!0}function B(a){f.value=a,g.value=!0,d.value=!1}async function O(a,s){confirm("Are you sure you want to delete the entry: "+s+" in the "+a+" catalog?")&&await $fetch(E.public.apiPath+"/catalog/"+a+"/entry/"+s,{retry:0,method:"DELETE",headers:{Authorization:"Bearer "+c.value},onRequestError(){A()},onResponse({response:C}){C.ok&&$()},onResponseError({response:C}){k(C.status,C._data.error_description)}})}function N(){confirm("Are you sure you want to cancel? All changes will be lost.")&&(g.value=!1,q())}async function D(a){try{d.value?await $fetch(E.public.apiPath+"/catalog/"+a.header.catalog_id+"/entry",{retry:0,method:"POST",headers:{Authorization:"Bearer "+c.value},body:a,onRequestError(){A()},onResponse({response:s}){s.ok&&$()},onResponseError({response:s}){k(s.status,s._data.error_description)}}):await $fetch(E.public.apiPath+"/catalog/"+a.header.catalog_id+"/entry",{retry:0,method:"PUT",headers:{Authorization:"Bearer "+c.value},body:a,onRequestError(){A()},onResponse({response:s}){s.ok&&$()},onResponseError({response:s}){k(s.status,s._data.error_description)}})}catch{console.log("Error in submit.");return}alert("Entry has been saved successfully."),q(),g.value=!1}return(a,s)=>{const C=x("UsaButton"),R=x("UsaTextInput"),I=ce,o=xe,e=oe;return h(),Z(e,{name:"base-layout"},{"page-title":t(()=>[l("Test Catalog")]),default:t(()=>[$e,y(g)?z("",!0):(h(),b("div",Ae,[n(C,{class:"secondary-button sub-header-float-button",onClick:P},{default:t(()=>[l(" Add Catalog Entry ")]),_:1}),u("div",ke,[Ue,n(R,{modelValue:y(p),"onUpdate:modelValue":s[0]||(s[0]=m=>F(p)?p.value=m:null),onKeyup:s[1]||(s[1]=W(m=>U(),["enter"]))},null,8,["modelValue"])]),u("div",qe,[Te,n(R,{modelValue:y(V),"onUpdate:modelValue":s[2]||(s[2]=m=>F(V)?V.value=m:null),onKeyup:s[3]||(s[3]=W(m=>U(),["enter"]))},null,8,["modelValue"])]),u("div",Be,[n(C,{class:"usa-button--unstyled",onClick:s[4]||(s[4]=m=>U())},{default:t(()=>[Re]),_:1})]),n(I,{modelValue:y(_),"onUpdate:modelValue":s[5]||(s[5]=m=>F(_)?_.value=m:null),onEditEntry:B,onDeleteEntry:O},null,8,["modelValue"])])),y(g)?(h(),b("div",Se,[n(o,{modelValue:y(f),"onUpdate:modelValue":s[6]||(s[6]=m=>F(f)?f.value=m:null),"new-entry-flag":y(d),onCancel:N,onSubmit:D},null,8,["modelValue","new-entry-flag"])])):z("",!0)]),_:1})}}});export{Ie as default};
