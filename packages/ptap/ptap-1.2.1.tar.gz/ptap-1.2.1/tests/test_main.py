#already tested everything in main when working on it, but will add unit tests for this since it's the hardest part