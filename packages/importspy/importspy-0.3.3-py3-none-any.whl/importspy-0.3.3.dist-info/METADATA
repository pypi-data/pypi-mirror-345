Metadata-Version: 2.1
Name: importspy
Version: 0.3.3
Summary: ImportSpy ensures structural integrity, runtime compliance, and security for external modules, preventing inconsistencies and enforcing controlled execution.
License: MIT
Author: Luca Atella
Author-email: atellaluca@outlook.it
Requires-Python: >=3.10,<4.0
Classifier: License :: OSI Approved :: MIT License
Classifier: Programming Language :: Python :: 3
Classifier: Programming Language :: Python :: 3.10
Classifier: Programming Language :: Python :: 3.11
Classifier: Programming Language :: Python :: 3.12
Classifier: Programming Language :: Python :: 3.13
Requires-Dist: pydantic (>=2.9.2,<3.0.0)
Requires-Dist: ruamel-yaml (>=0.18.10,<0.19.0)
Requires-Dist: typer (>=0.15.2,<0.16.0)
Project-URL: Documentation, https://importspy.readthedocs.io
Project-URL: Repository, https://github.com/atellaluca/importspy
Description-Content-Type: text/x-rst

.. image:: https://img.shields.io/github/license/atellaluca/importspy
   :alt: License

.. image:: https://img.shields.io/pypi/v/importspy
   :target: https://pypi.org/project/importspy/
   :alt: PyPI Version

.. image:: https://img.shields.io/pypi/pyversions/importspy
   :alt: Supported Python Versions

.. image:: https://img.shields.io/github/actions/workflow/status/atellaluca/ImportSpy/python-package.yml
   :target: https://github.com/atellaluca/ImportSpy/actions/workflows/python-package.yml
   :alt: Build Status

.. image:: https://img.shields.io/readthedocs/importspy
   :target: https://importspy.readthedocs.io/
   :alt: Documentation Status

.. image:: ./assets/importspy-banner.png
   :alt: ImportSpy â€“ Runtime Contract Validation for Python
   :width: 500px

ImportSpy
=========

Contract-based import validation for Python modules.

*Runtime-safe, structure-aware, declarative.*

ImportSpy allows your Python modules to define explicit **import contracts**:  
rules about where, how, and by whom they can be safely imported â€” and blocks any import that doesnâ€™t comply.

ðŸ” Key Benefits
---------------

- âœ… Prevent import from unsupported environments
- âœ… Enforce structural expectations (classes, attributes, arguments)  
- âœ… Control who can use your module and how  
- âœ… Reduce runtime surprises across CI, staging, and production  
- âœ… Define everything in readable `.yml` contracts

ðŸ’¡ Why ImportSpy?
-----------------

Python is flexible, but uncontrolled imports can lead to:

- ðŸ”¥ Silent runtime failures
- ðŸ” Structural mismatches (wrong or missing methods/classes)
- ðŸŒ Inconsistent behavior across platforms
- ðŸš« Unauthorized usage of internal code

ImportSpy offers you **runtime import governance** â€” clearly defined, enforced in real-time.

ðŸ“ Architecture Highlight
-------------------------

.. image:: https://raw.githubusercontent.com/atellaluca/ImportSpy/refs/heads/main/assets/importspy-spy-model-architecture.png
   :alt: ImportSpy, SpyModel Architecture
   :width: 830

ImportSpy uses a layered model (`SpyModel`) that mirrors your execution context and module structure:

- `Runtime` â†’ defines architecture and system
- `System` â†’ declares OS and environment variables
- `Python` â†’ specifies interpreter, version, and modules
- `Module` â†’ lists classes, functions, variables (each represented as objects, not dicts)

Each element is introspected and validated dynamically, at runtime or via CLI.

ðŸ“œ Contract Example
-------------------

.. code-block:: yaml

   filename: plugin.py
   variables:
     - name: mode
       value: production
       annotation: str
   classes:
     - name: Plugin
       methods:
         - name: run
           arguments:
             - name: self
             - name: data
               annotation: dict
           return_annotation: None

ðŸ“¦ Installation
---------------

.. code-block:: bash

   pip install importspy

âœ… Requires Python 3.10+

ðŸ”’ Usage Modes
--------------

**Embedded Mode** â€“ the module protects itself:

.. image:: https://raw.githubusercontent.com/atellaluca/ImportSpy/refs/heads/main/assets/importspy-embedded-mode.png
   :alt: How ImportSpy Embedded Mode Works
   :width: 830

.. code-block:: python

   from importspy import Spy
   importer = Spy().importspy(filepath="spymodel.yml")
   importer.Plugin().run()

**CLI Mode** â€“ validate externally in CI/CD:

.. image:: https://raw.githubusercontent.com/atellaluca/ImportSpy/refs/heads/main/assets/importspy-works.png
   :alt: How ImportSpy CLI Mode Works
   :width: 830

.. code-block:: bash

   importspy -s spymodel.yml -l DEBUG path/to/module.py

ðŸ“š Features Overview
--------------------

- âœ… Runtime validation based on import contracts  
- âœ… YAML-based, declarative format  
- âœ… Fine-grained introspection of classes, functions, arguments  
- âœ… OS, architecture, interpreter matching  
- âœ… Full error messages, CI-friendly output  
- âœ… Supports embedded or external enforcement  
- âœ… Strong internal model (`SpyModel`) powered by `pydantic`

ðŸš€ Ideal Use Cases
------------------

- ðŸ›¡ï¸ Security-sensitive systems (finance, IoT, medical)  
- ðŸ§© Plugin-based architectures (CMS, CLI, extensions)  
- ðŸ§ª CI/CD pipelines with strict integration rules  
- ðŸ§± Frameworks with third-party extension points  
- ðŸ“¦ Package maintainers enforcing integration rules

ðŸ§  How It Works
---------------

1. Define your contract in `.yml` or Python.  
2. ImportSpy loads your module and introspects its importer.  
3. Runtime environment + structure are matched against the contract.  
4. If mismatch â†’ import blocked.  
   If valid â†’ import continues safely.

ðŸŽ¯ Tech Stack
-------------

- âœ… Pydantic 2.x â€“ contract validation engine  
- âœ… Typer â€“ CLI interface  
- âœ… ruamel.yaml â€“ YAML parsing  
- âœ… inspect + sys â€“ runtime context introspection  
- âœ… Poetry â€“ package + dependency management  
- âœ… Sphinx + ReadTheDocs â€“ full docs and architecture reference

ðŸ“˜ Documentation
----------------

- ðŸ”— Full Docs â†’ https://importspy.readthedocs.io/  
- ðŸ§± Model Overview â†’ https://importspy.readthedocs.io/en/latest/advanced/architecture_index.html  
- ðŸ§ª Use Cases â†’ https://importspy.readthedocs.io/en/latest/overview/use_cases_index.html

ðŸŒŸ Contribute & Support
-----------------------

- â­ Star â†’ https://github.com/atellaluca/ImportSpy  
- ðŸ›  Contribute via issues or PRs  
- ðŸ’– Sponsor â†’ https://github.com/sponsors/atellaluca  

ðŸ”¥ **Let your modules enforce their own rules.**  
Start importing with structure.

ðŸ“œ License
----------

MIT Â© 2024 â€“ Luca Atella

.. image:: ./assets/importspy-logo.png
   :alt: ImportSpy Logo
   :width: 100px
   :align: center

**ImportSpy** is an open-source project maintained with â¤ï¸ by `Luca Atella <https://www.linkedin.com/in/luca-atella/>`_.

