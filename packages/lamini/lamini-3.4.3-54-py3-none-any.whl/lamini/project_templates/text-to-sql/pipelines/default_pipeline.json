{"generators": {"pattern": {"class_type": "PatternQuestionGenerator", "name": "pattern", "model": "meta-llama/Llama-3.1-8B-Instruct", "role": "You are an expert at identifying and replicating question patterns.", "output_type": {"q1": "string", "q2": "string"}, "instruction": "\n            Task: Given the following original question, SQL query, schema, and glossary, generate 2 new questions that follow a similar structure and can be answered using the provided schema. The output SQL should be syntactically valid and correspond to the business context.\n\n            Input Format:\n\n                Original Question: {question}\n                Original SQL: {sql}\n                Schema: {schema}\n                Glossary: {glossary}\n\n            Guidelines for Generating New Questions:\n\n                Contextual Relevance: Ensure that the new questions reflect a business context similar to the original question. The context may be different but should stay within the realm of the schema's purpose.\n                SQL Query Validity: Ensure that the SQL queries generated are syntactically correct and align with the schema provided. Only valid queries should be generated.\n                Complexity Level: The new questions should have a similar complexity level to the original question. Keep in mind the difficulty of the query when generating the new questions.\n                Answerability with Schema: The generated questions should be answerable with the available schema, and you should only use the tables and columns described in the schema to generate your queries.\n\n            Please provide ONLY the new questions (in a clear, concise format) without any explanation or markdown formatting."}, "variation": {"class_type": "VariationQuestionGenerator", "name": "variation", "model": "meta-llama/Llama-3.1-8B-Instruct", "role": "You are an expert at creating meaningful variations of questions.", "output_type": {"q1": "string", "q2": "string"}, "instruction": "\n          Task: Given the following original question, SQL query, schema, and glossary, create 2 variations of the question by modifying certain aspects of the query.\n\n            Input Format:\n\n                Original Question: {question}\n                Original SQL: {sql}\n                Schema: {schema}\n                Glossary: {glossary}\n\n            Guidelines for Generating Variations:\n\n                Time Periods or Date Ranges: Modify the time periods or date ranges referenced in the question to change the scope (e.g., last month, this quarter, specific dates).\n                Add or Remove Conditions: Introduce new conditions or remove existing ones to slightly alter the question's focus (e.g., adding filters or eliminating some restrictions).\n                Change Aggregation Requirements: Adjust how data is aggregated (e.g., switch from a count to a sum, or change the way averages are calculated).\n                Adjust Grouping Criteria: Modify the grouping or partitioning logic, like grouping by a different attribute or adding/removing grouping columns.\n\n            Ensure that:\n\n                The variations maintain consistency with the original intent of the question.\n                Terminology from the glossary is used where applicable.\n                The variations can still be answered using the available schema.\n\n            Please provide ONLY the variations (in a clear, concise format) without any explanation or markdown formatting.\n        "}, "decomposer": {"class_type": "QuestionDecomposerGenerator", "name": "decomposer", "model": "meta-llama/Llama-3.1-8B-Instruct", "role": "You are an expert at breaking down complex business questions into simpler ones.", "output_type": {"q1": "str", "q2": "str", "q3": "str"}, "instruction": "\n        Task: Given the following database schema, glossary, original complex question, and SQL query, break down the original question into 3 distinct sub-questions. These sub-questions should help answer the original question when combined.\n\n        Input Format:\n\n            Database Schema: {schema}\n            Glossary Terms and Definitions: {glossary}\n            Original Complex Question: {question}\n            Original SQL Query: {sql}\n\n        Guidelines for Sub-Questions:\n\n            Self-contained and Specific: Each sub-question should be self-contained and focused on a specific part of the problem. Avoid overly broad or general questions.\n            Consistency with Original Intent: The sub-questions should maintain the original question's intent and objectives. They should be logically connected and contribute to solving the original query.\n            Use Glossary Terminology: Where applicable, use the glossary terms and definitions to ensure the language is consistent with the provided schema.\n            Answerability with Schema: Ensure each sub-question can be answered using the available schema. Refer only to the tables and columns described in the schema when formulating the sub-questions.\n            Avoid Complex Logic in Single Sub-Questions: Keep the logic of each sub-question simple. Do not combine multiple conditions or complex logic in a single sub-question.\n\n        Please provide ONLY the sub-questions (in a clear, concise format) without any explanation or markdown formatting."}, "debugger_1": {"class_type": "SQLDebuggerGenerator", "name": "debugger_1", "model": "meta-llama/Llama-3.1-8B-Instruct", "role": "You are a SQL debugging expert. Output only the corrected SQL query without any explanation.", "output_type": {"corrected_sql": "str"}, "instruction": "SQL Query Debugger:\n    You are provided with a user's question, SQL query, error information, schema, and glossary.\n    \n    Question: {question}\n    The query to fix is: {sql}\n    Error Message: {error}\n    Error Explanation: {explanation}\n    \n    Database Schema:\n    {schema}\n    \n    Glossary:\n    {glossary}\n    \n    Please provide ONLY the corrected SQL query without any explanation or markdown formatting.\n    The query should reference only schema columns where applicable\n    ", "db_type": "sqlite", "db_params": "data/bakery_1.sqlite", "schema": "Schema for table 'customers':\nColumn: Id | Type: INTEGER | Sample Value: 1\nColumn: LastName | Type: TEXT | Sample Value: LOGAN\nColumn: FirstName | Type: TEXT | Sample Value: JULIET\n\nSchema for table 'goods':\nColumn: Id | Type: TEXT | Sample Value: 20-BC-C-10\nColumn: Flavor | Type: TEXT | Sample Value: Chocolate\nColumn: Food | Type: TEXT | Sample Value: Cake\nColumn: Price | Type: REAL | Sample Value: 8.95\n\nSchema for table 'items':\nColumn: Receipt | Type: INTEGER | Sample Value: 18129\nColumn: Ordinal | Type: INTEGER | Sample Value: 1\nColumn: Item | Type: TEXT | Sample Value: 70-TU\n\nSchema for table 'receipts':\nColumn: ReceiptNumber | Type: INTEGER | Sample Value: 10013\nColumn: Date | Type: TEXT | Sample Value: 17-Oct-2007\nColumn: CustomerId | Type: INTEGER | Sample Value: 15\n\n"}, "debugger_2": {"class_type": "SQLDebuggerGenerator", "name": "debugger_2", "model": "meta-llama/Llama-3.1-8B-Instruct", "role": "You are a SQL debugging expert. Output only the corrected SQL query without any explanation.", "output_type": {"corrected_sql": "str"}, "instruction": "SQL Query Debugger:\n    You are provided with a user's question, SQL query, error information, schema, and glossary.\n    \n    Question: {question}\n    The query to fix is: {sql}\n    Error Message: {error}\n    Error Explanation: {explanation}\n    \n    Database Schema:\n    {schema}\n    \n    Glossary:\n    {glossary}\n    \n    Please provide ONLY the corrected SQL query without any explanation or markdown formatting.\n    The query should reference only schema columns where applicable\n    ", "db_type": "sqlite", "db_params": "data/bakery_1.sqlite", "schema": "Schema for table 'customers':\nColumn: Id | Type: INTEGER | Sample Value: 1\nColumn: LastName | Type: TEXT | Sample Value: LOGAN\nColumn: FirstName | Type: TEXT | Sample Value: JULIET\n\nSchema for table 'goods':\nColumn: Id | Type: TEXT | Sample Value: 20-BC-C-10\nColumn: Flavor | Type: TEXT | Sample Value: Chocolate\nColumn: Food | Type: TEXT | Sample Value: Cake\nColumn: Price | Type: REAL | Sample Value: 8.95\n\nSchema for table 'items':\nColumn: Receipt | Type: INTEGER | Sample Value: 18129\nColumn: Ordinal | Type: INTEGER | Sample Value: 1\nColumn: Item | Type: TEXT | Sample Value: 70-TU\n\nSchema for table 'receipts':\nColumn: ReceiptNumber | Type: INTEGER | Sample Value: 10013\nColumn: Date | Type: TEXT | Sample Value: 17-Oct-2007\nColumn: CustomerId | Type: INTEGER | Sample Value: 15\n\n"}, "debugger_3": {"class_type": "SQLDebuggerGenerator", "name": "debugger_3", "model": "meta-llama/Llama-3.1-8B-Instruct", "role": "You are a SQL debugging expert. Output only the corrected SQL query without any explanation.", "output_type": {"corrected_sql": "str"}, "instruction": "SQL Query Debugger:\n    You are provided with a user's question, SQL query, error information, schema, and glossary.\n    \n    Question: {question}\n    The query to fix is: {sql}\n    Error Message: {error}\n    Error Explanation: {explanation}\n    \n    Database Schema:\n    {schema}\n    \n    Glossary:\n    {glossary}\n    \n    Please provide ONLY the corrected SQL query without any explanation or markdown formatting.\n    The query should reference only schema columns where applicable\n    ", "db_type": "sqlite", "db_params": "data/bakery_1.sqlite", "schema": "Schema for table 'customers':\nColumn: Id | Type: INTEGER | Sample Value: 1\nColumn: LastName | Type: TEXT | Sample Value: LOGAN\nColumn: FirstName | Type: TEXT | Sample Value: JULIET\n\nSchema for table 'goods':\nColumn: Id | Type: TEXT | Sample Value: 20-BC-C-10\nColumn: Flavor | Type: TEXT | Sample Value: Chocolate\nColumn: Food | Type: TEXT | Sample Value: Cake\nColumn: Price | Type: REAL | Sample Value: 8.95\n\nSchema for table 'items':\nColumn: Receipt | Type: INTEGER | Sample Value: 18129\nColumn: Ordinal | Type: INTEGER | Sample Value: 1\nColumn: Item | Type: TEXT | Sample Value: 70-TU\n\nSchema for table 'receipts':\nColumn: ReceiptNumber | Type: INTEGER | Sample Value: 10013\nColumn: Date | Type: TEXT | Sample Value: 17-Oct-2007\nColumn: CustomerId | Type: INTEGER | Sample Value: 15\n\n"}}, "validators": {"validator_1": {"class_type": "SQLValidator", "name": "validator_1", "model": "meta-llama/Llama-3.1-8B-Instruct", "role": "", "output_type": {"error": "str", "explanation": "str", "is_valid": "bool"}, "instruction": "\n    Query to validate: {sql}\n    Schema: {schema}\n    Glossary: {glossary}\n    \n    Validate this SQL query against the provided schema.\n    ", "db_type": "sqlite", "db_params": "data/bakery_1.sqlite", "schema": "Schema for table 'customers':\nColumn: Id | Type: INTEGER | Sample Value: 1\nColumn: LastName | Type: TEXT | Sample Value: LOGAN\nColumn: FirstName | Type: TEXT | Sample Value: JULIET\n\nSchema for table 'goods':\nColumn: Id | Type: TEXT | Sample Value: 20-BC-C-10\nColumn: Flavor | Type: TEXT | Sample Value: Chocolate\nColumn: Food | Type: TEXT | Sample Value: Cake\nColumn: Price | Type: REAL | Sample Value: 8.95\n\nSchema for table 'items':\nColumn: Receipt | Type: INTEGER | Sample Value: 18129\nColumn: Ordinal | Type: INTEGER | Sample Value: 1\nColumn: Item | Type: TEXT | Sample Value: 70-TU\n\nSchema for table 'receipts':\nColumn: ReceiptNumber | Type: INTEGER | Sample Value: 10013\nColumn: Date | Type: TEXT | Sample Value: 17-Oct-2007\nColumn: CustomerId | Type: INTEGER | Sample Value: 15\n\n"}, "validator_2": {"class_type": "SQLValidator", "name": "validator_2", "model": "meta-llama/Llama-3.1-8B-Instruct", "role": "", "output_type": {"error": "str", "explanation": "str", "is_valid": "bool"}, "instruction": "\n    Query to validate: {sql}\n    Schema: {schema}\n    Glossary: {glossary}\n    \n    Validate this SQL query against the provided schema.\n    ", "db_type": "sqlite", "db_params": "data/bakery_1.sqlite", "schema": "Schema for table 'customers':\nColumn: Id | Type: INTEGER | Sample Value: 1\nColumn: LastName | Type: TEXT | Sample Value: LOGAN\nColumn: FirstName | Type: TEXT | Sample Value: JULIET\n\nSchema for table 'goods':\nColumn: Id | Type: TEXT | Sample Value: 20-BC-C-10\nColumn: Flavor | Type: TEXT | Sample Value: Chocolate\nColumn: Food | Type: TEXT | Sample Value: Cake\nColumn: Price | Type: REAL | Sample Value: 8.95\n\nSchema for table 'items':\nColumn: Receipt | Type: INTEGER | Sample Value: 18129\nColumn: Ordinal | Type: INTEGER | Sample Value: 1\nColumn: Item | Type: TEXT | Sample Value: 70-TU\n\nSchema for table 'receipts':\nColumn: ReceiptNumber | Type: INTEGER | Sample Value: 10013\nColumn: Date | Type: TEXT | Sample Value: 17-Oct-2007\nColumn: CustomerId | Type: INTEGER | Sample Value: 15\n\n"}, "validator_3": {"class_type": "SQLValidator", "name": "validator_3", "model": "meta-llama/Llama-3.1-8B-Instruct", "role": "", "output_type": {"error": "str", "explanation": "str", "is_valid": "bool"}, "instruction": "\n    Query to validate: {sql}\n    Schema: {schema}\n    Glossary: {glossary}\n    \n    Validate this SQL query against the provided schema.\n    ", "db_type": "sqlite", "db_params": "data/bakery_1.sqlite", "schema": "Schema for table 'customers':\nColumn: Id | Type: INTEGER | Sample Value: 1\nColumn: LastName | Type: TEXT | Sample Value: LOGAN\nColumn: FirstName | Type: TEXT | Sample Value: JULIET\n\nSchema for table 'goods':\nColumn: Id | Type: TEXT | Sample Value: 20-BC-C-10\nColumn: Flavor | Type: TEXT | Sample Value: Chocolate\nColumn: Food | Type: TEXT | Sample Value: Cake\nColumn: Price | Type: REAL | Sample Value: 8.95\n\nSchema for table 'items':\nColumn: Receipt | Type: INTEGER | Sample Value: 18129\nColumn: Ordinal | Type: INTEGER | Sample Value: 1\nColumn: Item | Type: TEXT | Sample Value: 70-TU\n\nSchema for table 'receipts':\nColumn: ReceiptNumber | Type: INTEGER | Sample Value: 10013\nColumn: Date | Type: TEXT | Sample Value: 17-Oct-2007\nColumn: CustomerId | Type: INTEGER | Sample Value: 15\n\n"}}, "execution_order": ["pattern", "validator_1", "debugger_1", "variation", "validator_2", "debugger_2", "decomposer", "validator_3", "debugger_3"], "record_directory": "results_agentic_pipeline/2025-04-29_16-52-34", "record_step": true, "record_results": true}